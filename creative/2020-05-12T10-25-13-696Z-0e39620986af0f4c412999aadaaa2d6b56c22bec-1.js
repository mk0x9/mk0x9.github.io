(function(){/*
 creative
 0e39620986af0f4c412999aadaaa2d6b56c22bec
 2020-05-12T10:25:13.696Z */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(l){var f=0;return function(){return f<l.length?{done:!1,value:l[f++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||'function'==typeof Object.defineProperties?Object.defineProperty:function(l,f,a){l!=Array.prototype&&l!=Object.prototype&&(l[f]=a.value)};$jscomp.getGlobal=function(l){return'undefined'!=typeof window&&window===l?l:'undefined'!=typeof global&&null!=global?global:l};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(l,f){this.$jscomp$symbol$id_=l;$jscomp.defineProperty(this,'description',{configurable:!0,writable:!0,value:f})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function l(a){if(this instanceof l)throw new TypeError('Symbol is not a constructor');return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(a||'')+'_'+f++,a)}var f=0;return l}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.iterator;l||(l=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol('Symbol.iterator'));'function'!=typeof Array.prototype[l]&&$jscomp.defineProperty(Array.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.asyncIterator;l||(l=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol('Symbol.asyncIterator'));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(l){$jscomp.initSymbolIterator();l={next:l};l[$jscomp.global.Symbol.iterator]=function(){return this};return l};
$jscomp.makeIterator=function(l){var f='undefined'!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];return f?f.call(l):$jscomp.arrayIterator(l)};$jscomp.arrayFromIterator=function(l){for(var f,a=[];!(f=l.next()).done;)a.push(f.value);return a};$jscomp.arrayFromIterable=function(l){return l instanceof Array?l:$jscomp.arrayFromIterator($jscomp.makeIterator(l))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||'function'==typeof Object.create?Object.create:function(l){var f=function(){};f.prototype=l;return new f};
$jscomp.underscoreProtoCanBeSet=function(){var l={a:!0},f={};try{return f.__proto__=l,f.a}catch(a){}return!1};$jscomp.setPrototypeOf='function'==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(l,f){l.__proto__=f;if(l.__proto__!==f)throw new TypeError(l+' is not extensible');return l}:null;
$jscomp.inherits=function(l,f){l.prototype=$jscomp.objectCreate(f.prototype);l.prototype.constructor=l;if($jscomp.setPrototypeOf){var a=$jscomp.setPrototypeOf;a(l,f)}else for(a in f)if('prototype'!=a)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(f,a);n&&Object.defineProperty(l,a,n)}else l[a]=f[a];l.superClass_=f.prototype};
$jscomp.polyfill=function(l,f,a,n){if(f){a=$jscomp.global;l=l.split('.');for(n=0;n<l.length-1;n++){var d=l[n];d in a||(a[d]={});a=a[d]}l=l[l.length-1];n=a[l];f=f(n);f!=n&&null!=f&&$jscomp.defineProperty(a,l,{configurable:!0,writable:!0,value:f})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill('Promise',function(l){function f(){this.batch_=null}function a(a){return a instanceof d?a:new d(function(m,d){m(a)})}if(l&&!$jscomp.FORCE_POLYFILL_PROMISE)return l;f.prototype.asyncExecute=function(d){if(null==this.batch_){this.batch_=[];var m=this;this.asyncExecuteFunction(function(){m.executeBatch_()})}this.batch_.push(d)};var n=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(d){n(d,0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=
this.batch_;this.batch_=[];for(var m=0;m<d.length;++m){var a=d[m];d[m]=null;try{a()}catch(g){this.asyncThrow_(g)}}}this.batch_=null};f.prototype.asyncThrow_=function(d){this.asyncExecuteFunction(function(){throw d;})};var d=function(d){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var m=this.createResolveAndReject_();try{d(m.resolve,m.reject)}catch(p){m.reject(p)}};d.prototype.createResolveAndReject_=function(){function d(g){return function(k){a||(a=!0,g.call(m,k))}}var m=this,a=!1;
return{resolve:d(this.resolveTo_),reject:d(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError('A Promise cannot resolve to itself'));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case 'object':var m=null!=a;break a;case 'function':m=!0;break a;default:m=!1}m?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(d){var m=void 0;try{m=d.then}catch(p){this.reject_(p);return}'function'==typeof m?
this.settleSameAsThenable_(m,d):this.fulfill_(d)};d.prototype.reject_=function(d){this.settle_(2,d)};d.prototype.fulfill_=function(d){this.settle_(1,d)};d.prototype.settle_=function(d,m){if(0!=this.state_)throw Error('Cannot settle('+d+', '+m+'): Promise already settled in state'+this.state_);this.state_=d;this.result_=m;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var d=0;d<this.onSettledCallbacks_.length;++d)q.asyncExecute(this.onSettledCallbacks_[d]);
this.onSettledCallbacks_=null}};var q=new f;d.prototype.settleSameAsPromise_=function(d){var m=this.createResolveAndReject_();d.callWhenSettled_(m.resolve,m.reject)};d.prototype.settleSameAsThenable_=function(d,m){var a=this.createResolveAndReject_();try{d.call(m,a.resolve,a.reject)}catch(g){a.reject(g)}};d.prototype.then=function(a,m){function f(b,d){return'function'==typeof b?function(c){try{g(b(c))}catch(C){k(C)}}:d}var g,k,b=new d(function(b,d){g=b;k=d});this.callWhenSettled_(f(a,g),f(m,k));return b};
d.prototype.catch=function(d){return this.then(void 0,d)};d.prototype.callWhenSettled_=function(d,a){function m(){switch(g.state_){case 1:d(g.result_);break;case 2:a(g.result_);break;default:throw Error('Unexpected state: '+g.state_);}}var g=this;null==this.onSettledCallbacks_?q.asyncExecute(m):this.onSettledCallbacks_.push(m)};d.resolve=a;d.reject=function(a){return new d(function(d,f){f(a)})};d.race=function(f){return new d(function(d,p){for(var g=$jscomp.makeIterator(f),k=g.next();!k.done;k=g.next())a(k.value).callWhenSettled_(d,
p)})};d.all=function(f){var m=$jscomp.makeIterator(f),p=m.next();return p.done?a([]):new d(function(d,k){function b(b){return function(k){c[b]=k;g--;0==g&&d(c)}}var c=[],g=0;do c.push(void 0),g++,a(p.value).callWhenSettled_(b(c.length-1),k),p=m.next();while(!p.done)})};return d},'es6','es3');
$jscomp.iteratorFromArray=function(l,f){$jscomp.initSymbolIterator();l instanceof String&&(l+='');var a=0,n={next:function(){if(a<l.length){var d=a++;return{value:f(d,l[d]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};$jscomp.polyfill('Array.prototype.keys',function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},'es6','es3');
(function(l){function f(n){if(a[n])return a[n].exports;var d=a[n]={i:n,l:!1,exports:{}};l[n].call(d.exports,d,d.exports,f);d.l=!0;return d.exports}var a={};f.m=l;f.c=a;f.d=function(a,d,l){f.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:l})};f.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();'undefined'!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(a,Symbol.toStringTag,{value:'Module'}));Object.defineProperty(a,'__esModule',{value:!0})};f.t=function(a,
d){d&1&&(a=f(a));if(d&8||d&4&&'object'===typeof a&&a&&a.__esModule)return a;var l=Object.create(null);f.r(l);Object.defineProperty(l,'default',{enumerable:!0,value:a});if(d&2&&'string'!=typeof a)for(var n in a)f.d(l,n,function(d){return a[d]}.bind(null,n));return l};f.n=function(a){var d=a&&a.__esModule?function(){return a['default']}:function(){return a};f.d(d,'a',d);return d};f.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};f.p='';return f(f.s=24)})([function(l,f,a){function n(b,
c,d,a){d=b===c?b>d&&c<a?Infinity:-Infinity:b>a||d>c?0:Math.min(c,a)-Math.max(b,d);return Infinity===d?1:-Infinity===d?0:d/(c-b)}a.d(f,'b',function(){return t});a.d(f,'a',function(){return C});a.d(f,'c',function(){return u});var d='performance'in window&&'now'in performance&&'timeOrigin'in performance,q=function(b,c,a,k,g,z,r,e,m,t,f,u){z=void 0===z?[]:z;u=void 0===u?function(b,c){}:u;this.logger=0;this.visibilityHandlerGroupList=[];this.disabled=this.viewed=!1;this.viewStart=this.viewedTime=this.visibilityTimeoutId=
0;this.isVisible=!1;this.currentTime=function(){return d?performance.timeOrigin+performance.now():Date.now()};this.title=b;this.context=c;this.visibilityTarget=a;this.visibilityPercent=k;this.visibilityHandlerGroupList=z;this.visibilityTime=g;this.performOnlyOnce=r;this.callbackVisible=e;this.callbackInvisible=m;this.callbackTrackingStarts=void 0===t?function(){}:t;this.callbackTrackingEnds=void 0===f?function(){}:f;this.callbackVisibleUpdate=u};q.prototype.enable=function(){return!1};q.prototype.disable=
function(){return!1};q.prototype.setVisible=function(b){var c=this;b=void 0===b?this.currentTime():b;if(!this.isVisible)if(this.isVisible=!0,this.callbackTrackingStarts.call(this),!1===this.viewed){this.viewStart=b;var d=this.viewedTime;0<this.visibilityHandlerGroupList.length?(this.logger.log('setVisible() Determine the viewedTime sum from the group'),d=0,this.visibilityHandlerGroupList.forEach(function(b){c.logger.log("setVisible() Add viewedTime of '"+b.visibilityHandler.viewedTime+"' (current: "+
d+") from the group member '"+b.title+"'");d+=b.visibilityHandler.viewedTime}),this.logger.log("setVisible() Use viewedTime of '"+d+"' from the group")):this.logger.log("setVisible() Use viewedTime of '"+d+"' from myself");var a=this.visibilityTime-d;0>a?this.logger.log('setVisible() SKIP starting timer because the limit was already reached'):(this.visibilityTimeoutId=this.context.Environment.hostWindow.setTimeout(function(){c.logger.log("setVisible() Invoked timer '"+c.visibilityTimeoutId+"' with timeout of '"+
a+"'");c.viewed=!0;c.viewedTime+=c.currentTime()-c.viewStart;c.callbackVisible.call(c)},a),this.logger.log("setVisible() Started timer '"+this.visibilityTimeoutId+"' with timeout of '"+a+"' ms"))}else!0!==this.viewed||this.performOnlyOnce||this.callbackVisible.call(this)};q.prototype.visibleUpdate=function(b,c){c=void 0===c?this.currentTime():c;this.isVisible&&this.callbackVisibleUpdate.call(this,b,c)};q.prototype.setInvisible=function(b){var c=this;b=void 0===b?this.currentTime():b;if(this.isVisible){this.isVisible=
!1;!1===this.viewed&&0!==this.viewStart&&(this.viewedTime+=b-this.viewStart,this.visibilityTimeoutId&&(this.logger.log("setInvisible() Clear timer '"+this.visibilityTimeoutId+"'"),this.context.Environment.hostWindow.clearTimeout(this.visibilityTimeoutId),this.visibilityTimeoutId=0),this.callbackTrackingEnds.call(this),this.callbackInvisible.call(this));!0!==this.viewed||this.performOnlyOnce?!0===this.viewed&&this.performOnlyOnce&&(this.callbackInvisible.call(this),this.disable()):(this.callbackTrackingEnds.call(this),
this.callbackInvisible.call(this));var d=this.viewedTime;0<this.visibilityHandlerGroupList.length?(this.logger.log('setInvisible() Determine the viewedTime sum from the group'),d=0,this.visibilityHandlerGroupList.forEach(function(b){c.logger.log("setInvisible() Add viewedTime of '"+b.visibilityHandler.viewedTime+"' (current: "+d+") from the group member '"+b.title+"'");d+=b.visibilityHandler.viewedTime}),this.logger.log("setInvisible() Calculated viewedTime of '"+d+"' from the group")):this.logger.log("setInvisible() Calculated viewedTime of '"+
d+"' from myself")}};var v=function(b,c,d,a,k,z,g,e,r,m,t,f){z=void 0===z?[]:z;var y=q.call(this,b,c,d,a,k,z,g,e,r,m,t,f)||this;y.lastVisibilityPercentage=0;y.setInvisible=function(b){b=void 0===b?y.currentTime():b;y.logger.log('Ad is NOT visible for minimum '+y.visibilityPercent+' - detected by scroll handler',{now:b,viewStart:y.viewStart,percent:y.lastVisibilityPercentage,time:y.viewedTime});q.prototype.setInvisible.call(y,b)};y.logger=c.newLogger('VisibilityHandlerScroll['+y.title+']');y.calculateVisibilityHandler=
function(){};return y};$jscomp.inherits(v,q);v.prototype.enable=function(){var b=this.visibilityTarget;this.logger.log('Enable visibility tracking by using scroll handler',{threshold:this.visibilityPercent,ms:this.visibilityTime});this.trackViewportUpdates(b,this.onVisibility.bind(this));this.onVisibility(this.calculateVisibility(b));return!0};v.prototype.disable=function(){var b=this.context.Listener;if(this.disabled)return!0;this.disabled=!0;this.logger.log('Disable visibility tracking by using scroll handler',
{threshold:this.visibilityPercent,ms:this.visibilityTime});clearTimeout(this.visibilityTimeoutId);b.remove('scroll',this.calculateVisibilityHandler);b.remove('resize',this.calculateVisibilityHandler);b.remove('orientationchange',this.calculateVisibilityHandler);return!0};v.prototype.calculateVisibility=function(b){var c=b.getBoundingClientRect();b=c.left;var d=c.top,a=c.right,k=c.bottom,z=c.width;c=c.height;var g=this.context.Environment.hostWindow,e=g.innerHeight;g=n(b,a,0,g.innerWidth);e=n(d,k,
0,e);return{visibilityPercentage:g*e,left:b,top:d,right:a,bottom:k,width:z,height:c,visibilityX:g,visibilityY:e}};v.prototype.trackViewportUpdates=function(b,c){var d=this,a=this.context.Listener;this.calculateVisibilityHandler=function(){c(d.calculateVisibility(b))};a.add('scroll',this.calculateVisibilityHandler,0,!0);a.add('resize',this.calculateVisibilityHandler,0,!0);a.add('orientationchange',this.calculateVisibilityHandler,0,!0)};v.prototype.onVisibility=function(b){var c=this.visibilityPercent/
100;this.lastVisibilityPercentage<=c&&b.visibilityPercentage>c?this.setVisible():this.lastVisibilityPercentage>c&&b.visibilityPercentage<=c&&this.setInvisible();q.prototype.visibleUpdate.call(this,b);this.lastVisibilityPercentage=b.visibilityPercentage};v.prototype.setVisible=function(b){b=void 0===b?this.currentTime():b;this.logger.log('Ad is visible for minimum '+this.visibilityPercent+' - detected by scroll handler',{now:b,percent:this.lastVisibilityPercentage,time:this.viewedTime});q.prototype.setVisible.call(this,
b)};var m=function(b){for(var c,d=[],a=0;a<arguments.length;++a)d[a-0]=arguments[a];c=q.apply(this,$jscomp.arrayFromIterable(d))||this;c.onObserved=function(b){b.forEach(function(b){var d=performance.timeOrigin+b.time;0!==b.intersectionRatio&&b.intersectionRatio>=c.visibilityPercent/100?c.setVisible(d):c.setInvisible(d)})};c.logger=c.context.newLogger('VisibilityHandlerIntersectionObserver['+c.title+']');return c};$jscomp.inherits(m,q);m.prototype.enable=function(){if(this.disabled)return!0;var b=
this.visibilityTarget;this.logger.log('Enable visibility tracking by using IntersectionObserver handler',{threshold:this.visibilityPercent,ms:this.visibilityTime});try{this.intersectionObserver=new IntersectionObserver(this.onObserved,{root:null,threshold:this.visibilityPercent/100}),this.intersectionObserver.observe(b)}catch(x){return!1}return!0};m.prototype.disable=function(){if(this.disabled)return!0;this.disabled=!0;this.logger.log('Disable visibility tracking by using IntersectionObserver handler',
{threshold:this.visibilityPercent,ms:this.visibilityTime});clearTimeout(this.visibilityTimeoutId);try{if(this.intersectionObserver)this.intersectionObserver.disconnect();else return!1}catch(y){return!1}return!0};m.prototype.setVisible=function(b){b=void 0===b?this.currentTime():b;this.logger.log('Ad is visible for minimum '+this.visibilityPercent+' - detected by intersectionObserver handler',{now:b,percent:-1,time:this.viewedTime});q.prototype.setVisible.call(this,b)};m.prototype.setInvisible=function(b){b=
void 0===b?this.currentTime():b;this.logger.log('Ad is NOT visible for minimum '+this.visibilityPercent+' - detected by intersectionObserver handler',{now:b,viewStart:this.viewStart,percent:-1,time:this.viewedTime});q.prototype.setInvisible.call(this,b)};var p=a(11),g=function(b){for(var c,d=[],a=0;a<arguments.length;++a)d[a-0]=arguments[a];c=q.apply(this,$jscomp.arrayFromIterable(d))||this;c.onObserved=function(b){b.forEach(function(b){var d=performance.timeOrigin+b.time;0!==b.intersectionRatio&&
b.intersectionRatio>=c.visibilityPercent/100?c.setVisible(d):c.setInvisible(d)})};c.logger=c.context.newLogger('VisibilityHandlerAmpIntersectionObserver['+c.title+']');return c};$jscomp.inherits(g,q);g.prototype.enable=function(){if(this.disabled)return!0;this.logger.log('enable',{threshold:this.visibilityPercent,ms:this.visibilityTime});try{this.disableObserver=this.context.Environment.hostWindow.context.observeIntersection(this.onObserved)}catch(y){return!1}return!0};g.prototype.disable=function(){if(this.disabled)return!0;
this.disabled=!0;this.logger.log('disabled',{threshold:this.visibilityPercent,ms:this.visibilityTime});clearTimeout(this.visibilityTimeoutId);try{this.disableObserver()}catch(y){return!1}return!0};g.prototype.setVisible=function(b){b=void 0===b?this.currentTime():b;this.isVisible||this.logger.log('setVisible');q.prototype.setVisible.call(this,b)};g.prototype.setInvisible=function(b){b=void 0===b?this.currentTime():b;this.isVisible&&this.logger.log('setInvisible');q.prototype.setInvisible.call(this,
b)};var k=a(3),b=function(b){for(var c,d=[],a=0;a<arguments.length;++a)d[a-0]=arguments[a];c=q.apply(this,$jscomp.arrayFromIterable(d))||this;c.onViewableChange=function(b){b?(c.logger.log('Ad is NOT visible - detected by mraid.isViewable()'),c.setVisible()):(c.logger.log('Ad is visible - detected by mraid.isViewable()'),c.setInvisible())};c.logger=c.context.newLogger('VisibilityHandlerMRAIDIsViewable['+c.title+']');return c};$jscomp.inherits(b,q);b.prototype.enable=function(){if(this.disabled)return!0;
if(!this.context.Environment.isMRAID)return!1;Object(k.c)(this.onViewableChange);var b=Object(k.f)();this.onViewableChange(b);return!0};b.prototype.disable=function(){if(this.disabled)return!0;this.disabled=!0;Object(k.i)(this.onViewableChange);return!0};var c=function(b){for(var c,d=[],a=0;a<arguments.length;++a)d[a-0]=arguments[a];c=q.apply(this,$jscomp.arrayFromIterable(d))||this;c.onExposureChange=function(b){b>=c.visibilityPercent?c.setVisible():c.setInvisible()};c.logger=c.context.newLogger('VisibilityHandlerMRAIDExposureChange['+
c.title+']');return c};$jscomp.inherits(c,q);c.prototype.enable=function(){if(this.disabled)return!0;if(!this.context.Environment.isMRAID)return!1;Object(k.b)(this.onExposureChange);this.onExposureChange(0);return!0};c.prototype.disable=function(){if(this.disabled)return!0;this.disabled=!0;Object(k.h)(this.onExposureChange);return!0};var r='IntersectionObserver'in window,t={ENABLED:'enabled',DISABLED:'disabled',SKIPPED:'skipped',WAITING:'waiting',STARTED:'started',PAUSED:'paused',FINISHED:'finished'},
C={AD_SESSION_ID:'data-yoc-ad-session-id',CONTAINER_TYPE:'data-yoc-container-type',VIEWABILITY:'data-yoc-tracking-viewability',VIEWABILITY_STATUS:'data-yoc-tracking-viewability-status',VIEWABILITY_TIME:'data-yoc-tracking-viewability-time',VIEWABILITY_GOAL:'data-yoc-tracking-viewability-goal',VIEWABILITY_SUCCESS:'data-yoc-tracking-viewability-success',CLICK:'data-yoc-tracking-click',CLICK_STATUS:'data-yoc-tracking-click-status',CLICK_GOAL:'data-yoc-tracking-click-goal',CLICK_SUCCESS:'data-yoc-tracking-click-success'},
u=function(b,c,d,a,k,z,g,e,r,m,t,f,u,p){g=void 0===g?[]:g;t=void 0===t?!1:t;f=void 0===f?function(){}:f;u=void 0===u?function(){}:u;p=void 0===p?function(b,c){}:p;this.visibilityHandlerGroupList=[];this.visibilityHandler=null;this.title=b;this.context=c;this.logger=c.newLogger('Visibility');this.visibilityTarget=d;this.visibilityPercent=a;this.visibilityTime=k;this.visibilityHandlerType=z;this.visibilityHandlerGroupList=g;this.performOnlyOnce=e;this.callbackVisible=r;this.callbackInvisible=m;this.callbackTrackingStarts=
f;this.callbackTrackingEnds=u;this.callbackVisibleUpdate=p;this.logger.log('Setup visibility check '+this.title,{visibilityTarget:this.visibilityTarget,visibilityPercent:this.visibilityPercent,visibilityTime:this.visibilityTime,visibilityHandlerType:this.visibilityHandlerType,performOnlyOnce:this.performOnlyOnce});t&&(this.init(),this.enable())};u.prototype.init=function(){var d=this.context.Environment;switch(this.visibilityHandlerType){case 'auto':d.isMRAID?Object(k.k)()?this.visibilityHandler=
new c(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds):this.visibilityHandler=new b(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds):
Object(p.c)(d.hostWindow)?this.visibilityHandler=new g(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds):this.visibilityHandler=!0===r?new m(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,
this.callbackTrackingStarts,this.callbackTrackingEnds):new v(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds,this.callbackVisibleUpdate);break;case 'scroll':this.visibilityHandler=new v(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,
this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds,this.callbackVisibleUpdate);break;case 'intersectionObserver':!0===r?this.visibilityHandler=new m(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds):this.logger.error(this.title+" Can't setup visibility tracking (via intersectionObserver)");
break;default:this.logger.error(this.title+' Can\'t setup visibility tracking (unknown or unsupported handler "'+this.visibilityHandlerType+'")')}};u.prototype.enable=function(){switch(this.visibilityHandlerType){case 'auto':return!0===r?this.visibilityHandler.enable()?!0:(this.visibilityHandler=new v(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,
this.callbackTrackingEnds,this.callbackVisibleUpdate),this.visibilityHandler.enable()):this.visibilityHandler.enable();case 'scroll':return this.visibilityHandler.enable();case 'intersectionObserver':if(!0===r)return this.visibilityHandler.enable();this.logger.error(this.title+" Can't enable visibility tracking (via intersectionObserver)");break;default:this.logger.error(this.title+' Can\'t enable visibility tracking (unknown or unsupported handler "'+this.visibilityHandlerType+'")')}return!1};u.prototype.disable=
function(){return this.visibilityHandler.disable()}},function(l,f,a){function n(b){b=b.style;b.display='none';b.visibility='hidden'}function d(b){b=b.style;b.display='';b.visibility='visible'}function q(b,c){var d=b.hostDocument.createElement('style');d.append(b.hostDocument.createTextNode(c));b.hostDocument.head.append(d)}function v(b){return b.mozHasAudio||!!b.webkitAudioDecodedByteCount||!(!b.audioTracks||!b.audioTracks.length)}a.d(f,'e',function(){return m});a.d(f,'f',function(){return n});a.d(f,
'h',function(){return d});a.d(f,'g',function(){return q});a.d(f,'b',function(){return p});a.d(f,'a',function(){return g});a.d(f,'c',function(){return u});a.d(f,'d',function(){return w});var m=function(b,c){return b.hostDocument.createElement(c)},p=function(b,c,d){var a=this;d=void 0===d?!0:d;this.onLoad=function(){a.logger.log('On load of img tag invoked',a.url);var b=a.state;a.state='loaded';a.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:a,previousState:b}})};
this.onError=function(){a.logger.log('On error of img tag invoked',a.url);var b=a.state;a.state='failed-preload';a.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:a,previousState:b}})};var e=document.createElement('img');this.context=b;this.logger=b.newLogger('Image');this.state='preloading';this.node=e;this.url=c;this.logger.log('Creating img tag ('+(d?'asset':'no asset')+')',this.url);!0===d&&(this.logger.log('Add img tag as new asset',this.url),b.messageBus.asset.emit({kind:'added',
message:{kind:'new-asset',asset:this}}),e.addEventListener('load',this.onLoad,!1),e.addEventListener('error',this.onError,!1));e.src=c},g=function(b,c,d){var a=this;d=void 0===d?!0:d;this.onLoad=function(){var b=a.state;a.state='loaded';a.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:a,previousState:b}})};this.onError=function(){var b=a.state;a.state='failed-preload';a.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:a,previousState:b}})};
var e=document.createElement('iframe');this.context=b;this.state='preloading';this.node=e;this.url=c;!0===d&&(b.messageBus.asset.emit({kind:'added',message:{kind:'new-asset',asset:this}}),e.addEventListener('load',this.onLoad,!1),e.addEventListener('error',this.onError,!1));e.src=c},k=a(9),b=a(7);l=a(5);var c=a(6),r=a(4),t=a(2),C=l.a,u=function(d,a){var e=C.call(this)||this;e.state='preloading';e.width=0;e.height=0;e.previousVideoProgress={currentTime:0,percentage:0};e.loadPromiseResolver=0;e.loadPromiseReject=
0;e.isEnded=!1;e.muted=!0;e.haveRestartedOnFirstUnmute=!1;e.haveStarted=!1;e.reportedStats=!1;e.dimensionsListenersForHLS={};e.isWaiting=!1;e.onSourceError=function(){var b='Video: <source> error: '+e.url;e.context.Environment.isLogMode&&(console.error('debug!'),console.error(b));e.logger.error(b);e.loadPromiseReject(new t.k(t.g));b=e.state;e.state='failed-preload';e.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:e,previousState:b}});e.context.messageBus.event.emit({kind:'close',
interactive:!1})};e.onError=function(){var b=e.context.Environment,c='Video: error: '+e.url,a=e.video.error,d=t.f;a?(a.message&&(c+='\n'+a.message),e.logger.error(c),-1!==[3,4].indexOf(a.code)&&(d=t.h)):e.logger.error(c);e.context.messageBus.event.emit({kind:'tracker',event:'video-error',details:{errorCode:d}});e.context.messageBus.event.emit({kind:'close',interactive:!1});(b.isLogMode||b.isDebugMode)&&e.context.troubleshooting.log()};e.onLoadedMetadata=function(){e.logger.debug('Video: loaded metadata',
{url:e.url,'video-dimensions':e.video.videoWidth+'\u00d7'+e.video.videoHeight});var b=e.state;e.state='loaded';e.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:e,previousState:b}});e.reattachVideo();var c=e.video;b=c.videoWidth;var a=c.videoHeight;c=c.duration;b||a?e.emit({kind:'actualVideoSizes',width:b,height:a,duration:c,source:'video-slot'}):e.subscribeToVideoEventsToGetVideoSizes();e.loadPromiseResolver()};e.onLoadedData=function(){e.logger.debug('Video: loaded data');
e.emit({kind:'audioAvailability',hasAudio:v(e.video)})};e.onCanPlay=function(){e.logger.debug('Video: canplay')};e.onPlay=function(){var b=e.context.Environment;e.haveStarted?e.emit({kind:'resume'}):(e.emit({kind:'start'}),e.haveStarted=!0);var a=e.options,d=a.breakpointTrackingPercentage;e.logger.debug('Video: Play',{'tracking-time-breakpoints':a.breakpointTrackingTime.map(function(c){return Object(r.a)(b,c)}).join(', '),'tracking-percent-breakpoints':d.map(function(a){return Object(c.a)(b,a)}).join(', ')});
e.reportedStats||(e.reportedStats=!0,e.reportStats());e.emit({kind:'play'})};e.onPause=function(){e.emit({kind:'pause'})};e.onResume=function(){e.emit({kind:'resume'})};e.onTimeUpdate=function(){e.emit({kind:'timeUpdate'});e.performVideoTracking(e.currentProgress)};e.onEnded=function(){e.logger.debug('Video: Ended');e.performVideoTracking(e.currentProgress);e.isEnded=!0;e.emit({kind:'complete'})};e.onWaiting=function(){e.logger.debug('Video: Waiting');e.isWaiting=!0;e.emit({kind:'waiting'})};e.onPlaying=
function(){e.logger.debug('Video: Playing');e.isWaiting&&e.emit({kind:'resumed-from-waiting'});e.isWaiting=!1};var k=d.context,g=d.initConfig,z=d.sourceUrl;e.adConfig=d.adConfig;e.uniqueId='yoc_video_player_'+g.meta.adSessionId;k.messageBus.asset.emit({kind:'added',message:{kind:'new-asset',asset:e}});e.context=k;e.logger=k.newLogger('VideoPlayerMedia');e.url=z;d=e.context.Environment;e.options=Object.assign({},b.a,a);a=m(d,'div');e.wrapper=a;a.style.overflow='hidden';a.style.display='block';a=m(d,
'video');e.video=a;a.muted=!0;a.preload='auto';'playsInline'in a&&(a.playsInline=!0);a.style.pointerEvents='none';a.style.height='100%';a.style.width='100%';a.id=e.uniqueId;a.addEventListener('loadedmetadata',e.onLoadedMetadata,!1);a.addEventListener('loadeddata',e.onLoadedData,!1);a.addEventListener('error',e.onError,!1);a.addEventListener('canplay',e.onCanPlay,!1);a.addEventListener('play',e.onPlay,!1);a.addEventListener('playing',e.onPlaying,!1);a.addEventListener('timeupdate',e.onTimeUpdate,!1);
a.addEventListener('ended',e.onEnded,!1);a.addEventListener('waiting',e.onWaiting,!1);e.setDimensions({width:e.width,height:e.height,scaleFactor:1});a.style.display='none';e.context.rootContainer.append(a);e.loadPromise=new Promise(function(b,c){e.loadPromiseResolver=b;e.loadPromiseReject=c});a=m(d,'source');e.videoSource=a;return e};$jscomp.inherits(u,C);u.prototype.load=function(){this.videoSource.addEventListener('error',this.onSourceError,!1);var b=this.url;/i(Pod|Phone|Pad)/.test(navigator.platform)&&
!/#/.test(b)&&(b+='#t=0.001');this.videoSource.src=b;this.video.append(this.videoSource);return this.loadPromise};u.prototype.setDimensions=function(b){var c=b.width,a=b.height;b=b.scaleFactor;this.width=c;this.height=a;var d=this.wrapper.style;d.width=''+c+'px';d.height=''+a+'px';d.transform='scale('+b+')';d.transformOrigin='top left'};u.prototype.performVideoTracking=function(b){var a=this,d=this.options,k=this.previousVideoProgress,g=this.context.Environment;d.breakpointTrackingTime.forEach(function(c){k.currentTime<=
c&&c<b.currentTime&&(a.logger.debug('progressTime',{time:Object(r.a)(g,c)}),a.emit({kind:'progressTime',time:c}))});d.breakpointTrackingPercentage.forEach(function(d){var e=d/100;k.percentage<=e&&e<b.percentage&&(a.logger.debug('progressPercentage',{time:Object(c.a)(g,e)}),a.emit({kind:'progressPercentage',percentage:d}))});.25>=k.percentage&&.25<b.percentage?(this.logger.debug('firstQuartile'),this.emit({kind:'firstQuartile'})):.5>=k.percentage&&.5<b.percentage?(this.logger.debug('midpoint'),this.emit({kind:'midpoint'})):
.75>=k.percentage&&.75<b.percentage&&(this.logger.debug('thirdQuartile'),this.emit({kind:'thirdQuartile'}));this.previousVideoProgress=b};u.prototype.appendTo=function(b){b.append(this.wrapper)};u.prototype.reattachVideo=function(){var b=this.video;this.wrapper.append(b);b.style.removeProperty('display')};u.prototype.subscribeToVideoEventsToGetVideoSizes=function(){var b=this,c=this.video,a=function(){var a=c.videoWidth,d=c.videoHeight,e=c.duration;a&&d&&e&&(b.unsubscribeFromVideoEvents(a,d,e),b.emit({kind:'actualVideoSizes',
width:a,height:d,duration:e,source:'video-slot'}))},d;for(d in c)if(/^on/.test(d)&&!/mouse|touch|pointer/.test(d)){var k=d.slice(2);this.dimensionsListenersForHLS[k]=a;c.addEventListener(k,a,!1)}};u.prototype.unsubscribeFromVideoEvents=function(b,c,a){var d=this.dimensionsListenersForHLS,e=this.video;Object.keys(d).forEach(function(b){e.removeEventListener(b,d[b],!1)})};u.prototype.mute=function(){this.muted=!0;var b=this.video;this.logger.debug('mute');b.muted||(b.muted=!0,this.emit({kind:'mute'}))};
u.prototype.unmute=function(){this.muted=!1;var b=this.video;this.haveRestartedOnFirstUnmute||(b.currentTime=0);this.logger.debug('unmute');b.muted&&(b.muted=!1,this.emit({kind:'unmute'}));this.haveRestartedOnFirstUnmute=!0};u.prototype.play=function(){var b=this;if(this.isEnded)this.logger.debug('play: already ended');else{this.logger.debug('play');var c=this.video.play();c&&c.then(function(){}).catch(function(c){b.logger.error('play: '+c);b.context.messageBus.event.emit({kind:'tracker',event:'video-error',
details:{errorCode:t.f}});b.context.messageBus.event.emit({kind:'close',interactive:!1})})}};u.prototype.pause=function(){this.logger.debug('pause');this.video.pause()};u.prototype.seek=function(b){var c=this.video,a=this.context.Environment;if(0<=b&&b<=c.duration)this.logger.debug('seek',{timeOffset:Object(r.a)(a,b)}),c.currentTime=b;else if(b>=-c.duration){var d=c.duration+b;this.logger.debug('seek',{timeOffset:Object(r.a)(a,b),targetTime:Object(r.a)(a,d)});c.currentTime=d}else this.logger.debug('seek: bad timeOffset',
{timeOffset:Object(r.a)(a,b)})};u.prototype.dispose=function(){this.logger.debug('dispose');var b=this.video,c=this.videoSource;b.removeEventListener('loadedmetadata',this.onLoadedMetadata,!1);b.removeEventListener('loadeddata',this.onLoadedData,!1);b.removeEventListener('error',this.onError,!1);b.removeEventListener('canplay',this.onCanPlay,!1);b.removeEventListener('play',this.onPlay,!1);b.removeEventListener('playing',this.onPlaying,!1);b.removeEventListener('pause',this.onPause,!1);b.removeEventListener('resume',
this.onResume,!1);b.removeEventListener('timeupdate',this.onTimeUpdate,!1);b.removeEventListener('ended',this.onEnded,!1);b.removeEventListener('waiting',this.onWaiting,!1);c.removeEventListener('error',this.onSourceError,!1);b.pause()};u.prototype.reportStats=function(){var c=this.video;this.context.messageBus.event.emit({kind:'tracker',event:'video-on-play-stats',details:{stats:Object(b.b)(c)+'x'+c.videoWidth+'x'+c.videoHeight+'@'+Object(r.a)(this.context.Environment,c.duration)}})};u.prototype.addSubtitles=
function(b){var c=this.context.Environment,a=m(c,'track'),d=new Blob([b],{type:'text/vtt'});b=this.adConfig.video.subtitles;a.kind='captions';a.src=URL.createObjectURL(d);this.video.appendChild(a);a.mode='showing';this.video.textTracks[0].mode='showing';a=/Firefox/.test(navigator.userAgent)?'':'font-size: '+b.fontSize+';';q(c,'\n#'+this.uniqueId+'::-webkit-media-text-track-display { width: 64% !important; margin-left: 18% !important; }\n#'+this.uniqueId+'::cue { color: '+b.textColor+' !important; background-color: '+
b.bgColor+' !important; '+a+' }\n#'+this.uniqueId+'::-webkit-media-text-track-display-backdrop { background-color: transparent !important; }\n')};$jscomp.global.Object.defineProperties(u.prototype,{currentProgress:{configurable:!0,enumerable:!0,get:function(){if(0===this.video.readyState)return{currentTime:0,percentage:0};var b=this.video;return{currentTime:this.video.currentTime,percentage:b.currentTime/b.duration}}}});var y=l.a,x=function(b,a,d,k,g,m,t,f,u){var e=y.call(this)||this;e.loadPromiseResolver=
0;e.loadPromiseReject=0;e.adHasBeenLoaded=!1;e.adRemainingDurationTimeoutPollId=0;e.lastCurrentTime=0;e.lastVolume=0;e.haveStarted=!1;e.disposed=!1;e.isEnded=!1;e.adStopInvoked=!1;e.videoCompleted=!1;e.onVPAIDLoaded=function(){e.logger.debug('onVPAIDLoaded');var b=e.vpaidIframe.contentWindow;if(b&&b.getVPAIDAd){var c=b.getVPAIDAd();if(e.checkVPAIDInterface(c)){e.ad=c;e.logger.debug('subscribing VPAID event handlers');Object.keys(e.callbacks).forEach(function(b){c.subscribe(e.callbacks[b],b)});b=c.handshakeVersion('2.0');
e.logger.debug('handshakeVersion',{result:b});b={AdParameters:e.adParameters};var a={slot:e.slot,videoSlot:e.videoSlot,videoSlotCanAutoPlay:!1};e.logger.debug('initAd',{width:e.width,height:e.height,viewMode:'normal',desiredBitrate:500,creativeData:JSON.stringify(b,null,2)});e.timeoutCallTimerId=window.setTimeout(e.timeoutCall.bind(e,'initAd'),e.adConfig.video.VPAIDCallTimeout);c.initAd(e.width,e.height,'normal',500,b,a)}}};e.onVPAIDLoadError=function(){e.loadPromiseReject(Error('unable to load vpaid: '+
e.vpaidUrl))};e.onAdStarted=function(){e.timeoutCallTimerId&&(window.clearTimeout(e.timeoutCallTimerId),delete e.timeoutCallTimerId);if(!e.disposed){e.haveStarted=!0;var b=e.ad.getAdWidth(),c=e.ad.getAdHeight();e.tryToUseVideoDimensionsFromTheVideoInsideSlot();e.logger.debug('onStartAd',{width:b,height:c});e.dumpDebugInfo();var a=function(){e.adRemainingDurationTimeoutPollId=window.setTimeout(a,250);e.onTimeUpdate()};a();e.emit({kind:'AdStarted'})}};e.onAdStopped=function(){if(!e.adStopInvoked)e.onAdVideoComplete();
e.disposed||(e.logger.debug('onStopAd'),window.clearTimeout(e.adRemainingDurationTimeoutPollId))};e.onAdSkipped=function(){e.disposed||(e.logger.debug('onSkipAd'),e.emit({kind:'AdSkipped'}))};e.onAdLoaded=function(){e.timeoutCallTimerId&&(window.clearTimeout(e.timeoutCallTimerId),delete e.timeoutCallTimerId);e.disposed||(e.logger.debug('onAdLoaded'),e.context.messageBus.event.emit({kind:'tracker',event:'vpaid-init'}),e.adHasBeenLoaded=!0,e.lastVolume=e.ad.getAdVolume(),e.dumpDebugInfo(),e.loadPromiseResolver())};
e.onAdLinearChange=function(){e.disposed||e.logger.debug('onAdLinearChange')};e.onAdSizeChange=function(){if(!e.disposed){var b=e.ad.getAdWidth(),c=e.ad.getAdHeight();e.logger.debug('onAdSizeChange',{width:b,height:c})}};e.onAdExpandedChange=function(){e.disposed||e.logger.debug('onAdExpandedChange')};e.onAdSkippableStateChange=function(){e.disposed||e.logger.debug('onAdSkippableStateChange')};e.onAdDurationChange=function(){if(!e.disposed){var b=e.ad.getAdDuration();e.logger.debug('onAdDurationChange',
{duration:Object(r.a)(e.context.Environment,b)})}};e.onAdRemainingTimeChange=function(){e.disposed||e.logger.debug('onAdRemainingTimeChange')};e.onAdVolumeChange=function(){if(!e.disposed){var b=e.ad.getAdVolume(),a=e.lastVolume,d=e.context.Environment;e.logger.debug('onAdVolumeChange',{last:Object(c.a)(d,a),current:Object(c.a)(d,b)});0===b&&0<a?e.emit({kind:'AdVolumeChange',muted:!0}):e.emit({kind:'AdVolumeChange',muted:!1});e.lastVolume=b}};e.onAdImpression=function(){e.disposed||(e.logger.debug('onAdImpression'),
e.emit({kind:'AdImpression'}))};e.onAdClickThru=function(b,c,a){e.disposed||(e.logger.debug('onAdClickThru',{url:b,id:c,playerHandles:a}),c={kind:'AdClickThru',playerHandles:a},b&&(c.url=b),e.emit(c))};e.onAdInteraction=function(){e.disposed||e.logger.debug('onAdInteraction')};e.onAdVideoStart=function(){if(!e.disposed){e.logger.log('onAdVideoStart');var b=e.ad.getAdWidth(),c=e.ad.getAdHeight();e.tryToUseVideoDimensionsFromTheVideoInsideSlot();e.callbackWithMediaFileDimensions(b,c);e.dumpDebugInfo();
e.emit({kind:'AdVideoStart'})}};e.onAdVideoFirstQuartile=function(){e.disposed||(e.logger.debug('onAdVideoFirstQuartile'),e.emit({kind:'AdVideoFirstQuartile'}))};e.onAdVideoMidpoint=function(){e.disposed||(e.logger.debug('onAdVideoMidpoint'),e.emit({kind:'AdVideoMidpoint'}))};e.onAdVideoThirdQuartile=function(){e.disposed||(e.logger.debug('onAdVideoThirdQuartile'),e.emit({kind:'AdVideoThirdQuartile'}))};e.onAdVideoComplete=function(){e.isEnded=!0;e.videoCompleted||(e.videoCompleted=!0,e.disposed||
(e.logger.debug('onAdVideoComplete'),e.emit({kind:'AdVideoComplete'})))};e.onAdUserAcceptInvitation=function(){e.disposed||e.logger.debug('onAdUserAcceptInvitation')};e.onAdUserMinimize=function(){e.disposed||e.logger.debug('onAdUserMinimize')};e.onAdUserClose=function(){e.disposed||e.logger.debug('onAdUserClose')};e.onAdPaused=function(){e.disposed||(e.logger.debug('onAdPaused'),window.clearTimeout(e.adRemainingDurationTimeoutPollId),e.emit({kind:'AdPaused'}))};e.onAdPlaying=function(){e.disposed||
(e.logger.debug('onAdPlaying'),e.emit({kind:'AdPlaying'}))};e.onAdError=function(b){e.disposed||(e.logger.debug('onAdError'),e.emit({kind:'AdError',message:b}))};e.onAdLog=function(){e.disposed||e.logger.debug('onAdLog')};e.onTimeUpdate=function(){var b=e.currentTime;b!==e.lastCurrentTime&&e.emit({kind:'progressTime',currentTime:b,duration:e.ad.getAdDuration()});e.lastCurrentTime=b};e.adConfig=a;e.context=b;e.logger=b.newLogger('VPAIDProcessor');e.logger.debug('constructor');e.adParameters=k;e.vpaidUrl=
d;e.slot=g;e.videoSlot=m;e.width=t;e.height=f;e.videoPlayerVPAID=u;e.loadPromise=new Promise(function(b,c){e.loadPromiseResolver=b;e.loadPromiseReject=c});return e};$jscomp.inherits(x,y);x.prototype.load=function(){this.logger.debug('load');var b=document.createElement('iframe');n(b);this.vpaidIframe=b;this.context.rootContainer.append(b);var c=b.contentWindow;c.inDapIF=!0;var e=c.document.createElement('script');e.src=this.vpaidUrl;e.addEventListener('load',this.onVPAIDLoaded);e.addEventListener('error',
this.onVPAIDLoadError);setTimeout(function(){c.document.body.appendChild(e)},0);return this.loadPromise};x.prototype.setDimensions=function(b){var c=b.width;b=b.height;this.disposed||this.isEnded||(this.logger.debug('vpaid.resizeAd()',{width:c,height:b,viewMode:'normal'}),this.ad.resizeAd(c,b,'normal'))};x.prototype.play=function(){this.isReady?(this.logger.debug('play'),this.haveStarted?(this.logger.debug('vpaid.resumeAd()'),this.ad.resumeAd()):(this.timeoutCallTimerId&&window.clearTimeout(this.timeoutCallTimerId),
this.timeoutCallTimerId=window.setTimeout(this.timeoutCall.bind(this,'startAd'),this.adConfig.video.VPAIDCallTimeout),this.logger.debug('vpaid.startAd()'),this.ad.startAd())):this.logger.warn("play: vpaid creative isn't ready")};x.prototype.pause=function(){this.isReady?(this.logger.debug('pause'),this.logger.debug('vpaid.pauseAd()'),this.ad.pauseAd()):this.logger.warn("pause: vpaid creative isn't ready")};x.prototype.mute=function(){this.isReady?(this.logger.debug('mute'),this.logger.debug('vpaid.setAdVolume()',
{volume:0}),this.ad.setAdVolume(0)):this.logger.warn("mute: vpaid creative isn't ready")};x.prototype.unmute=function(){this.isReady?(this.logger.debug('unmute'),this.logger.debug('vpaid.setAdVolume()',{volume:1}),this.ad.setAdVolume(1)):this.logger.warn("unmute: vpaid creative isn't ready")};x.prototype.checkVPAIDInterface=function(b){this.logger.debug('checking VPAID interface');return'handshakeVersion initAd startAd stopAd skipAd resizeAd pauseAd resumeAd expandAd collapseAd subscribe unsubscribe'.split(' ').every(function(c){return'function'===
typeof b[c]})};x.prototype.dumpDebugInfo=function(){var b=this.ad;this.logger.debug('VPAID properties',{adLinear:b.getAdLinear(),adWidth:b.getAdWidth(),adHeight:b.getAdHeight(),adExpanded:b.getAdExpanded(),adSkippableState:b.getAdSkippableState(),adRemainingTime:b.getAdRemainingTime(),adDuration:b.getAdDuration(),adVolume:b.getAdVolume(),adCompanions:b.getAdCompanions(),adIcons:b.getAdIcons()})};x.prototype.dispose=function(){var b=this;this.logger.debug('dispose');this.disposed=!0;this.ad&&(Object.keys(this.callbacks).forEach(function(c){b.ad.unsubscribe(b.callbacks[c],
c)}),this.timeoutCallTimerId=window.setTimeout(this.timeoutCall.bind(this,'stopAd'),this.adConfig.video.VPAIDCallTimeout),this.logger.debug('vpaid.stopAd()'),this.adStopInvoked=!0,this.ad.stopAd())};x.prototype.timeoutCall=function(b){this.disposed||(this.logger.error('VPAID Call Timeout',{callName:b}),this.context.messageBus.event.emit({kind:'tracker',event:'video-error',details:{errorCode:t.j}}),this.context.messageBus.event.emit({kind:'close',interactive:!1}))};x.prototype.tryToUseVideoDimensionsFromTheVideoInsideSlot=
function(){var b=this;if(this.videoSlot.videoWidth&&this.videoSlot.videoHeight&&this.videoSlot.duration)this.dimensionsCallback(this.videoSlot.videoWidth,this.videoSlot.videoHeight,this.videoSlot.duration,'video-slot'),this.checkAudio(this.videoSlot),this.reportStats(this.videoSlot);else{var c=Array.apply(null,this.slot.querySelectorAll('video')).filter(function(c){return c!==b.videoSlot});if(1===c.length){var e=c[0],a=e.videoWidth;e=e.videoHeight;if(a&&e){var d=this.ad.getAdDuration();this.dimensionsCallback(a,
e,d,'video-slot');this.checkAudio(c[0]);this.reportStats(c[0])}}}};x.prototype.callbackWithMediaFileDimensions=function(b,c){var e=this.ad.getAdDuration();this.dimensionsCallback(b,c,e,'vast-mediafile')};x.prototype.dimensionsCallback=function(b,c,e,a){this.videoPlayerVPAID.emit({kind:'actualVideoSizes',width:b,height:c,duration:e,source:a})};x.prototype.reportStats=function(c){this.context.messageBus.event.emit({kind:'tracker',event:'video-on-play-stats',details:{stats:Object(b.b)(c)+'x'+c.videoWidth+
'x'+c.videoHeight+'x'+Object(r.a)(this.context.Environment,c.duration)}})};x.prototype.checkAudio=function(b){this.videoPlayerVPAID.emit({kind:'audioAvailability',hasAudio:v(b)})};$jscomp.global.Object.defineProperties(x.prototype,{callbacks:{configurable:!0,enumerable:!0,get:function(){return{AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdSkipped:this.onAdSkipped,AdLoaded:this.onAdLoaded,AdLinearChange:this.onAdLinearChange,AdSizeChange:this.onAdSizeChange,AdExpandedChange:this.onAdExpandedChange,
AdSkippableStateChange:this.onAdSkippableStateChange,AdDurationChange:this.onAdDurationChange,AdRemainingTimeChange:this.onAdRemainingTimeChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:this.onAdInteraction,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,
AdUserMinimize:this.onAdUserMinimize,AdUserClose:this.onAdUserClose,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog}}},isReady:{configurable:!0,enumerable:!0,get:function(){return!!this.ad&&this.adHasBeenLoaded}},currentTime:{configurable:!0,enumerable:!0,get:function(){if(!this.isReady)return 0;var b=this.ad.getAdRemainingTime();return this.ad.getAdDuration()-b}}});var A=a(0),E=l.a,w=function(c,a){var e=E.call(this)||this;e.vpaidLoadPromiseResolved=!1;
e.previousVideoProgress=0;e.isEnded=!1;e.muted=!0;e.wasClicked=!1;e.onVpaidProcessorEvent=function(b){switch(b.kind){case 'AdSkipped':e.emit({kind:'skip'});break;case 'AdStarted':e.emit({kind:'creativeView'});break;case 'AdImpression':e.emit({kind:'impression'});break;case 'AdVideoStart':e.emit({kind:'start'});break;case 'AdVideoFirstQuartile':e.emit({kind:'firstQuartile'});break;case 'AdVideoMidpoint':e.emit({kind:'midpoint'});break;case 'AdVideoThirdQuartile':e.emit({kind:'thirdQuartile'});break;
case 'AdVideoComplete':e.isEnded=!0;e.emit({kind:'complete'});break;case 'AdPaused':e.emit({kind:'pause'});break;case 'AdPlaying':e.emit({kind:'resume'});break;case 'AdError':throw e.context.messageBus.event.emit({kind:'tracker',event:'video-error',details:{errorCode:t.j,message:b.message}}),e.context.messageBus.event.emit({kind:'close',interactive:!1}),new t.k(t.j);case 'AdVolumeChange':e.emit({kind:b.muted?'mute':'unmute'});break;case 'AdClickThru':e.wasClicked?(e.logger.log('SKIP repeated CLICK on VPAID video creative'),
e.wrapper.setAttribute(A.a.CLICK_SUCCESS,'click-repeated'),e.context.messageBus.event.emit({kind:'tracker',event:'click-repeated',details:{source:'video-vpaid'}})):(e.logger.log('Handle CLICK on VPAID video creative'),e.wasClicked=!0,e.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'video-vpaid'}}),!0===b.playerHandles&&b.url?(Object(k.a)(e.context,b.url),e.wrapper.setAttribute(A.a.CLICK_STATUS,A.b.FINISHED),e.wrapper.setAttribute(A.a.CLICK_SUCCESS,'click')):(e.wrapper.setAttribute(A.a.CLICK_STATUS,
A.b.FINISHED),e.wrapper.setAttribute(A.a.CLICK_SUCCESS,'click-handled-by-ad')));break;case 'progressTime':e.processTimeEvent(b.currentTime,b.duration)}};e.onVideoSlotLoadedMetadata=function(){var b=e.video;e.emit({kind:'actualVideoSizes',duration:b.duration,width:b.videoWidth,height:b.videoHeight,source:'video-slot'});e.emit({kind:'audioAvailability',hasAudio:v(e.video)})};e.options=Object.assign({},b.a,a);a=c.context;var d=c.adConfig,g=c.vpaidExecutableUrl,r=c.adParameters,m=c.width;c=c.height;e.context=
a;e.width=m;e.height=c;e.logger=a.newLogger('VideoPlayerVPAID');c=document.createElement('div');e.wrapper=c;c.style.cursor='pointer';c.style.position='relative';m=document.createElement('video');c.setAttribute(A.a.CLICK,A.b.ENABLED);c.setAttribute(A.a.CLICK_STATUS,A.b.WAITING);c.setAttribute(A.a.CLICK_GOAL,'click');e.video=m;m.muted=!0;m.preload='auto';m.style.pointerEvents='none';m.addEventListener('loadedmetadata',e.onVideoSlotLoadedMetadata,!1);'playsInline'in m&&(m.playsInline=!0);c.append(m);
a=new x(a,d,g,r,c,m,e.width,e.height,e);e.vpaidProcessor=a;a.on(e.onVpaidProcessorEvent);return e};$jscomp.inherits(w,E);w.prototype.load=function(){var b=this;this.logger.debug('load');this.vpaidLoadPromise=this.vpaidProcessor.load();this.vpaidLoadPromise.then(function(){b.vpaidLoadPromiseResolved=!0});return this.vpaidLoadPromise};w.prototype.processTimeEvent=function(b,a){var e=this;if(!(b>a||0>=b||0>=a)){var d=this.options,k=d.breakpointTrackingTime,g=this.previousVideoProgress,m=g/a,t=b/a,f=
this.context.Environment;d.breakpointTrackingPercentage.forEach(function(b){var a=b/100;m<=a&&a<t&&(e.logger.debug('progressPercentage',{previousPercentage:Object(c.a)(f,m),percentage:Object(c.a)(f,a),currentPercentage:Object(c.a)(f,t)}),e.emit({kind:'progressPercentage',percentage:b}))});k.forEach(function(c){g<=c&&c<b&&(e.logger.debug('progressTime',{previousTime:Object(r.a)(f,g),time:Object(r.a)(f,c),currentTime:Object(r.a)(f,b)}),e.emit({kind:'progressTime',time:c}))});this.previousVideoProgress=
b}};w.prototype.setDimensions=function(b){var c=this,e=b.width,a=b.height;b=b.scaleFactor;this.width=e;this.height=a;var d=this.wrapper.style;d.width=e+'px';d.height=a+'px';d.transform='scale('+b+')';d.transformOrigin='top left';this.vpaidLoadPromiseResolved?this.vpaidProcessor.setDimensions({width:e,height:a}):this.vpaidLoadPromise&&this.vpaidLoadPromise.then(function(){c.vpaidProcessor.setDimensions({width:e,height:a})})};w.prototype.appendTo=function(b){b.append(this.wrapper)};w.prototype.mute=
function(){this.muted=!0;this.logger.debug('mute');this.vpaidProcessor.mute();this.video.muted=!0};w.prototype.unmute=function(){this.muted=!1;this.logger.debug('unmute');this.vpaidProcessor.unmute();this.video.muted=!1};w.prototype.play=function(){this.isEnded?this.logger.debug('play: video is ended'):(this.logger.debug('play'),this.vpaidProcessor.play())};w.prototype.pause=function(){this.logger.debug('pause');this.vpaidProcessor.pause()};w.prototype.dispose=function(){this.logger.debug('dispose');
this.vpaidProcessor.off(this.onVpaidProcessorEvent);this.vpaidProcessor.dispose();this.video.removeEventListener('loadedmetadata',this.onVideoSlotLoadedMetadata,!1)}},function(l,f,a){function n(a,d){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||'object'!==typeof d&&'function'!==typeof d?a:d}function d(a,d){if('function'!==typeof d&&null!==d)throw new TypeError('Super expression must either be null or a function, not '+typeof d);a.prototype=Object.create(d&&
d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}a.d(f,'a',function(){return 100});a.d(f,'b',function(){return 300});a.d(f,'c',function(){return 301});a.d(f,'d',function(){return 302});a.d(f,'e',function(){return 303});a.d(f,'f',function(){return 400});a.d(f,'g',function(){return 401});a.d(f,'h',function(){return 405});a.d(f,'i',function(){return 900});a.d(f,'j',function(){return 901});a.d(f,'k',function(){return v});
var q=function(a){function m(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'';if(!(this instanceof m))throw new TypeError('Cannot call a class as a function');var d=n(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,a));Object.defineProperty(d,'message',{configurable:!0,enumerable:!1,value:a,writable:!0});Object.defineProperty(d,'name',{configurable:!0,enumerable:!1,value:d.constructor.name,writable:!0});if(Error.hasOwnProperty('captureStackTrace'))return Error.captureStackTrace(d,
d.constructor),n(d);Object.defineProperty(d,'stack',{configurable:!0,enumerable:!1,value:Error(a).stack,writable:!0});return d}d(m,a);return m}(function(a){function d(){a.apply(this,arguments)}d.prototype=Object.create(a.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a;return d}(Error)),v=function(a,d){var g=q.call(this,'VAST error '+a)||this;g.$type='VASTError';g.code=a;d&&(g.cause=d);return g};$jscomp.inherits(v,
q)},function(l,f,a){function n(b,c,e,a){var k='undefined'!==typeof MRAID_ENV;b=b.mraid.mode;try{var g=Object(A.b)(c);g&&g.mraid&&g.mraid.mode&&(b=g.mraid.mode)}catch(N){}try{var r=Object(A.b)(e);r&&r.mraid&&r.mraid.mode&&(b=r.mraid.mode)}catch(N){}c='object'===typeof mraid&&null!==mraid;'disabled'!==b&&('check-for-mraid3'!==b||k)||c?(E=a,(a=document.documentElement.querySelector('script[src="mraid.js"]'))?'undefined'!==typeof mraid?q():(a.addEventListener('load',q),a.addEventListener('error',d)):
(a=document.createElement('script'),a.src='mraid.js',a.addEventListener('load',q),a.addEventListener('error',d),document.head.append(a))):a(void 0)}function d(){E(void 0)}function q(){'undefined'===typeof mraid?d():'loading'===mraid.getState()?mraid.addEventListener('ready',function(){w=mraid.getPlacementType();v()}):(w=mraid.getPlacementType(),v())}function v(){z=mraid.getVersion();E({version:z,placement:mraid.getPlacementType(),screenSize:p()})}function m(){if(mraid.getCurrentPosition){var b=mraid.getCurrentPosition(),
c=b.width;b=b.height;if(0<c&&0<b)return{width:c,height:b}}else if(mraid.getSize&&(b=mraid.getSize(),c=b.width,b=b.height,0<c&&0<b))return{width:c,height:b}}function p(){if(mraid.getScreenSize)return mraid.getScreenSize()}function g(){mraid.unload&&mraid.unload()}function k(b){mraid.open(b)}function b(){return mraid.isViewable()}function c(b){0===G.length&&mraid.addEventListener('viewableChange',t);G.push(b)}function r(b){G=G.filter(function(c){return c!==b});0===G.length&&mraid.removeEventListener('viewableChange',
t)}function t(b){G.forEach(function(c){'interstitial'===w?c(b):c(!0)})}function C(b){0===e.length&&mraid.addEventListener('exposureChange',y);e.push(b)}function u(b){e=e.filter(function(c){return c!==b});0===e.length&&mraid.removeEventListener('exposureChange',y)}function y(b){e.forEach(function(c){c(b)})}function x(){try{if(mraid.getExposureChangeAvailability&&mraid.getExposureChangeAvailability())return!0;if('Google Mobile Ads'===MRAID_ENV.sdk)return!1;if(3<=Number(MRAID_ENV.version))return!0}catch(P){}return!1}
a.d(f,'a',function(){return n});a.d(f,'e',function(){return m});a.d(f,'d',function(){return p});a.d(f,'j',function(){return g});a.d(f,'g',function(){return k});a.d(f,'f',function(){return b});a.d(f,'c',function(){return c});a.d(f,'i',function(){return r});a.d(f,'b',function(){return C});a.d(f,'h',function(){return u});a.d(f,'k',function(){return x});var A=a(10),E,w,z,G=[],e=[]},function(l,f,a){function n(a,f){return'number'!==typeof f?(a.isLogMode&&console.error('NaN'),'NaN'):f.toFixed(2)+'s'}a.d(f,
'a',function(){return n})},function(l,f,a){a.d(f,'a',function(){return n});var n=function(){var a=this;this.listeners=[];this.listenersOncer=[];this.listenerOncerUnused=[];this.on=function(d){a.listeners.push(d);return{dispose:function(){a.off(d)}}};this.onEvent=function(d,f){return a.on(function(a){a.kind===d&&f(a)})};this.once=function(d){a.listenersOncer.push(d)};this.onceEvent=function(d,f){var m=function(l){l.kind===d?f(l):a.listenerOncerUnused.push(m)};a.once(m)};this.off=function(d){d=a.listeners.indexOf(d);
-1<d&&a.listeners.splice(d,1)};this.emit=function(d){a.listeners.forEach(function(a){a(d)});a.listenersOncer.forEach(function(a){a(d)});a.listenersOncer=a.listenerOncerUnused;a.listenerOncerUnused=[]};this.pipe=function(d){return a.on(function(a){return d.emit(a)})}}},function(l,f,a){function n(a,f){return'number'!==typeof f?(a.isLogMode&&console.error('NaN'),'NaN'):(100*f).toFixed(2)+'%'}a.d(f,'a',function(){return n})},function(l,f,a){function n(a){switch(a.readyState){case 0:return'HAVE_NOTHING';
case 1:return'HAVE_METADATA';case 2:return'HAVE_CURRENT_DATA';case 3:return'HAVE_FUTURE_DATA';case 4:return'HAVE_ENOUGH_DATA';default:return'UNKNOWN_STATE_'+a.readyState}}function d(a,d,b){switch(d.kind){case 'creativeView':a.messageBus.event.emit({kind:'tracker',event:'video-creativeview'});break;case 'start':a.messageBus.event.emit({kind:'tracker',event:'video-start'});break;case 'complete':a.messageBus.event.emit({kind:'tracker',event:'video-complete'});break;case 'firstQuartile':a.messageBus.event.emit({kind:'tracker',
event:'video-firstquartile'});break;case 'midpoint':a.messageBus.event.emit({kind:'tracker',event:'video-midpoint'});break;case 'thirdQuartile':a.messageBus.event.emit({kind:'tracker',event:'video-thirdquartile'});break;case 'mute':a.messageBus.event.emit({kind:'tracker',event:'video-mute'});break;case 'unmute':a.messageBus.event.emit({kind:'tracker',event:'video-unmute'});break;case 'skip':b();break;case 'progressPercentage':a.messageBus.event.emit({kind:'tracker',event:'video-progress',meta:{type:'relative',
offset:d.percentage},details:{progress:Object(q.a)(a.Environment,d.percentage/100)}});break;case 'progressTime':a.messageBus.event.emit({kind:'tracker',event:'video-progress',meta:{type:'absolute',offset:d.time},details:{progress:Object(v.a)(a.Environment,d.time)}});break;case 'impression':a.messageBus.event.emit({kind:'vpaid-impression'})}}a.d(f,'a',function(){return m});a.d(f,'b',function(){return n});a.d(f,'c',function(){return d});l=a(5);var q=a(6),v=a(4),m={maintainAspectRatio:!0,breakpointTrackingTime:[],
breakpointTrackingPercentage:[]},p=l.a;$jscomp.inherits(function(){return p.apply(this,arguments)||this},p)},function(l,f,a){function n(a){return 0===a&&0<1/a}a.d(f,'a',function(){return n})},function(l,f,a){function n(a,f){var m=a.Environment;m.isMRAID?Object(q.g)(f):(m=d.e(m,'a'),m.target='_blank',m.href=f,d.f(m),a.rootContainer.append(m),m.click(),m.remove())}a.d(f,'a',function(){return n});var d=a(1),q=a(3)},function(l,f,a){function n(a,d){try{var g=JSON.parse(a)}catch(k){d&&d.warn('bad json',
{source:a})}return g}function d(a,d,g,k,b){b=void 0===b?!1:b;if(''!==k){var c=n(k,d);c&&(d.debug('mergeOptions',{custom:JSON.stringify(c,null,2)}),q(d,g,c),Object.keys(c).forEach(function(a){if('string'===typeof c[a]){var k=c[a];switch(a.toLowerCase()){case 'video-overlay-position':switch(k){case 'topleft':g.video.branding.position='top-left';break;case 'topright':g.video.branding.position='top-right';break;case 'bottomleft':g.video.branding.position='bottom-left';break;case 'bottomright':g.video.branding.position=
'bottom-right'}break;case 'video-overlay-url':g.video.branding.mode='static-image';g.video.branding.url=k;break;case 'video-overlay-width':g.video.branding.width=k;break;case 'video-overlay-height':g.video.branding.height=k;break;case 'post-ad-image':g.video.reminderBanner.mode='static-image';g.video.reminderBanner.url=k;break;case 'advertisement-message-text-top':g.advertisementMessage.contentAbove=k;break;case 'advertisement-message-text-bottom':g.advertisementMessage.contentBelow=k;break;case 'scale-to-fit-maximum-width':'scale'===
g.display.responsive.mode&&(g.display.responsive.maximumWidth=k);break;case 'scale-to-fit-maximum-height':'scale'===g.display.responsive.mode&&(g.display.responsive.maximumHeight=k);break;case 'background-image':g.creative.portrait.mode='static-image';g.creative.portrait.imageUrl=k;break;case 'background-width':g.creative.portrait.mode='static-image';g.creative.portrait.width=k;break;case 'background-height':g.creative.portrait.mode='static-image';g.creative.portrait.height=k;break;case 'video-top':'undefined'===
typeof g.video.background.video&&(g.video.background.video={});g.video.background.video.top=k;break;case 'video-left':'undefined'===typeof g.video.background.video&&(g.video.background.video={});g.video.background.video.left=k;break;case 'icon-close':g.closeButton.mode='enabled';g.closeButton.image={url:k,width:30,height:30};break;case 'button-close-show':case 'sticky-button-close-show':v(k)?(g.closeButton.mode='enabled',g.closeButton.image={url:'//creatives.yoc.com/cdn/icons/28x28/icon_grey_close_01.svg',
width:30,height:30}):g.closeButton.mode='disabled';break;case 'button-close-position':g.closeButton.mode='enabled';switch(k){case 'topleft':g.closeButton.position='top-left';break;case 'topright':g.closeButton.position='top-right'}break;case 'skip-in-seconds':g.video.skip.mode='enabled-override-vast';g.video.skip.skipSeconds=k;break;case 'skip-position':switch(k){case 'topleft':g.video.skip.button.position='top-left';break;case 'topright':g.video.skip.button.position='top-right'}break;case 'display-effect':'string'===
typeof k&&'sticky'===k.toLowerCase()?g.display.effect='sticky':'string'===typeof k&&'inline-to-sticky'===k.toLowerCase()?g.display.effect='inlineToSticky':'string'===typeof k&&'mini'===k.toLowerCase()?g.display.effect='understitialMini':'string'===typeof k&&'s'===k.toLowerCase()?g.display.effect='understitialSizeSmall':'string'===typeof k&&'m'===k.toLowerCase()?g.display.effect='understitialSizeMedium':'string'===typeof k&&'xl'===k.toLowerCase()?g.display.effect='understitialSizeLarge':g.display.effect=
'none';break;case 'auto-stopp':g.video.autoStop=v(k);break;case 'overwrite-mrc-settings':break;case 'user-viewability-area':g.tracking.viewabilityPercent=k;break;case 'user-viewability-time':g.tracking.viewabilityTime=parseInt((1E3*parseFloat(k)).toString(),10);break;case 'vcpm':g.tracking.vCPMEnabled=v(k);break;case 'count-impression-on':if(b)switch(k){case 'creativeview':g.tracking.countImpressionOn='video-creativeview';g.tracking.countVPAIDImpressionOn='video-creativeview';break;case 'start':g.tracking.countImpressionOn=
'video-start';g.tracking.countVPAIDImpressionOn='shown';break;case 'viewable_ad_impression':g.tracking.countImpressionOn='viewability';g.tracking.countVPAIDImpressionOn='viewability';break;case 'firstquartile':g.tracking.countImpressionOn='video-firstquartile';g.tracking.countVPAIDImpressionOn='video-firstquartile';break;case 'midpoint':g.tracking.countImpressionOn='video-midpoint';g.tracking.countVPAIDImpressionOn='video-midpoint';break;case 'thirdquartile':g.tracking.countImpressionOn='video-thirdquartile';
g.tracking.countVPAIDImpressionOn='video-thirdquartile';break;case 'complete':g.tracking.countImpressionOn='video-complete';g.tracking.countVPAIDImpressionOn='video-complete';break;case 'button-close':g.tracking.countImpressionOn='close';g.tracking.countVPAIDImpressionOn='close';break;case 'unmute':g.tracking.countImpressionOn='video-unmute';g.tracking.countVPAIDImpressionOn='video-unmute';break;case 'mute':g.tracking.countImpressionOn='video-mute';g.tracking.countVPAIDImpressionOn='video-mute';break;
default:g.tracking.countImpressionOn=k,g.tracking.countVPAIDImpressionOn=k}else d.warn("Skip custom option because it's not a video ad",{customOptionKey:a,customOptionValue:k});break;case 'count-creativeview-on':if(b)switch(k){case 'creativeview':g.tracking.countVideoCreativeviewOn='video-creativeview';g.tracking.countVPAIDVideoCreativeviewOn='video-creativeview';break;case 'start':g.tracking.countVideoCreativeviewOn='video-start';g.tracking.countVPAIDVideoCreativeviewOn='shown';break;case 'viewable_ad_impression':g.tracking.countVideoCreativeviewOn=
'viewability';g.tracking.countVPAIDVideoCreativeviewOn='viewability';break;case 'firstquartile':g.tracking.countVideoCreativeviewOn='video-firstquartile';g.tracking.countVPAIDVideoCreativeviewOn='video-firstquartile';break;case 'midpoint':g.tracking.countVideoCreativeviewOn='video-midpoint';g.tracking.countVPAIDVideoCreativeviewOn='video-midpoint';break;case 'thirdquartile':g.tracking.countVideoCreativeviewOn='video-thirdquartile';g.tracking.countVPAIDVideoCreativeviewOn='video-thirdquartile';break;
case 'complete':g.tracking.countVideoCreativeviewOn='video-complete';g.tracking.countVPAIDVideoCreativeviewOn='video-complete';break;case 'button-close':g.tracking.countVideoCreativeviewOn='close';g.tracking.countVPAIDVideoCreativeviewOn='close';break;case 'unmute':g.tracking.countVideoCreativeviewOn='video-unmute';g.tracking.countVPAIDVideoCreativeviewOn='video-unmute';break;case 'mute':g.tracking.countVideoCreativeviewOn='video-mute';g.tracking.countVPAIDVideoCreativeviewOn='video-mute';break;default:g.tracking.countVideoCreativeviewOn=
k,g.tracking.countVPAIDVideoCreativeviewOn=k}else d.warn("Skip custom option because it's not a video ad",{customOptionKey:a,customOptionValue:k});break;case 'vast-mediafile-priority-1':case 'vast-mediafile-priority-2':case 'vast-mediafile-priority-3':case 'vast-mediafile-priority-4':case 'vast-mediafile-priority-5':case 'vast-mediafile-priority-6':case 'vast-mediafile-priority-7':case 'vast-mediafile-priority-8':break;case 'enable-indapif':g.display.useFriendlyIframe=v(k);break;case 'use-creative-wrapper-ge':g.creativeWrapper.ge=
v(k);break;case 'use-gpt-passback-tag':case 'metrics-tracker-visx-enabled':break;default:d.warn('Unknown custom option',{customOptionKey:a,customOptionValue:k})}}else if('object'===typeof c[a]){var f=c[a];Object.keys(f).forEach(function(b){if('string'===typeof f[b]){var c=f[b];switch(a.toLowerCase()+'.'+b.toLowerCase()){case 'thirdparty.source':g.thirdParty.creativeSource.portrait=c,g.thirdParty.creativeSource.landscape=c}}})}}))}}function q(a,d,g,k){k=void 0===k?[]:k;Object.keys(g).forEach(function(b){var c=
d[b],f=g[b];var m=k.join('.')+'.'+b;if(void 0===c)'object'!==typeof f||null===f||Array.isArray(f)?(f=Number(f).toString()===f?Number(f):f,d[b]=f,a.debug('updated '+m,{before:c,value:f})):(c={},d[b]=c,q(a,c,f,[].concat($jscomp.arrayFromIterable(k),[b])));else if('number'===typeof c)if('number'===typeof f)d[b]=f,a.debug('updated '+m,{before:c,value:f});else{if('string'===typeof f){var l=Number(f);l===l?(d[b]=l,a.debug('updated '+m,{before:c,value:l})):a.warn('cannot merge '+m,{original:c,custom:f})}}else'boolean'===
typeof c?'boolean'===typeof f?(d[b]=f,a.debug('updated '+m,{before:c,value:f})):'string'===typeof f&&(f=v(f),d[b]=f,a.debug('updated '+m,{before:c,value:f})):'string'===typeof c&&'string'===typeof f?(d[b]=f,a.debug('updated '+m,{before:c,value:f})):'object'===typeof c&&null!==c&&'object'===typeof f&&null!==f?Array.isArray(c)&&Array.isArray(f)?(f=c.concat(f),a.debug('updated '+m,{before:JSON.stringify(c,null,2),value:JSON.stringify(f,null,2)}),d[b]=f):Array.isArray(c)||Array.isArray(f)?a.warn('cannot merge '+
m,{original:c,custom:f}):q(a,c,f,[].concat($jscomp.arrayFromIterable(k),[b])):a.warn('cannot merge '+m,{original:c,custom:f})})}function v(a){return!0===a||'string'===typeof a&&-1!==['1','true','yes'].indexOf(a.toLowerCase())?!0:!1}a.d(f,'b',function(){return n});a.d(f,'a',function(){return d})},function(l,f,a){function n(a){var d=!0;(a=a.context)&&'function'===typeof a.observeIntersection||(d=!1);return d}function d(a){return a.context&&a.context.location&&a.context.location.href||null}function q(a){return a.context&&
a.context.location&&a.context.location.host||null}a.d(f,'c',function(){return n});a.d(f,'b',function(){return d});a.d(f,'a',function(){return q})},function(l,f,a){a.d(f,'a',function(){return d});var n=a(1),d=function(a,d,f){a=a.Environment;d=d.closeButton;var m=n.e(a,'div');a=n.e(a,'img');a.width=d.image.width;a.height=d.image.height;a.src=d.image.url;a.style.pointerEvents='none';m.append(a);m.style.width=d.image.width+'px';m.style.height=d.image.height+'px';m.style.cursor='pointer';m.style.userSelect=
'none';m.addEventListener('click',f,!1);this.root=m};d.preload=function(a,d){var f=new Image;f.style.width='0';f.style.height='0';f.style.position='absolute';var l=function(){d.removeChild(f)};f.addEventListener('load',l,!1);f.addEventListener('error',l,!1);f.src=a.closeButton.image.url;d.append(f)};d.defaultPosition='top-right'},function(l,f,a){a.d(f,'a',function(){return g});var n=a(1),d=a(0),q=a(12),v=a(9),m=function(a,b,c,d,f,g,m,l){this.creativeIframe=this.adContainer=this.adCore=null;this.intervalStart=
this.intervalId=-1;this.thirdPartyClickContainer=this.thirdPartyAdContainer=this.thirdPartyHostContainer=null;this.foundDuringPreCheck=!1;this.demoContainer=null;this.isCheckModeStrict=this.isCheckModeEasy=!1;this.searchForNodeResult=null;this.wasClicked=this.isRunning=!1;this.context=a;this.logger=a.newLogger('ThirdPartyAd ('+g+')');this.initConfig=b;this.adConfig=c;this.adCore=d;this.adPainter=f;this.creativeOption=g;this.configCreative=m;this.creativeDetails=l;'undefined'!==typeof this.adConfig.thirdParty&&
'undefined'!==typeof this.adConfig.thirdParty.checkMode&&'easy'===this.adConfig.thirdParty.checkMode?this.isCheckModeEasy=!0:'undefined'!==typeof this.adConfig.thirdParty&&'undefined'!==typeof this.adConfig.thirdParty.checkMode&&'strict'===this.adConfig.thirdParty.checkMode&&(this.isCheckModeStrict=!0)};m.prototype.preCheck=function(){this.logger.log('Pre-check '+this.creativeOption+' creative',{configCreative:this.configCreative});if('string'===typeof this.configCreative.mode&&'disabled'===this.configCreative.mode)'undefined'===
typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]||'string'===typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]&&'auto'===this.adConfig.thirdParty.creativeSource[this.creativeOption]?(this.logger.log("Pre-check: Disable third party creative source, because it's disabled",{configCreative:this.configCreative}),this.adConfig.thirdParty.creativeSource[this.creativeOption]='disabled'):this.logger.log("Pre-check: Nothing to do - it's disabled",{configCreative:this.configCreative});
else if('string'===typeof this.configCreative.mode&&0<this.configCreative.mode.length&&'redirect'===this.configCreative.mode.substr(0,8)){try{var a='';if('redirect'===this.configCreative.mode||'redirect-load-rtb-hidden'===this.configCreative.mode)a=decodeURIComponent(this.configCreative.redirectCode);var b=decodeURIComponent(this.initConfig.rtbCreative);('undefined'===typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]||'string'===typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]&&
'auto'===this.adConfig.thirdParty.creativeSource[this.creativeOption])&&('string'===typeof a&&-1!==a.indexOf('.celtra.com')||'string'===typeof b&&-1!==b.indexOf('.celtra.com'))&&(-1!==this.initConfig.product.templateName.toLowerCase().indexOf('mystery scroller')&&(this.logger.log("Pre-check: Mystery Scroller identified - set third party source to 'celtra-banner-sticky'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='celtra-banner-sticky'),-1!==this.initConfig.product.templateName.toLowerCase().indexOf('understitial')&&
(this.logger.log("Pre-check: Understitial Ad identified - set third party source to 'celtra-interscroller'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='celtra-interscroller'),-1!==this.initConfig.product.templateName.toLowerCase().indexOf('mystery ad')&&(this.logger.log("Pre-check: Mystery Ad identified - set third party source to 'celtra-interstitial'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='celtra-interstitial'),-1!==this.initConfig.product.templateName.toLowerCase().indexOf('banner classic')&&
(this.logger.log("Pre-check: Banner Classic identified - set third party source to 'default'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='default'))}catch(c){this.logger.error(c)}!this.context.Environment.isVCPM||'undefined'!==typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]&&('string'!==typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]||0!==this.adConfig.thirdParty.creativeSource[this.creativeOption].length&&'auto'!==this.adConfig.thirdParty.creativeSource[this.creativeOption])||
(this.logger.log("Pre-check: vCPM is enabled and no third party source was provided, set third party source to 'default'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='default');if('portrait'===this.creativeOption||'landscape'===this.creativeOption)'celtra-interscroller'===this.adConfig.thirdParty.creativeSource[this.creativeOption]&&'scale'===this.adConfig.display.responsive.mode&&!1===this.adConfig.display.responsive.followLayout&&(this.logger.log("Pre-check: third party source for portrait/landscape is 'celtra-interscroller', reset scale mode and set followLayout to 'true'"),
this.adConfig.display.responsive.followLayout=!0,this.adConfig.display.responsive.mode='none'),'celtra-interstitial'===this.adConfig.thirdParty.creativeSource[this.creativeOption]&&'scale'===this.adConfig.display.responsive.mode&&!1===this.adConfig.display.responsive.followLayout&&(this.logger.log("Pre-check: third party source for portrait/landscape is 'celtra-interstitial', reset scale mode and set followLayout to 'true'"),this.adConfig.display.responsive.followLayout=!0,this.adConfig.display.responsive.mode=
'none'),'celtra-banner-sticky'===this.adConfig.thirdParty.creativeSource[this.creativeOption]&&'scale'===this.adConfig.display.responsive.mode&&!1===this.adConfig.display.responsive.followLayout&&(this.logger.log("Pre-check: third party source for portrait/landscape is 'celtra-banner-sticky', reset scale mode and set followLayout to 'true'"),this.adConfig.display.responsive.followLayout=!0,this.adConfig.display.responsive.mode='none');switch(this.adConfig.thirdParty.creativeSource[this.creativeOption]){case 'disabled':this.logger.log("Pre-check: Check environment - nothing to do - it's disabled");
break;case 'default':this.logger.log("Pre-check: Check environment - 'Default' (delivered inside the product container)");break;case 'celtra-banner':this.logger.log("Pre-check: Check environment - 'Celtra Banner'");break;case 'celtra-banner-sticky':this.logger.log("Pre-check: Check environment - 'Celtra Banner Sticky'");if('portrait'===this.creativeOption||'landscape'===this.creativeOption)this.logger.log("Pre-check: Check environment - 'Celtra Banner Sticky' - Force ad container hiding"),this.adConfig.display.hide=
!0;break;case 'celtra-interscroller':this.logger.log("Pre-check: Check environment - 'Celtra Interscroller'");break;case 'celtra-interstitial':this.logger.log("Pre-check: Check environment - 'Celtra Interstitial'");if('portrait'===this.creativeOption||'landscape'===this.creativeOption)this.logger.log("Pre-check: Check environment - 'Celtra Interstitial' - Force ad container hiding"),this.adConfig.display.hide=!0;break;default:this.logger.warn("Pre-check: Check environment - invalid third party source: '"+
this.adConfig.thirdParty.creativeSource[this.creativeOption]+"'"),this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-source'})}}else this.logger.log('Pre-check: Invalid creative mode used for third party ad in '+this.creativeOption+' creative',{configCreative:this.configCreative});this.foundDuringPreCheck&&this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-precheck'})};m.prototype.init=function(){var a=this.context.Environment;
this.logger.log('Initialize '+this.creativeOption+' creative',{configCreative:this.configCreative});if('string'===typeof this.configCreative.mode&&0<this.configCreative.mode.length&&'redirect'===this.configCreative.mode.substr(0,8))switch(this.adConfig.thirdParty.creativeSource[this.creativeOption]){case 'disabled':this.logger.log("Prepare environment - nothing to do - it's disabled");break;case 'default':this.logger.log("Prepare environment - 'Default' (delivered inside the product container)");
break;case 'celtra-banner':this.logger.log("Prepare environment - 'Celtra Banner'");break;case 'celtra-banner-sticky':this.logger.log("Prepare environment - 'Celtra Banner Sticky'");this.startCheckCeltraOverlay(!0);break;case 'celtra-interscroller':this.logger.log("Prepare environment - 'Celtra Interscroller'");break;case 'celtra-interstitial':this.logger.log("Prepare environment - 'Celtra Interstitial'");this.startCheckCeltraOverlay(!0);break;default:this.logger.warn("Prepare environment - invalid third party source: '"+
this.adConfig.thirdParty.creativeSource[this.creativeOption]+"'")}else this.logger.log('Invalid creative mode used for third party ad in '+this.creativeOption+' creative',{configCreative:this.configCreative});a.isDemoMode&&(this.demoContainer=a.hostDocument.createElement('div'),this.demoContainer.id='yoc_demo_container_'+this.creativeOption+'_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId,this.demoContainer.style.cssText='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 2147483647; background-color: rgba(127, 0, 0, 0.3);')};
m.prototype.run=function(a){if(!this.isRunning)switch(this.isRunning=!0,this.creativeIframe=a,this.adConfig.thirdParty.creativeSource[this.creativeOption]){case 'celtra-banner-sticky':this.startCheck(this.startCheckCeltraOverlay.bind(this));break;case 'celtra-interstitial':this.startCheck(this.startCheckCeltraOverlay.bind(this));break;case 'celtra-interscroller':this.startCheck(this.startCheckCeltraInline.bind(this));break;default:this.thirdPartyClickContainer=this.thirdPartyAdContainer=this.thirdPartyHostContainer=
this.adPainter.productContainer,this.enableTracking(this.thirdPartyHostContainer,this.thirdPartyAdContainer,this.thirdPartyClickContainer)}};m.prototype.startCheckCeltraOverlay=function(a){var b=this;a=void 0===a?!1:a;this.logger.log((a?'PRE-Check ':'')+(this.isCheckModeStrict?'STRICT ':'')+'Try to find third party ad OVERLAY container ('+this.adConfig.thirdParty.creativeSource[this.creativeOption]+')');this.context.Environment.hostDocument.querySelectorAll('div > iframe:first-child[allowfullscreen]').forEach(function(c){b.logger.log('Found element - start checking ('+
b.adConfig.thirdParty.creativeSource[b.creativeOption]+')',{parentElementStyle:c.parentElement&&c.parentElement.style?c.parentElement.style:'unknown'});if(c.parentElement&&c.parentElement.style&&'string'===typeof c.parentElement.style.position&&('fixed'===c.parentElement.style.position||'absolute'===c.parentElement.style.position)&&'undefined'!==typeof c.parentElement.style.zIndex&&2E9<parseInt(c.parentElement.style.zIndex,10))if(a)b.foundDuringPreCheck=!0,b.logger.warn('PRE-Check - Found third party ad container ('+
b.adConfig.thirdParty.creativeSource[b.creativeOption]+')',c.parentElement);else if(b.thirdPartyAdContainer)b.logger.error('Third party ad container was found already',b.thirdPartyAdContainer);else{var d=null;'iframe'===c.nodeName.toLocaleLowerCase()&&c.contentDocument&&(d=c.contentDocument.getElementById('viewport'));try{b.logger.log('Checking Celtra viewport ('+b.adConfig.thirdParty.creativeSource[b.creativeOption]+')',{celtraViewportStyle:d?d.getAttribute('style'):'unknown'}),b.logger.log('Checking Celtra payloads ('+
b.adConfig.thirdParty.creativeSource[b.creativeOption]+')',{celtraPayloads:b.creativeIframe.contentWindow&&'undefined'!==typeof b.creativeIframe.contentWindow.celtra&&'object'===typeof b.creativeIframe.contentWindow.celtra.payloads?Object.keys(b.creativeIframe.contentWindow.celtra.payloads)[0]:'unknown'}),b.logger.log('Checking Celtra urls ('+b.adConfig.thirdParty.creativeSource[b.creativeOption]+')',{celtraUrlsCreativeUrl:c.contentWindow&&'undefined'!==typeof c.contentWindow.urls&&'undefined'!==
typeof c.contentWindow.urls.creativeUrl?c.contentWindow.urls.creativeUrl:'unknown'})}catch(x){b.logger.error(x)}var k=!1;if(b.isCheckModeStrict&&d&&b.creativeIframe.contentWindow&&'undefined'!==typeof b.creativeIframe.contentWindow.celtra&&'object'===typeof b.creativeIframe.contentWindow.celtra.payloads&&c.contentWindow&&'undefined'!==typeof c.contentWindow.urls&&'undefined'!==typeof c.contentWindow.urls.creativeUrl)try{b.logger.log('STRICT - TRY to find third party ad container check based on Celtra ID',
c.parentElement);var f=Object.keys(b.creativeIframe.contentWindow.celtra.payloads)[0].match(/https:\/\/cache-ssl.celtra.com\/api\/creatives\/([0-9a-zA-Z]+)\//)[1],g=c.contentWindow.urls.creativeUrl.match(/https:\/\/ads.celtra.com\/compiled\/([0-9a-zA-Z]+)\//)[1];b.logger.log("STRICT - CHECK third party ad container check based on Celtra ID: '"+f+"' <> '"+g+"'",c.parentElement);'string'===typeof f&&0<f.length&&'string'===typeof g&&0<g.length&&f===g&&(k=!0,b.logger.log("STRICT - FOUND third party ad container based on Celtra ID: '"+
f+"' <> '"+g+"'",c.parentElement))}catch(x){b.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+b.creativeOption+'-error-ad-container'}),b.logger.error(x)}if(d&&(!b.isCheckModeStrict||b.isCheckModeStrict&&k)){b.logger.log('Found third party ad container ('+b.adConfig.thirdParty.creativeSource[b.creativeOption]+')',d);b.thirdPartyHostContainer=c.parentElement;b.thirdPartyAdContainer=d;b.stopCheck();b.startCheckCeltraClickContainer();b.enableTracking(b.thirdPartyHostContainer,b.thirdPartyAdContainer,
b.thirdPartyClickContainer);try{var m=Date.now()-b.intervalStart;b.logger.log('Third party ad container was found ('+m/1E3+'s)');b.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+b.creativeOption+'-found',details:{msSinceStart:m}})}catch(x){}}}});this.validateCheck()};m.prototype.startCheckCeltraInline=function(){var a=this,b=this.context.Environment;this.logger.log('Try to find third party ad INLINE container ('+this.adConfig.thirdParty.creativeSource[this.creativeOption]+')');if(this.thirdPartyAdContainer)this.logger.error('Third party ad INLINE container was found already',
this.thirdPartyAdContainer);else if(this.adCore.adAssetList.forEach(function(c){c instanceof g&&Object.keys(c.creative).forEach(function(d){var f=a.adCore.getCreativeOptionDetails(c.creative,d).creativeDetails;a.logger.log('Check creative option '+d+' ('+b.creativeOption+')');f.container?d===b.creativeOption&&!1!==f.host&&'undefined'!==typeof f.host?f.host.childNodes.forEach(function(b){a.logger.log('Check child node (DIV)',b);'div'===b.nodeName.toLowerCase()&&(a.logger.log('Search for iframe'),a.searchForNode(b,
'iframe'),a.searchForNodeResult?(a.logger.log('Found iframe',a.searchForNodeResult),'iframe'===a.searchForNodeResult.nodeName.toLocaleLowerCase()&&a.searchForNodeResult.contentDocument?(a.logger.log('FOUND',b),a.thirdPartyHostContainer=b,a.thirdPartyAdContainer=a.searchForNodeResult.contentDocument.getElementById('viewport')):a.logger.log('Iframe has no content')):a.logger.log("Can't find iframe"))}):a.logger.log("Can't find host for creative option "+d+' ('+b.creativeOption+')'):a.logger.log("Can't find container for creative option "+
d+' ('+b.creativeOption+')')})}),this.thirdPartyHostContainer&&this.thirdPartyAdContainer){this.logger.log('Found third party ad INLINE container ('+this.adConfig.thirdParty.creativeSource[this.creativeOption]+')',this.thirdPartyAdContainer);this.thirdPartyClickContainer=this.thirdPartyAdContainer;this.stopCheck();this.enableTracking(this.thirdPartyHostContainer,this.thirdPartyAdContainer,this.thirdPartyClickContainer);try{var c=Date.now()-this.intervalStart;this.logger.log('Third party ad INLINE container was found ('+
c/1E3+'s)');this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-found',details:{msSinceStart:c}})}catch(r){}}this.validateCheck()};m.prototype.startCheckCeltraClickContainer=function(a){this.logger.log(((void 0===a?0:a)?'PRE-Check ':'')+'Try to find third party click container ('+this.adConfig.thirdParty.creativeSource[this.creativeOption]+')');if(this.thirdPartyAdContainer)try{switch(this.logger.log('TRY to find third party click container',this.thirdPartyAdContainer.parentElement),
this.adConfig.thirdParty.creativeSource[this.creativeOption]){case 'celtra-banner':this.thirdPartyClickContainer=this.thirdPartyAdContainer.parentElement;break;case 'celtra-banner-sticky':this.thirdPartyClickContainer=this.thirdPartyAdContainer;break;case 'celtra-interscroller':break;case 'celtra-interstitial':this.thirdPartyClickContainer=this.thirdPartyAdContainer;break;default:this.thirdPartyClickContainer=this.thirdPartyAdContainer.parentElement,this.logger.warn("TRY to find third party click container - invalid third party source: '"+
this.adConfig.thirdParty.creativeSource[this.creativeOption]+"'"),this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-source'})}}catch(b){this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-click-container'}),this.logger.error(b)}else this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-click-container'})};m.prototype.startCheck=function(a){this.logger.log('startCheck - Entered (interval start: '+
this.intervalStart+')');this.logger.log('startCheck - Reset interval start');this.intervalStart=Date.now();'undefined'!==typeof this.adConfig.thirdParty&&'undefined'!==typeof this.adConfig.thirdParty.checkInterval&&'undefined'!==typeof this.adConfig.thirdParty.checkTimeout?this.intervalId=this.context.Environment.hostWindow.setInterval(a,this.adConfig.thirdParty.checkInterval):(this.logger.error("startCheck - Can't start checking third party ad container"),this.context.messageBus.event.emit({kind:'tracker',
event:'tpa-'+this.creativeOption+'-error-config'}))};m.prototype.validateCheck=function(){this.logger.log('validateCheck - Entered (interval start: '+this.intervalStart+')');0>=this.intervalStart&&(this.logger.log('validateCheck - Reset interval start'),this.intervalStart=Date.now());var a=Date.now()-this.intervalStart;'undefined'!==typeof this.adConfig.thirdParty&&'undefined'!==typeof this.adConfig.thirdParty.checkTimeout&&a>this.adConfig.thirdParty.checkTimeout&&(this.stopCheck(),this.logger.error('validateCheck - Timeout during checking third party ad container'),
this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-timeout',details:{msSinceStart:a}}))};m.prototype.stopCheck=function(){this.intervalId&&this.context.Environment.hostWindow.clearInterval(this.intervalId)};m.prototype.searchForNode=function(a,b,c){var d=this;c=void 0===c?0:c;a.childNodes.forEach(function(a){a.nodeName.toLowerCase()===b.toLowerCase()?d.searchForNodeResult=a:d.searchForNode(a,b,c++)})};m.prototype.enableTracking=function(a,b,c){var f=this,k=this.context.Environment;
this.logger.log('Enable Tracking on ad container');a.setAttribute(d.a.AD_SESSION_ID,this.initConfig.meta.adSessionId);a.setAttribute(d.a.CONTAINER_TYPE,'host');b.setAttribute(d.a.AD_SESSION_ID,this.initConfig.meta.adSessionId);b.setAttribute(d.a.CONTAINER_TYPE,'ad');k.isDemoMode&&this.demoContainer&&(this.demoContainer.style.backgroundColor='rgba(255, 255, 0, 0.3)',b.append(this.demoContainer));if(this.adConfig.tracking.viewabilityTrackingOverAll||'portrait'===this.creativeOption||'landscape'===this.creativeOption){b.setAttribute(d.a.VIEWABILITY,
d.b.ENABLED);b.setAttribute(d.a.VIEWABILITY_STATUS,d.b.WAITING);b.setAttribute(d.a.VIEWABILITY_GOAL,'viewability '+this.adConfig.tracking.viewabilityPercent+'/'+this.adConfig.tracking.viewabilityTime/1E3);var g=null;g=new d.c('Viewability Tracking (ThirdPartyAd - '+this.creativeOption+')',this.context,b,this.adConfig.tracking.viewabilityPercent,this.adConfig.tracking.viewabilityTime,this.adConfig.tracking.visibilityHandlerType,this.adCore.visibilityHandlerViewabilityGroupList,!0,function(){try{var a=
Date.now()-f.initConfig.timestamp;f.context.messageBus.event.emit({kind:'tracker',event:'viewability',details:{msSinceStart:a}});k.isVCPM&&(k.isPortrait?(f.context.trackingMiner.portrait.visibleCreative&&f.context.trackingMiner.portrait.visibleCreative.release(),f.context.trackingMiner.portrait.hiddenCreative&&f.context.trackingMiner.portrait.hiddenCreative.release()):(f.context.trackingMiner.landscape.visibleCreative&&f.context.trackingMiner.landscape.visibleCreative.release(),f.context.trackingMiner.landscape.hiddenCreative&&
f.context.trackingMiner.landscape.hiddenCreative.release()));b.setAttribute(d.a.VIEWABILITY_STATUS,d.b.FINISHED);b.setAttribute(d.a.VIEWABILITY_SUCCESS,'viewability '+f.adConfig.tracking.viewabilityPercent+'/'+f.adConfig.tracking.viewabilityTime/1E3);b.setAttribute(d.a.VIEWABILITY_TIME,''+g.visibilityHandler.viewedTime);k.isDemoMode&&f.demoContainer&&(f.demoContainer.style.backgroundColor='rgba(0, 255, 0, 0.3)')}catch(y){f.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+f.creativeOption+
'-error-viewability'}),f.logger.error(y)}},function(){},!1,function(){g.visibilityHandler.disabled||(b.setAttribute(d.a.VIEWABILITY_STATUS,d.b.STARTED),b.setAttribute(d.a.VIEWABILITY_TIME,g.visibilityHandler.viewedTime+' +'),k.isDemoMode&&f.demoContainer&&(f.demoContainer.style.backgroundColor='rgba(255, 165, 0, 0.3)'))},function(){g.visibilityHandler.disabled||(b.setAttribute(d.a.VIEWABILITY_STATUS,d.b.PAUSED),b.setAttribute(d.a.VIEWABILITY_TIME,''+g.visibilityHandler.viewedTime),k.isDemoMode&&f.demoContainer&&
(f.demoContainer.style.backgroundColor='rgba(255, 255, 0, 0.3)'))});g.init();this.adCore.visibilityHandlerDependsOnImpressionList.push(g);this.adConfig.tracking.viewabilityTrackingOverAll&&this.adCore.visibilityHandlerViewabilityGroupList.push(g);g.enable()}else b.setAttribute(d.a.VIEWABILITY,d.b.SKIPPED),b.setAttribute(d.a.VIEWABILITY_STATUS,d.b.SKIPPED),this.logger.log('SKIP viewability tracking for '+this.creativeOption+' creative',{configCreative:this.configCreative});this.adConfig.tracking.enableClickTrackingWorkaround&&
c?(this.logger.log('Setup click tracking on click container (ThirdPartyAd)'),c.setAttribute(d.a.CLICK,d.b.ENABLED),c.setAttribute(d.a.CLICK_STATUS,d.b.WAITING),c.setAttribute(d.a.CLICK_GOAL,'click'),c.setAttribute(d.a.AD_SESSION_ID,this.initConfig.meta.adSessionId),c.onclick=function(b){f.wasClicked?(f.logger.log('SKIP repeated CLICK on click container (ThirdPartyAd)'),c.setAttribute(d.a.CLICK_SUCCESS,'click-repeated'),k.isDemoMode&&f.demoContainer&&(f.demoContainer.style.backgroundColor='rgba(128, 128, 128, 0.3)'),
f.context.messageBus.event.emit({kind:'tracker',event:'click-repeated',details:{source:'tpa-'+f.creativeOption}})):(f.logger.log('Handle CLICK on click container (ThirdPartyAd)'),f.wasClicked=!0,c.setAttribute(d.a.CLICK_STATUS,d.b.FINISHED),c.setAttribute(d.a.CLICK_SUCCESS,'click'),k.isDemoMode&&f.demoContainer&&(f.demoContainer.style.backgroundColor='rgba(0, 0, 0, 0.3)'),f.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'tpa-'+f.creativeOption}}))}):this.logger.log('Setup click tracking on click container (ThirdPartyAd)')};
var p=function(a,b,c){this.method='all';this.creativeContentWithoutTracking=this.creativeContentOriginal='';this.trackingImages=[];this.trackingIframes=[];this.countOfTrackersFound=0;this.isReleased=this.isError=!1;this.context=a;this.logger=a.newLogger('Miner');'all'!==b&&'pattern'!==b&&(b='all');this.method=b;this.creativeContentOriginal=c};p.prototype.release=function(){var a=this;this.isReleased?this.logger.warn('Ignore call to fetch all trackers, already done'):(this.logger.log('Start fetching all trackers'),
this.isReleased=!0,this.trackingImages.forEach(function(b){a.logger.log('Fetching image tracker: '+b);a.context.metrics.loadTrackingImage(b)}),this.trackingIframes.forEach(function(b){a.logger.log('Fetching iframe tracker: '+b);a.context.metrics.loadTrackingIframe(b)}),this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner-released'}),this.logger.log('Finished fetching all trackers'))};p.prototype.collect=function(){var a=this;this.logger.log('Start mining of trackers');this.countOfTrackersFound=
0;var b=['IMG','IFRAME'],c={IMG:[],IFRAME:[],CONTENT:''};try{if(''!==this.creativeContentOriginal)try{var d=(new DOMParser).parseFromString(this.creativeContentOriginal,'text/html');b.forEach(function(b){var f=d.getElementsByTagName(b);0<f.length&&(Object.keys(f).forEach(function(d){d=f[d];var g=d.src,k=!1;a.logger.log("By using method '"+a.method+"' found '"+b+"': "+g,d);try{if('string'!==typeof g||'data:'!==g.toLocaleLowerCase().substring(0,5))'all'===a.method?1!==d.width&&0!==d.width||1!==d.height&&
0!==d.height?'undefined'===typeof d.style||(1===parseInt(d.style.width,10)||0===parseInt(d.style.width,10),!1)||1!==parseInt(d.style.height,10)&&0!==parseInt(d.style.height,10)||(k=!0,a.logger.log("By using method '"+a.method+"' - identified as tracker due to style dimension: "+g),c[b].push(g)):(k=!0,a.logger.log("By using method '"+a.method+"' - identified as tracker due to tag dimension: "+g),c[b].push(g)):'pattern'===a.method&&-1!==g.indexOf('bidswitch.net/imp/')&&(k=!0,a.logger.log("By using method '"+
a.method+"' - identified as tracker: "+g),c[b].push(g))}catch(A){a.isError||a.logger.error('Internal error 90003'),a.isError=!0}k||a.logger.log('Skip element: '+g)}),c[b].forEach(function(b){Object.keys(f).forEach(function(c){if('undefined'!==typeof f[c]){c=f[c];var d=c.src;d===b&&'undefined'!==typeof c&&'undefined'!==typeof c.parentNode&&(a.logger.log('Removed tracker: '+d),c.parentNode.removeChild(c))}})}));a.countOfTrackersFound+=c[b].length});0===this.countOfTrackersFound?(this.logger.warn("Can't find trackings"),
this.isError=!0,c.CONTENT=this.creativeContentOriginal,this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner-warn-notfound'})):c.CONTENT=d.body.innerHTML}catch(t){this.logger.error('Error during search for trackings',t),this.isError=!0,c.IMG=[],c.IFRAME=[],c.CONTENT=this.creativeContentOriginal,this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner-error-search'})}}catch(t){this.logger.error('Exception during mining of trackers: '+t),this.isError=!0,c.IMG=[],c.IFRAME=
[],c.CONTENT=this.creativeContentOriginal,this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner-error-exception'})}this.trackingImages=c.IMG;this.trackingIframes=c.IFRAME;this.creativeContentWithoutTracking=c.CONTENT;this.logger.log('Finished mining of trackers '+(this.isError?'WITH':'without')+' error: '+this.countOfTrackersFound+' trackers found',c);this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner',details:{countOfTrackersFound:this.countOfTrackersFound}});
return this.isError?!1:!0};var g=function(){var a=this;this.adAssetList=[];this.creative={portrait:{container:!1,wrapper:!1,host:!1,iframe:!1,iframeHidden:!1,image:!1,canvas:!1,alreadyInserted:!1,thirdPartyAd:!1},landscape:{container:!1,wrapper:!1,host:!1,iframe:!1,iframeHidden:!1,image:!1,canvas:!1,alreadyInserted:!1,thirdPartyAd:!1},sticky:{container:!1,wrapper:!1,host:!1,iframe:!1,iframeHidden:!1,image:!1,canvas:!1,alreadyInserted:!1,thirdPartyAd:!1},hidden:{container:!1,wrapper:!1,host:!1,iframe:!1,
iframeHidden:!1,image:!1,canvas:!1,alreadyInserted:!1,thirdPartyAd:!1}};this.isImage=this.isVideo=this.isReady=!1;this.waitForAssetReadyCheck=!0;this.wasClicked=this.showTakeover=!1;this.closeAd=function(b,c){c=!1;b&&(c=!0,b.stopPropagation(),a.context.messageBus.event.emit({kind:'tracker',event:'close'}));a.context.messageBus.event.emit({kind:'close',interactive:c});(a.context.Environment.isLogMode||a.context.Environment.isDebugMode)&&a.context.troubleshooting.log()};this.onUnderstitialPaint=function(b){b=
b.enabled;var c=a.context.Environment,d=c.isSticky;if(c=a.creative[c.creativeOption].wrapper)c.style.overflow=b&&!d?'hidden':''}};g.prototype.init=function(a,b,c,d,f,g){var k=this;this.adCore=a;this.context=b;this.adPainter=c;this.initConfig=d;this.adConfig=f;this.adAssetList=g;this.logger=this.context.newLogger('AdCreative');Object.keys(this.creative).forEach(function(b){var a=k.adCore.getCreativeOptionDetails(k.creative,b),c=a.configCreative;a=a.creativeDetails;'static-image'===c.mode&&(k.isImage=
!0);k.logger.log('Pre-check third party ad logic for '+b+' creative',{configCreative:c});a.thirdPartyAd=new m(k.context,k.initConfig,k.adConfig,k.adCore,k.adPainter,b,c,a);a.thirdPartyAd.preCheck()});return!0};g.prototype.constructVisibilityHandler=function(a){return a};g.prototype.constructAdNodes=function(a,b){var c=this,f=this.context.Environment;Object.keys(this.creative).forEach(function(g){var k=c.adCore.getCreativeOptionDetails(c.creative,g),m=k.configCreative;k=k.creativeDetails;c.logger.log('Starting to prepare '+
g+' creative',{configCreative:m});var l=n.e(f,'div');l.id='yoc_creative_container_'+g+'_'+c.context.productTitlePostfix+'_'+c.initConfig.meta.adSessionId;var r=n.e(f,'div');r.id='yoc_creative_wrapper_'+g+'_'+c.context.productTitlePostfix+'_'+c.initConfig.meta.adSessionId;var t=n.e(f,'div');t.id='yoc_creative_host_'+g+'_'+c.context.productTitlePostfix+'_'+c.initConfig.meta.adSessionId;if('static-image'===m.mode){var p='',q='';try{p=decodeURIComponent(m.imageUrl),q=decodeURIComponent(m.clickUrl)}catch(z){c.logger.error(z)}p?
(p=new n.b(c.context,p,!0),p.node.id='yoc_creative_image_'+g+'_'+c.context.productTitlePostfix+'_'+c.initConfig.meta.adSessionId,l.setAttribute(d.a.CLICK,d.b.ENABLED),l.setAttribute(d.a.CLICK_STATUS,d.b.WAITING),l.setAttribute(d.a.CLICK_GOAL,'click'),l.setAttribute(d.a.AD_SESSION_ID,c.initConfig.meta.adSessionId),c.context.setupClickHandler(l,function(){c.wasClicked?(c.logger.log('SKIP repeated CLICK on '+g+' image creative',{configCreative:m}),l.setAttribute(d.a.CLICK_SUCCESS,'click-repeated'),c.context.messageBus.event.emit({kind:'tracker',
event:'click-repeated',details:{source:'adcreative-'+g}})):(c.logger.log('Handle CLICK on '+g+' image creative',{configCreative:m}),c.wasClicked=!0,void 0===q?(l.setAttribute(d.a.CLICK_STATUS,d.b.FINISHED),l.setAttribute(d.a.CLICK_SUCCESS,'click-error')):(Object(v.a)(c.context,q),l.setAttribute(d.a.CLICK_STATUS,d.b.FINISHED),l.setAttribute(d.a.CLICK_SUCCESS,'click')),c.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'adcreative-'+g}}))}),t.append(p.node),k.image=p.node):
c.logger.log('Skip '+g+' image creative - URL is missing',{configCreative:m});f.isVideo||f.isPreloadImage||(c.waitForAssetReadyCheck=!1)}else'html5'===m.mode||'redirect'===m.mode||'redirect-use-rtb'===m.mode||'redirect-load-rtb-hidden'===m.mode?(p=n.e(f,'iframe'),p.id='yoc_creative_'+m.mode+'_'+g+'_'+c.context.productTitlePostfix+'_'+c.initConfig.meta.adSessionId,p.frameBorder='0',p.scrolling='no',0<c.adConfig.display.sandboxForIframes.length&&(p.sandbox=c.adConfig.display.sandboxForIframes),n.f(l),
t.append(p),k.iframe=p,'redirect-load-rtb-hidden'===m.mode&&(p=n.e(f,'iframe'),p.id='yoc_creative_hidden_'+m.mode+'_'+g+'_'+c.context.productTitlePostfix+'_'+c.initConfig.meta.adSessionId,p.frameBorder='0',p.scrolling='no',0<c.adConfig.display.sandboxForIframes.length&&(p.sandbox=c.adConfig.display.sandboxForIframes),n.f(p),t.append(p),k.iframeHidden=p),c.waitForAssetReadyCheck=!1):'blurred-video'===m.mode&&(p=n.e(f,'canvas'),p.id='yoc_creative_canvas_'+g+'_'+c.context.productTitlePostfix+'_'+c.initConfig.meta.adSessionId,
n.f(l),t.append(p),k.canvas=p);r.append(t);l.append(r);'hidden'===g?b.prepend(l):a.prepend(l);k.container=l;k.wrapper=r;k.host=t;'undefined'!==typeof c.adConfig.thirdParty.creativeSource[g]&&'disabled'!==c.adConfig.thirdParty.creativeSource[g]?(c.logger.log('Init third party ad logic for '+g+' creative',{configCreative:m}),k.thirdPartyAd.init()):c.logger.log('SKIP third party ad logic for '+g+" creative because it's disabled / undefined",{configCreative:m})});q.a.preload(this.adConfig,this.adPainter.productContainer);
this.addCloseAdButton();this.understitialPaintHandler=this.context.messageBus.event.onEvent('understitial',this.onUnderstitialPaint);return{adNode:a,adNodeHidden:b}};g.prototype.updateStyles=function(a){var b=this;a=(void 0===a?{updateAdPosition:!1,reset:!1}:a).reset;var c=this.context.Environment;Object.keys(this.creative).forEach(function(a){var d=b.adCore.getCreativeOptionDetails(b.creative,a),f=d.configCreative;d=d.creativeDetails;d.container&&(a===c.creativeOption?b.adConfig.display.hide?(b.logger.log('Style update - custom option hide found - hide '+
a+' - '+f.mode+' creative',{configCreative:f}),n.f(d.container),b.context.messageBus.event.emit({kind:'tracker',event:'hide'})):'html5'===f.mode||'redirect'===f.mode||'redirect-load-rtb-hidden'===f.mode||'static-image'===f.mode||'blurred-video'===f.mode?(b.logger.log('Style update - show '+a+' - '+f.mode+' creative',{configCreative:f}),n.h(d.container),c.updatedCreativeHeight=f.height,c.updatedCreativeWidth=f.width,c.calculateAdDimension()):'redirect-use-rtb'===f.mode?(b.logger.log('Style update - show '+
a+' - '+f.mode+' creative',{configCreative:f}),n.h(d.container),c.updatedCreativeHeight=b.adConfig.display.height,c.updatedCreativeWidth=b.adConfig.display.width,c.calculateAdDimension()):b.logger.log('Style update - SKIP '+a+" creative because of unsupported mode '"+f.mode+"'",{configCreative:f}):(b.logger.log('Style update - hide '+a+' - '+f.mode+' creative',{configCreative:f}),n.f(d.container)))});a?this.setDimensions({width:0,height:0,scaleFactor:1}):this.setDimensions({width:c.scaledWidth/c.usedScaleFactor,
height:c.scaledHeight/c.usedScaleFactor,scaleFactor:c.usedScaleFactor})};g.prototype.setDimensions=function(a){var b=this,c=a.width,d=a.height,f=a.scaleFactor;Object.keys(this.creative).forEach(function(a){var g=b.adCore.getCreativeOptionDetails(b.creative,a),k=g.configCreative;g=g.creativeDetails;if(a===b.context.Environment.creativeOption)if(b.logger.log('Starting to set dimension of '+a+' - '+k.mode+' creative',{configCreative:k}),b.adConfig.display.hide)b.logger.log('Set dimension - custom option hide found - skip '+
a+' - '+k.mode+' creative',{configCreative:k});else if(g.container&&g.wrapper&&g.host&&('html5'===k.mode||'redirect'===k.mode||'redirect-use-rtb'===k.mode||'redirect-load-rtb-hidden'===k.mode||'static-image'===k.mode||'blurred-video'===k.mode)){var m=0===c?0:b.adConfig.display.width,l=0===d?0:b.adConfig.display.height;if('html5'===k.mode||'redirect'===k.mode||'redirect-load-rtb-hidden'===k.mode||'static-image'===k.mode||'blurred-video'===k.mode)m=0===c?0:k.width,l=0===d?0:k.height;var n=m,p=l,q='';
1!==f&&('scaleToFit'===b.adConfig.display.iFrameScaleMethod?(q='transform-origin: left top; transform:scale('+f+');',n*=f,p*=f):'scaleToWidth'===b.adConfig.display.iFrameScaleMethod&&(m*=f,l*=f));b.logger.log('Set dimension - process '+a+' - '+k.mode+' creative',{width:c,height:d,scaleFactor:f,creativeWidth:m,creativeHeight:l,configCreative:k});n='position: relative; width: '+n+'px; height: '+p+'px;';p='display: block; width: '+m+'px; height: '+l+'px; '+q;'celtra-interscroller'===b.adConfig.thirdParty.creativeSource.portrait&&
(n='position: relative; width: auto; height: auto;',p='display: block; width: auto; height: auto; '+q);'blurred-video'===k.mode&&'sharp'===k.type&&(p+='overflow: hidden;');g.container.style.cssText='left: 0px; top: 0px; width: 100%; height: auto;';g.wrapper.style.cssText=n;g.host.style.cssText=p;g.iframe?'none'===g.iframe.style.display||'hidden'===g.iframe.style.visibility?b.logger.warn('Set dimension - SKIP '+a+' - '+k.mode+' IFRAME because of display==none'):g.iframe.style.cssText='position: relative; display: block; width: '+
m+'px; height: '+l+'px; max-width: none !important; max-height: none !important; overflow: hidden;':g.image?g.image.style.cssText='position: relative; display: block; width: '+m+'px; height: '+l+'px; max-width: none !important; max-height: none !important; overflow: hidden;':g.canvas&&(a='position: relative; display: block; width: '+m+'px; height: '+l+'px; max-width: none !important; max-height: none !important; overflow: hidden;','blurred-video'===k.mode&&(a+='filter: blur('+k.intensity+'px););',
a+='backdrop-filter: blur('+k.intensity+'px);'),g.canvas.style.cssText=a)}else b.logger.log('Set dimension - SKIP '+a+" creative because of unsupported mode '"+k.mode+"'",{configCreative:k});else b.logger.log('Set dimension - skip '+a+' - '+k.mode+' creative',{configCreative:k})})};g.prototype.onOrientationChange=function(a){this.isReady&&this.postProcessAfterInsertAd()};g.prototype.onResize=function(a){this.isReady&&this.postProcessAfterInsertAd()};g.prototype.postProcessAfterInsertAd=function(a){var b=
this,c=this.context.Environment;this.logger.log('Post process after insert ad - run ...');Object.keys(this.creative).forEach(function(d){b.logger.log('Post process after insert ad - PROCESS '+d+' creative');var f=b.adCore.getCreativeOptionDetails(b.creative,d),g=f.configCreative,k=f.creativeDetails;f=f.trackingMiner;if(k.container&&k.iframe&&(k.iframe.contentWindow||k.iframe.contentDocument))if(k.alreadyInserted)b.logger.log('Post process after insert ad - SKIP '+d+' creative because it was already inserted',
{configCreative:g});else if(d===c.creativeOption||d===a&&void 0!==a){if(b.logger.log('Post process after insert ad - '+d+' - '+g.mode+' creative',{configCreative:g}),'static-image'!==g.mode)if('html5'===g.mode){d='';try{d=decodeURIComponent(g.html5Url)}catch(w){b.logger.error(w)}if(d)try{k.iframe.src=d,k.alreadyInserted=!0}catch(w){b.logger.error('Error during creative content handling (HTML5 URL)'),b.context.messageBus.event.emit({kind:'tracker',event:'error-html5-add'})}}else if('redirect'===g.mode||
'redirect-use-rtb'===g.mode||'redirect-load-rtb-hidden'===g.mode){var m='',l='';try{'redirect'===g.mode?m=decodeURIComponent(g.redirectCode):'redirect-use-rtb'===g.mode?m=decodeURIComponent(b.initConfig.rtbCreative):'redirect-load-rtb-hidden'===g.mode&&(m=decodeURIComponent(g.redirectCode),l=decodeURIComponent(b.initConfig.rtbCreative))}catch(w){b.logger.error(w)}m=b.adCore.replaceMacros(m);l=b.adCore.replaceMacros(l);c.isVCPM&&(b.logger.log('vCPM is enabled - tracking miner for visible creative started',
m),f.visibleCreative=new p(b.context,'all',m),f.visibleCreative.collect(),m=f.visibleCreative.creativeContentWithoutTracking,b.logger.log('vCPM is enabled - tracking miner for visible creative finished',m),'redirect-load-rtb-hidden'===g.mode&&(b.logger.log('vCPM is enabled - tracking miner for hidden creative started',l),f.hiddenCreative=new p(b.context,'all',l),f.hiddenCreative.collect(),l=f.hiddenCreative.creativeContentWithoutTracking,b.logger.log('vCPM is enabled - tracking miner for hidden creative finished',
l)));if('redirect-load-rtb-hidden'===g.mode&&'string'===typeof l&&0<l.length&&k.iframeHidden&&(k.iframeHidden.contentWindow||k.iframeHidden.contentDocument))try{var n='<!DOCTYPE html><head>'+(b.adConfig.display.useFriendlyIframe?'<script>var inDapIF=true;\x3c/script>':'')+'</head><body style="margin:0;padding:0;">'+l+'</body></html>';k.iframeHidden.contentDocument.open();k.iframeHidden.contentDocument.close();k.iframeHidden.contentWindow.contents=n;k.iframeHidden.src='javascript:window["contents"]'}catch(w){b.logger.error('Error during creative content handling (redirect code hidden)'),
b.context.messageBus.event.emit({kind:'tracker',event:'error-redirect-add-hidden'})}c.isVCPM&&b.adConfig.creativeWrapper.ge&&(b.logger.log("vCPM is enabled and creative wrapper 'ge' was enabled - creative wrapper is now disabled"),b.adConfig.creativeWrapper.ge=!1,b.context.messageBus.event.emit({kind:'tracker',event:'creative-wrapper-disabled-ge'}));!b.initConfig.meta.visx&&b.adConfig.creativeWrapper.ge&&(b.logger.log("Ad is not delivered via VIS.X and creative wrapper 'ge' was enabled - creative wrapper is now disabled"),
b.adConfig.creativeWrapper.ge=!1);if(b.adConfig.creativeWrapper.ge)try{m='<div id="grumi-container"><script type="text/javascript" nonce="!headerNonce!">!function(d,i){var p={wver:"1.1.3",wtype:"dfp",key:"c41ea7b0-7b8a-4bcc-9876-4a9f25cab255",meta:{adup:"'+b.initConfig.meta.adUnitId+'",dest:"",w:"'+b.adConfig.display.width+'",h:"'+b.adConfig.display.height+'",li:"",adv:"",ord:"",cr:"",aduid:"",haduid:"",isAfc:"",isAmp:"",qid:"",cust_imp:"",cust1:"",cust2:"",cust3:"",caid:"",di:"'+b.initConfig.meta.dspId+
'",dn:"'+b.initConfig.meta.dspName+'",dcid:"'+b.initConfig.meta.creativeId+'",pid:"'+b.initConfig.meta.publisherId+'",pn:"",adElId:""},sp:"dfp",cfg:{},pbAdId:"",pbAdIdAst:"",pbBidder:"",hbPb:"",hbCid:"",site:"",pimp:""};window.grumi=p}();\x3c/script><template style="display: none;" id="template0"><xmp style="display: none;" id="xmp0">'+m+'</xmp></template><script type="text/javascript" nonce="!footerNonce!">!function(n){var e,o=window.grumi.key,i=window.grumi,r=i&&i.wtype&&"gpt"===i.wtype,a=1*new Date,d=navigator.userAgent&&navigator.userAgent.match(/\\b(MSIE |Trident.*?rv:|Edge\\/)(\\d+)/);function t(){var e=function(){for(var e,t=document.getElementsByTagName("template"),n=t.length-1;0<=n;n--)if("template0"===t[n].id){e=t[n];break}return e}();return e.content?e.content.getElementById?e.content.getElementById("xmp0"):e.content.childNodes[0]:e.getElementsByTagName("xmp")[0]}function u(e,t){t=t||!1,top.postMessage&&top.postMessage({evType:e||"",key:i.key,adup:i.meta.adup,html:window.grumi?window.grumi.tag:"",el:i.meta.adElId,refresh:t},"*")}function w(e,t){var n="",o=d&&"complete"===document.readyState;window.grumi&&(window.grumi.fsRan=!0,n=window.grumi.tag),o||(window.document.open(),window.document.write(n),window.document.close()),((t=t||!1)||o)&&u(e,o)}function c(e,n){return function(){var t=setTimeout(function(){var e=document.getElementById(a);e&&null===function(e){if(void 0!==e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;t&&1!==t.nodeType;)t=t.nextSibling;return t}(e)&&n&&n(),clearTimeout(t)},e)}}c(5e3,function(){w()})(),c(2e3,function(){u("slwCl")})(),window.grumi.tag=(e=t())&&e.innerHTML,window.grumi.scriptHost=n,window.parent&&window.parent.postMessage&&window.parent.postMessage({iw:!0,key:i.key,adup:i.meta.adup,el:i.meta.adElId},"*"),function(){var e=document.createElement("script");e.type="text/javascript",e.src=n+o+"/grumi.js",e.className="rm",e.id=a,r&&!d&&(e.async=!0);var t="_"+1*new Date;window[t]=function(){w("netErr",!0)},window.grumi.start=1*new Date;try{window.document.write(e.outerHTML.replace(\'class="rm"\',\'onerror="\'+t+\'();"\'))}catch(e){w()}}()}(("http"===window.location.protocol.substr(0,4)?window.location.protocol:"https:")+"//rumcdn.geoedge.be/");\x3c/script></div>',
b.context.messageBus.event.emit({kind:'tracker',event:'creative-wrapper-setup-done-ge'})}catch(w){b.logger.error('Error during creative wrapper setup (ge)'),b.context.messageBus.event.emit({kind:'tracker',event:'creative-wrapper-setup-error-ge'})}if(m){try{var q='<!DOCTYPE html><head>'+(b.adConfig.display.useFriendlyIframe?'<script>var inDapIF=true;\x3c/script>':'')+'</head><body style="margin:0;padding:0;">'+m+'</body></html>';k.iframe.contentDocument.open();k.iframe.contentDocument.close();k.iframe.contentWindow.contents=
q;k.iframe.src='javascript:window["contents"]'}catch(w){b.logger.error('Error during creative content handling (redirect code)'),b.context.messageBus.event.emit({kind:'tracker',event:'error-redirect-add'})}k.alreadyInserted=!0}'undefined'!==typeof b.adConfig.thirdParty.creativeSource[d]&&'disabled'!==b.adConfig.thirdParty.creativeSource[d]&&k.thirdPartyAd.run(k.iframe)}else'blurred-video'===g.mode?(b.logger.log('Post process after insert ad - '+d+' - '+g.mode+' creative',{configCreative:g}),k.alreadyInserted=
!0):b.logger.log('Post process after insert ad - SKIP '+d+' - '+g.mode+" creative because of unsupported mode '"+g.mode+"'",{configCreative:g})}else b.logger.log('Post process after insert ad - SKIP '+d+' - '+g.mode+' creative for now, because not needed yet',{configCreative:g})});this.isReady=!0};g.prototype.dispose=function(){var a=this;this.logger.debug('dispose');this.understitialPaintHandler.dispose();Object.keys(this.creative).forEach(function(b){var c=a.adCore.getCreativeOptionDetails(a.creative,
b);b=c.configCreative;c=c.creativeDetails;'static-image'===b.mode?c.image&&c.image.remove():'html5'===b.mode||'redirect'===b.mode||'redirect-use-rtb'===b.mode||'redirect-load-rtb-hidden'===b.mode?c.iframe&&c.iframe.remove():'blurred-video'===b.mode&&c.canvas&&c.canvas.remove();c.container&&(c.container.remove(),c.container=!1);c.wrapper&&(c.wrapper.remove(),c.wrapper=!1);c.host&&(c.host.remove(),c.host=!1)})};g.prototype.removeCloseAdButton=function(){'creative'===this.adCore.bundle&&this.closeAdButton&&
(this.closeAdButton.root&&this.context.messageBus.clickOverlay.emit({kind:'remove-element',element:this.closeAdButton.root}),delete this.closeAdButton)};g.prototype.addCloseAdButton=function(){var a=this.adConfig.closeButton.mode;if('creative'===this.adCore.bundle&&!this.context.Environment.isSticky&&('enabled'===a||'only-inline'===a)||this.context.Environment.isSticky&&('enabled'===a||'only-sticky'===a))if(this.closeAdButton=a=new q.a(this.context,this.adConfig,this.closeAd),a.root){var b=q.a.defaultPosition;
'disabled'!==this.adConfig.closeButton.mode&&(b=this.adConfig.closeButton.position);this.context.messageBus.clickOverlay.emit({kind:'add-element',element:a.root,preferredPosition:b})}};g.prototype.onSticky=function(){this.logger.debug('onSticky');'disabled'===this.adConfig.creative.sticky.mode||'redirect-use-rtb'===this.adConfig.creative.sticky.mode||'takeoverInlineAndSticky'!==this.adConfig.display.effect&&'takeoverUnderstitialMiniAndSticky'!==this.adConfig.display.effect||(this.context.Environment.updatedCreativeWidth=
this.adConfig.creative.sticky.width,this.context.Environment.updatedCreativeHeight=this.adConfig.creative.sticky.height,this.adCore.onResize());this.postProcessAfterInsertAd();this.removeCloseAdButton();this.addCloseAdButton()};g.prototype.onTakeoverEnable=function(a){var b=this;this.logger.log('onTakeoverEnable - '+a);this.showTakeover=!0;if(this.isReady){var c=this.adCore.getCreativeOptionDetails(this.creative,a).creativeDetails;if(c.thirdPartyAd&&c.thirdPartyAd.thirdPartyHostContainer){n.h(c.thirdPartyAd.thirdPartyHostContainer);
this.logger.log('onTakeoverEnable - '+a+' - adding styles');var d=!0,f='animated'+this.initConfig.meta.adSessionId,g='slideInUp'+this.initConfig.meta.adSessionId;c.thirdPartyAd.thirdPartyHostContainer.classList.add(f,g);var k=function(){d&&b.showTakeover&&(b.logger.log('onTakeoverEnable - '+a+' - removing styles'),c.thirdPartyAd.thirdPartyHostContainer.classList.remove(f,g),c.thirdPartyAd.thirdPartyHostContainer.removeEventListener('animationend',k),d=!1)};c.thirdPartyAd.thirdPartyHostContainer.addEventListener('animationend',
k);this.context.Environment.hostWindow.setTimeout(k,2E3)}else this.postProcessAfterInsertAd(a)}else this.logger.log('onTakeoverEnable - '+a+' - creative is not yet ready')};g.prototype.onTakeoverDisable=function(a){var b=this;this.logger.log('onTakeoverDisable - '+a);this.showTakeover=!1;if(this.isReady){var c=this.adCore.getCreativeOptionDetails(this.creative,a).creativeDetails;if(c.thirdPartyAd&&c.thirdPartyAd.thirdPartyHostContainer){this.logger.log('onTakeoverDisable - '+a+' - adding styles');
var d=!0,f='animated'+this.initConfig.meta.adSessionId,g='slideOutDown'+this.initConfig.meta.adSessionId;c.thirdPartyAd.thirdPartyHostContainer.classList.add(f,g);var k=function(){d&&!b.showTakeover&&(n.f(c.thirdPartyAd.thirdPartyHostContainer),b.logger.log('onTakeoverDisable - '+a+' - removing styles'),c.thirdPartyAd.thirdPartyHostContainer.classList.remove(f,g),c.thirdPartyAd.thirdPartyHostContainer.removeEventListener('animationend',k),d=!1)};c.thirdPartyAd.thirdPartyHostContainer.addEventListener('animationend',
k);this.context.Environment.hostWindow.setTimeout(k,2E3)}else this.logger.log('onTakeoverDisable - '+a+" - can't find third party ad and corresponding host container")}else this.logger.log('onTakeoverDisable - '+a+' - creative is not yet ready')}},function(l,f,a){function n(){for(var a=window,f=document;a!==window.top;)try{f=a.parent.document,a=a.parent}catch(v){break}return{wnd:a,doc:f}}a.d(f,'a',function(){return n})},function(l,f,a){function n(a){a.__YOC=a.__YOC||[];a.__YOC.session=a.__YOC.session||
{}}a.d(f,'a',function(){return n})},function(l,f,a){a.d(f,'a',function(){return'0e39620986af0f4c412999aadaaa2d6b56c22bec'});a.d(f,'b',function(){return'2020-05-12T10-25-13-696Z'})},function(l,f,a){var n=Array.isArray,d=Object.keys,q=Object.prototype.hasOwnProperty;l.exports=function g(a,f){if(a===f)return!0;if(a&&f&&'object'==typeof a&&'object'==typeof f){var k=n(a),b=n(f);if(k&&b){var c=a.length;if(c!=f.length)return!1;for(k=c;0!==k--;)if(!g(a[k],f[k]))return!1;return!0}if(k!=b)return!1;k=a instanceof
Date;b=f instanceof Date;if(k!=b)return!1;if(k&&b)return a.getTime()==f.getTime();k=a instanceof RegExp;b=f instanceof RegExp;if(k!=b)return!1;if(k&&b)return a.toString()==f.toString();b=d(a);c=b.length;if(c!==d(f).length)return!1;for(k=c;0!==k--;)if(!q.call(f,b[k]))return!1;for(k=c;0!==k--;)if(c=b[k],!g(a[c],f[c]))return!1;return!0}return a!==a&&f!==f}},function(l,f,a){function n(a){window.top.postMessage(a,'*')}function d(a,b,c,d){return{event:a,type:'url',content:b,meta:c,isInvalidated:void 0===
d?!1:d,created:Date.now(),lastUpdate:Date.now()}}function q(a,b,c,d){return{event:a,type:'script',content:b,meta:c,isInvalidated:void 0===d?!1:d,created:Date.now(),lastUpdate:Date.now()}}function v(a,b){var c;return function(d){for(var e=[],h=0;h<arguments.length;++h)e[h-0]=arguments[h];var F=this;clearTimeout(c);c=window.setTimeout(function(){a.apply(F,e)},b)}}a.d(f,'a',function(){return B});a(19);a(20);a(21);var m=a(1),p=function(a,b,c,d,e){var h=this;this.displayAsUnderstitialEnabled=!1;this.updateAdPosition=
function(b){b=void 0===b?h.adVisibilityDetails:b;var a=h.context.Environment;h.adVisibilityDetails=b;h.logger.log('updateAdPosition() Ad is visible for '+100*h.adVisibilityDetails.visibilityPercentage+'% (Position: '+h.adVisibilityDetails.top+'x'+h.adVisibilityDetails.left+' - '+h.adVisibilityDetails.bottom+'x'+h.adVisibilityDetails.right+' - Dimension: '+h.adVisibilityDetails.width+'x'+h.adVisibilityDetails.height+') ('+(h.adVisibilityDetails.bottom-a.viewportHeight)+')');h.advertisementMessageAboveContainer.style.height=
h.advertisementMessageAboveWrapper.clientHeight+'px';h.advertisementMessageBelowContainer.style.height=h.advertisementMessageBelowWrapper.clientHeight+'px';a.isUnderstitial?('scale'===h.adConfig.display.responsive.mode&&h.adConfig.display.responsive.followLayout&&(h.rootContainer.style.overflow='hidden'),('understitialMini'===h.adConfig.display.effect||'understitialMiniToSticky'===h.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===h.adConfig.display.effect||'takeoverUnderstitialMiniAndHidden'===
h.adConfig.display.effect)&&1<=h.adVisibilityDetails.visibilityY&&(0>=h.adConfig.creative.marginTop||0<h.adConfig.creative.marginTop&&h.adVisibilityDetails.top>=h.adConfig.creative.marginTop)&&(0>=h.adConfig.creative.marginBottom||0<h.adConfig.creative.marginBottom&&0>=h.adVisibilityDetails.bottom-a.viewportHeight+h.adConfig.creative.marginBottom)?(h.displayAsUnderstitialEnabled=!1,a.supportClipPath?(h.productContainer.style.clipPath='',h.productContainer.style.webkitClipPath='',h.productContainer.style.mozClipPath=
'',h.productContainer.style.msClipPath='',h.productContainer.style.oClipPath=''):(h.productContainer.style.clip='',h.backgroundContainer.style.transform=''),h.backgroundContainer.style.position='absolute',a.isSticky||(h.backgroundContainer.style.width=a.scaledWidth+'px',h.backgroundContainer.style.left='scale'!==h.adConfig.display.responsive.mode||h.adConfig.display.responsive.followLayout?'scale'===h.adConfig.display.responsive.mode?parseInt(((a.availableWidth-a.scaledWidth)/2).toString(),10).toString()+
'px':'0px':parseInt(((a.viewportWidth-a.scaledWidth)/2).toString(),10).toString()+'px'),h.context.messageBus.event.emit({kind:'understitial',enabled:!1})):(h.displayAsUnderstitialEnabled=!0,a.supportClipPath?(h.productContainer.style.clipPath='inset(0)',h.productContainer.style.webkitClipPath='inset(0)',h.productContainer.style.mozClipPath='inset(0)',h.productContainer.style.msClipPath='inset(0)',h.productContainer.style.oClipPath='inset(0)'):(h.productContainer.style.clip='rect(auto, auto, auto, auto)',
h.backgroundContainer.style.transform='translateZ(0px)'),h.backgroundContainer.style.position='fixed',a.isSticky||(h.backgroundContainer.style.width=a.scaledWidth+'px',h.backgroundContainer.style.left=parseInt(((a.viewportWidth-a.scaledWidth)/2).toString(),10).toString()+'px'),h.context.messageBus.event.emit({kind:'understitial',enabled:!0}))):a.isSticky||(h.backgroundContainer.style.position='absolute',h.backgroundContainer.style.width=a.scaledWidth+'px',h.backgroundContainer.style.left='scale'!==
h.adConfig.display.responsive.mode||h.adConfig.display.responsive.followLayout?'scale'===h.adConfig.display.responsive.mode&&h.adConfig.display.responsive.followLayout?parseInt(((a.availableWidth-a.scaledWidth)/2).toString(),10).toString()+'px':parseInt(((a.availableWidth-a.usedWidth)/2).toString(),10).toString()+'px':parseInt(((a.viewportWidth-a.scaledWidth)/2).toString(),10).toString()+'px');a.isSticky?(h.contentContainer.style.top='',h.contentContainer.style.left='',h.contentContainer.style.width=
'',h.contentContainer.style.height='',h.productContainer.style.position='relative',h.productContainer.style.top='',h.productContainer.style.left='',h.productContainer.style.width='',h.productContainer.style.height='',h.productContainer.style.clip='',h.productContainer.style.clipPath='',h.backgroundContainer.style.position='relative',h.backgroundContainer.style.transform='',h.backgroundContainer.style.top='',h.backgroundContainer.style.bottom='',h.backgroundContainer.style.left='',h.backgroundContainer.style.width=
'',h.backgroundContainer.style.height='',h.productContainer.style.top='0px',h.productContainer.style.left='0px',h.rootContainer.style.position='fixed',h.rootContainer.style.left=parseInt(((a.viewportWidth-a.scaledWidth)/2).toString(),10).toString()+'px',h.rootContainer.style.right='',h.rootContainer.style.top='',h.rootContainer.style.bottom=h.adConfig.display.stickyMargin+'px'):'scale'===h.adConfig.display.responsive.mode&&(h.rootContainer.style.width='auto',h.rootContainer.style.height='auto',h.contentContainer.style.width=
'auto',h.contentContainer.style.height=a.scaledHeight+'px',a.isDebugMode&&(h.contentContainer.style.backgroundColor='green'),h.productContainer.style.position='absolute',h.productContainer.style.top='0px',h.productContainer.style.left='0px',h.productContainer.style.width='100%',h.productContainer.style.height='auto',b=h.productContainer.getBoundingClientRect().left,h.adConfig.display.responsive.followLayout||(h.productContainer.style.position='absolute',h.productContainer.style.width=a.viewportWidth+
'px',h.productContainer.style.left='-'+b+'px',h.advertisementMessageAboveWrapper.style.width=a.viewportWidth+'px',h.advertisementMessageAboveWrapper.style.left='-'+b+'px',h.advertisementMessageBelowWrapper.style.width=a.viewportWidth+'px',h.advertisementMessageBelowWrapper.style.left='-'+b+'px'),a.isUnderstitial?(0<h.adConfig.creative.marginTop?(h.backgroundContainer.style.top=h.adConfig.creative.marginTop+Math.floor((a.viewportHeight-h.adConfig.creative.marginTop-h.adConfig.creative.marginBottom-
a.scaledHeight)/2)+'px',h.backgroundContainer.style.bottom=''):0<h.adConfig.creative.marginBottom?(h.backgroundContainer.style.top='',h.backgroundContainer.style.bottom=h.adConfig.creative.marginBottom+Math.floor((a.viewportHeight-h.adConfig.creative.marginTop-h.adConfig.creative.marginBottom-a.scaledHeight)/2)+'px'):(h.backgroundContainer.style.top=Math.floor((a.viewportHeight-h.adConfig.creative.marginTop-h.adConfig.creative.marginBottom-a.scaledHeight)/2)+'px',h.backgroundContainer.style.bottom=
''),'understitialMini'===h.adConfig.display.effect||'understitialMiniToSticky'===h.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===h.adConfig.display.effect||'takeoverUnderstitialMiniAndHidden'===h.adConfig.display.effect?(h.contentContainer.style.height=a.scaledHeight+'px',h.productContainer.style.height=a.scaledHeight+'px',h.displayAsUnderstitialEnabled&&0<h.adConfig.creative.marginTop?h.adVisibilityDetails.top>=0+h.adConfig.creative.marginTop?(h.backgroundContainer.style.top='',
h.backgroundContainer.style.bottom='0px'):(h.backgroundContainer.style.top=h.adConfig.creative.marginTop+'px',h.backgroundContainer.style.bottom=''):h.displayAsUnderstitialEnabled&&0<h.adConfig.creative.marginBottom?0<=h.adVisibilityDetails.top?(h.backgroundContainer.style.top='',h.backgroundContainer.style.bottom=h.adConfig.creative.marginBottom+'px'):(h.backgroundContainer.style.top='0px',h.backgroundContainer.style.bottom=''):0<=h.adVisibilityDetails.top?(h.backgroundContainer.style.top='',h.backgroundContainer.style.bottom=
'0px'):(h.backgroundContainer.style.top='0px',h.backgroundContainer.style.bottom='')):'understitialSizeSmall'===h.adConfig.display.effect?(h.contentContainer.style.height=.28*a.viewportHeight+'px',h.productContainer.style.height=.28*a.viewportHeight+'px'):'understitialSizeMedium'===h.adConfig.display.effect?(h.contentContainer.style.height=.6*a.viewportHeight+'px',h.productContainer.style.height=.6*a.viewportHeight+'px'):'understitialSizeLarge'===h.adConfig.display.effect?(h.contentContainer.style.height=
.9*a.viewportHeight+'px',h.productContainer.style.height=.9*a.viewportHeight+'px'):'understitialSizeCustom'===h.adConfig.display.effect?'pixel'===h.adConfig.display.unit?(h.contentContainer.style.height=h.adConfig.display.height+'px',h.productContainer.style.height=h.adConfig.display.height+'px'):'percent'===h.adConfig.display.unit?(h.contentContainer.style.height=a.viewportHeight*(parseInt(h.adConfig.display.height.toString(),10)/100)+'px',h.productContainer.style.height=a.viewportHeight*(parseInt(h.adConfig.display.height.toString(),
10)/100)+'px'):(h.contentContainer.style.height=a.viewportHeight+'px',h.productContainer.style.height=a.viewportHeight+'px'):(h.contentContainer.style.height=a.viewportHeight+'px',h.productContainer.style.height=a.viewportHeight+'px')):h.productContainer.style.height=a.scaledHeight+'px','third-party-ad'===h.initConfig.product.key&&(h.productContainer.style.position='relative',h.productContainer.style.height='auto',h.contentContainer.style.height='auto'))};this.showAdvertisementMessage=function(){h.logger.debug('showAdvertisementMessage');
'string'===typeof h.adConfig.advertisementMessage.contentAbove&&0<h.adConfig.advertisementMessage.contentAbove.trim().length&&(h.advertisementMessageAboveContainer.style.visibility='visible',h.advertisementMessageAboveContainer.style.display='block');'string'===typeof h.adConfig.advertisementMessage.contentBelow&&0<h.adConfig.advertisementMessage.contentBelow.trim().length&&(h.advertisementMessageBelowContainer.style.visibility='visible',h.advertisementMessageBelowContainer.style.display='block')};
this.hideAdvertisementMessage=function(){h.logger.debug('hideAdvertisementMessage');'string'===typeof h.adConfig.advertisementMessage.contentAbove&&0<h.adConfig.advertisementMessage.contentAbove.trim().length&&(h.advertisementMessageAboveContainer.style.visibility='hidden',h.advertisementMessageAboveContainer.style.display='none');'string'===typeof h.adConfig.advertisementMessage.contentBelow&&0<h.adConfig.advertisementMessage.contentBelow.trim().length&&(h.advertisementMessageBelowContainer.style.visibility=
'hidden',h.advertisementMessageBelowContainer.style.display='none')};this.replaceDictionaryMacros=function(a){var b=a,c={unknown:{AdvertisementMessage:'Advertisement',SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'},en:{AdvertisementMessage:'Advertisement',SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'},de:{AdvertisementMessage:'Werbung',SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'},es:{AdvertisementMessage:'Publicidad',
SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'},pl:{AdvertisementMessage:'Reklama',SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'}};Object.keys(c).forEach(function(a){if('object'===typeof c[a]&&a===(h.context.Environment.language||'unknown')){var d=c[a];Object.keys(d).forEach(function(a){'string'===typeof d[a]&&(b=b.replace('@'+a+'@',d[a]))})}});return b};this.context=a;this.logger=a.newLogger('AdPainter');this.rootContainer=b;b.style.fontSize=
'0';a=a.Environment;a.isMRAID&&'webtester.mraid.org'!==a.hostWindow.location.hostname&&(b.style.marginTop='50vh',b.style.transform='translateY(-50%)');this.initConfig=c;this.adConfig=d;this.adVisibilityDetails=e;this.advertisementMessageAboveContainer=m.e(a,'div');this.advertisementMessageAboveWrapper=m.e(a,'div');this.insertAdvertisementMessageAbove();d=m.e(a,'div');d.id='yoc_content_container_'+this.context.productTitlePostfix+'_'+c.meta.adSessionId;d.style.position='relative';d.style.lineHeight=
'0';this.contentContainer=d;b.append(d);b=m.e(a,'div');this.context.backgroundContainer=b;b.id='yoc_background_container_'+this.context.productTitlePostfix+'_'+c.meta.adSessionId;b.style.position='absolute';b.style.top='0px';b.style.left='0px';b.style.width='100%';b.style.height='auto';b.style.display='inline-block';b.style.cursor='pointer';b.style.backgroundColor=this.adConfig.display.bgColor;this.backgroundContainer=b;b=m.e(a,'div');this.context.productContainer=b;b.id='yoc_product_container_'+
this.context.productTitlePostfix+'_'+c.meta.adSessionId;b.style.position='relative';b.style.display='block';b.style.cursor='pointer';b.style.backgroundColor=this.adConfig.display.bgColor;this.productContainer=b;d.append(b);this.advertisementMessageBelowContainer=m.e(a,'div');this.advertisementMessageBelowWrapper=m.e(a,'div');this.insertAdvertisementMessageBelow()};p.prototype.insertAd=function(a,b,c){a=this.rootContainer;var d=this.contentContainer,e=this.backgroundContainer,h=this.productContainer;
this.logger.log('Inserting Ad');a.style.zIndex=this.adConfig.display.zIndex.toString();a.style.position='relative';void 0===this.initConfig.product.key?h.append(b):'yoc-inline-video-ad'===this.initConfig.product.key?(h.append(b),this.updateAdPosition()):'yoc-understitial-ad'===this.initConfig.product.key?(h.append(e),e.append(b),this.updateAdPosition()):('third-party-ad'===this.initConfig.product.key&&(d.style.margin='0px auto',h.style.width='100%',h.style.height='auto'),h.append(b));this.context.Environment.hostDocument.body.append(c)};
p.prototype.close=function(){m.f(this.rootContainer)};p.prototype.revertCursorToDefault=function(){this.productContainer.style.removeProperty('cursor')};p.prototype.insertAdvertisementMessageAbove=function(){var a=this.context.Environment;this.advertisementMessageAboveContainer.id='yoc_advertisement_message_above_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.advertisementMessageAboveContainer.style.cssText='position: relative; top: 0px; left: 0px; width: 100%; height: auto; margin: 0px auto; text-align: center; color: '+
this.adConfig.advertisementMessage.colorText+'; background-color: '+this.adConfig.advertisementMessage.colorBackground+'; box-sizing: content-box; visibility: hidden; display: none; line-height: 1.2';this.advertisementMessageAboveWrapper.id='yoc_advertisement_message_above_wrapper_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.advertisementMessageAboveWrapper.style.cssText='position: absolute; top: 0px; left: 0px; width: 100%; height: auto;';a.isMRAID||(this.advertisementMessageAboveWrapper.innerHTML=
this.replaceDictionaryMacros(this.adConfig.advertisementMessage.contentAbove));this.advertisementMessageAboveContainer.append(this.advertisementMessageAboveWrapper);this.rootContainer.append(this.advertisementMessageAboveContainer)};p.prototype.insertAdvertisementMessageBelow=function(){this.advertisementMessageBelowContainer.id='yoc_advertisement_message_below_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.advertisementMessageBelowContainer.style.cssText='position: relative; top: 0px; left: 0px; width: 100%; height: auto; margin: 0px auto; color: '+
this.adConfig.advertisementMessage.colorText+'; background-color: '+this.adConfig.advertisementMessage.colorBackground+'; box-sizing: content-box; visibility: hidden; display: none;';this.advertisementMessageBelowWrapper.id='yoc_advertisement_message_below_wrapper_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.advertisementMessageBelowWrapper.style.cssText='position: absolute; top: 0px; left: 0px; width: 100%; height: auto;';this.context.Environment.isMRAID||(this.advertisementMessageBelowWrapper.innerHTML=
this.replaceDictionaryMacros(this.adConfig.advertisementMessage.contentBelow));this.advertisementMessageBelowContainer.append(this.advertisementMessageBelowWrapper);this.rootContainer.append(this.advertisementMessageBelowContainer)};var g=function(a){var b=this;this.list=[];this.finishedForced=this.finished=!1;this.onAsset=function(a){var c=b.context.Environment;switch(a.kind){case 'added':b.onAssetAdded(a.message);break;case 'updated':b.onAssetUpdate(a.message);break;case 'finished':if(c.isVideo||
c.isPreloadImage)b.onAssetFinished();else b.finishedForced?b.logger.log("SKIP finished because it's already finished"):(b.logger.log('Finished'),b.onAssetFinished());break;case 'finished-forced':c.isVideo||c.isPreloadImage||(b.finishedForced?b.logger.log("SKIP finished forced because it's already finished"):(b.logger.log('Finished forced'),b.finishedForced=!0,b.onAssetFinished()))}};this.onAssetAdded=function(a){var c=b.list;b.context.messageBus.event.emit({kind:'assetLoading',url:a.asset.url});c.push(a.asset)};
this.onAssetUpdate=function(a){var c=b.context.messageBus.event,d=a.asset.state;a=a.asset.url;'failed-preload'===d?c.emit({kind:'assetFailed',url:a}):'loaded'===d&&(c.emit({kind:'assetLoaded',url:a}),b.readyCheck())};this.onAssetFinished=function(){var a=b.logger;b.context.messageBus.event.emit({kind:'assetAllLoaded'});a.log('finished')};this.onEventAssetLoading=function(a){b.logger.log('start loading',{url:a.url})};this.onEventAssetLoaded=function(a){b.logger.debug('loading finished successful',
{url:a.url})};this.onEventAssetFailed=function(a){b.logger.error('loading failed',{url:a.url})};this.onEventAssetAllLoaded=function(a){b.logger.log('all loaded')};this.context=a;this.logger=a.newLogger('Assets');a.messageBus.asset.on(this.onAsset)};g.prototype.readyCheck=function(){var a=this.context.Environment;!this.finished&&this.isAllAssetsLoaded()?this.context.messageBus.asset.emit({kind:'finished'}):a.isVideo||a.isPreloadImage||this.context.messageBus.asset.emit({kind:'finished-forced'})};g.prototype.isAllAssetsLoaded=
function(){return this.finished=this.list.every(function(a){return'loaded'===a.state})};var k=function(a){var b=this;this.startTime=+new Date;this.onLog=function(a){var c=b.context.Environment,d=m.e(c,'div'),e=m.e(c,'span');e.className='timestamp';e.textContent=((Date.now()-b.startTime)/1E3).toFixed(3);d.className='row '+a.kind;d.append(e);d.append(c.hostDocument.createTextNode(a.message));var f=c.hostDocument.createDocumentFragment();if(a.details){var F=a.details;Object.keys(a.details).forEach(function(a){var b=
m.e(c,'div');b.textContent=a+' = '+F[a];b.className='property';f.append(b)})}d.append(f);b.container.prepend(d)};this.context=a;a=a.Environment;var c=m.e(a,'div');this.container=c;var d=m.e(a,'div');d.append(c);d.id='yoc-debug';m.g(a,'#yoc-debug {\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 200px;\n    max-height: 50vh;\n    overflow: auto;\n    background-color: rgba(255, 255, 255, 0.985);\n    position: fixed;\n    z-index: 1000000000;\n    border-top: 1px solid #cfd0cf;\n    box-sizing: border-box;\n    font-family: Arial, sans-serif;\n    box-shadow: 0 0 1px 0 rgba(207, 208, 207, 0.2);\n}\n\n#yoc-debug .row {\n    margin-bottom: 0.3em;\n}\n\n#yoc-debug .log {\n    color: black;\n}\n\n#yoc-debug .debug {\n    color: grey;\n}\n\n#yoc-debug .warn {\n    color: orange;\n}\n\n#yoc-debug .error {\n    color: red;\n}\n\n#yoc-debug .timestamp {\n    color: #558;\n    font-size: 75%;\n    width: 4em;\n    display: inline-block;\n    text-align: right;\n    padding-right: 0.3em;\n    font-variant-numeric: tabular-nums;\n}\n\n#yoc-debug .property {\n    color: #78a;\n    font-size: 75%;\n    margin-left: 4.3em;\n    white-space: nowrap;\n}\n');
a.hostDocument.body.append(d);this.context.messageBus.logger.on(this.onLog)};a(22);a(23);var b=a(0),c=function(a,b,c,d,e,h,f,g,k,m){m=void 0===m?{externalId:''}:m;this.configuration={externalId:''};this.title=a;this.context=b;this.metrics=c;this.adUnitId=d;this.orderId=e;this.lineItemId=h;this.creativeId=f;this.dealId=g;this.adSessionId=k;this.configuration=m;this.logger=this.context.newLogger('Metrics - '+a)};c.prototype.init=function(){return!1};c.prototype.track=function(a,b,c,d){return!1};c.prototype.verifyEventDetails=
function(a,b,c,d){a={category:a,action:b,label:void 0===c?'':c,value:void 0===d?'':d};''===a.category&&(a.category=this.metrics.initConfigProduct.title+'_'+this.metrics.initConfigProduct.release);if('undefined'===typeof a.action||null===a.action||'string'===typeof a.action&&0===a.action.length)a.action='';if('undefined'===typeof a.label||null===a.label||'string'===typeof a.label&&0===a.label.length)a.label='';'undefined'===typeof a.value||null===a.value||'string'===typeof a.value&&0===a.value.length||
0===parseInt(a.value,10)?a.value='1':a.value=parseInt(a.value,10).toString();return a};var r=function(){return c.apply(this,arguments)||this};$jscomp.inherits(r,c);r.prototype.init=function(){return!0};r.prototype.track=function(a,b,c,d){c=void 0===c?'':c;d=void 0===d?'':d;var e=this.verifyEventDetails(a,b,c,d);e='https://metrics.yoc.com/v1.2/'+this.metrics.normalizeInteger(this.orderId)+'/'+this.metrics.normalizeInteger(this.lineItemId)+'/'+this.metrics.normalizeInteger(this.creativeId)+'/'+this.metrics.normalizeInteger(this.adUnitId)+
'/'+this.metrics.normalizeString(e.category,!0)+'/'+this.metrics.normalizeString(e.action,!0)+'/'+this.metrics.normalizeString(e.label,!0)+'/'+this.metrics.normalizeString(e.value,!0)+'?cb='+this.metrics.normalizeInteger(this.adSessionId)+'_'+this.metrics.normalizeInteger(this.metrics.generateTimestamp())+'&d='+this.metrics.normalizeString(this.dealId,!0);this.metrics.loadTrackingImage(e);this.logger.log('Track',{orderId:this.orderId,lineItemId:this.lineItemId,creativeId:this.creativeId,adUnitId:this.adUnitId,
category:a,action:b,label:c,value:d,trackingImageURL:e});return!0};var t=function(){return c.apply(this,arguments)||this};$jscomp.inherits(t,c);t.prototype.init=function(){return!0};t.prototype.track=function(a,b,c,d){c=void 0===c?'':c;d=void 0===d?'':d;var e=this.verifyEventDetails(a,b,c,d);e='https://metrics.yoc.com/v1.0/'+this.metrics.normalizeInteger(this.orderId)+'/'+this.metrics.normalizeInteger(this.lineItemId)+'/'+this.metrics.normalizeInteger(this.creativeId)+'/'+this.metrics.normalizeInteger(this.adUnitId)+
'/'+this.metrics.normalizeString(e.category,!0)+'/'+this.metrics.normalizeString(e.action,!0)+'/'+this.metrics.normalizeString(e.label,!0)+'/'+this.metrics.normalizeString(e.value,!0)+'?cb='+this.metrics.normalizeInteger(this.adSessionId)+'_'+this.metrics.normalizeInteger(this.metrics.generateTimestamp());this.metrics.loadTrackingImage(e);this.logger.log('Track',{orderId:this.orderId,lineItemId:this.lineItemId,creativeId:this.creativeId,adUnitId:this.adUnitId,category:a,action:b,label:c,value:d,trackingImageURL:e});
return!0};var C=function(){return c.apply(this,arguments)||this};$jscomp.inherits(C,c);C.prototype.init=function(){return!0};C.prototype.track=function(a,b,c,d){c=void 0===c?'':c;d=void 0===d?'':d;var e=this.verifyEventDetails(a,b,c,d);e='https://www.google-analytics.com/collect?v=1&tid='+this.configuration.externalId+'&aip=1&cid='+this.metrics.normalizeInteger(this.adSessionId)+'&t=event&ec='+this.metrics.normalizeString(e.category,!0)+'&ea='+this.metrics.normalizeString(e.action,!0)+'&el='+this.metrics.normalizeString(e.label,
!0)+'&ev='+this.metrics.normalizeInteger(e.value);this.metrics.loadTrackingImage(e);this.logger.log('Track',{category:a,action:b,label:c,value:d,trackingImageURL:e});return!0};var u=function(){return c.apply(this,arguments)||this};$jscomp.inherits(u,c);u.prototype.init=function(){window.YOCEvents=[];return!0};u.prototype.track=function(a,b,c,d){window.YOCEvents.push(b);return!0};l=a(17);var y=a.n(l),x='performance'in window&&'now'in performance&&'timeOrigin'in performance,A=function(a,b,c,e){var f=
this;this.registeredTrackerList=[];this.registeredProviderList=[];this.eventsToTrackOnlyOnce=[];this.onTracking=function(a){var b=f.context.Environment;if('register'===a.kind)if(void 0!==a.tracker)f.logger.log('Registered tracker "'+a.event+'"',{event:a.tracker.event,type:a.tracker.type,content:a.tracker.content,isInvalidated:a.tracker.isInvalidated}),f.registeredTrackerList.push(a.tracker),(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.addVideoTracking(a.tracker.event,a.tracker.content);
else if(void 0!==a.type&&void 0!==a.content)switch(a.type){case 'url':(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.addVideoTracking(a.event,a.content);var c=d(a.event,a.content,a.meta);f.logger.log('Registered new URL tracker "'+a.event+'"',{event:c.event,type:c.type,content:c.content,meta:c.meta,isInvalidated:c.isInvalidated});f.registeredTrackerList.push(c);break;case 'script':(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.addVideoTracking(a.event,a.content);c=q(a.event,a.content,
a.meta);f.logger.log('Registered new script tracker "'+a.event+'"',{event:c.event,type:c.type,content:c.content,meta:c.meta,isInvalidated:c.isInvalidated});f.registeredTrackerList.push(c);break;default:f.logger.error('Can\'t register "'+a.event+'" - unknown Tracker type '+a.type)}else f.logger.error('Can\'t register "'+a.event+'"');else if('send'===a.kind){f.logger.log('Try to send "'+a.event+'"',{details:a.details,meta:a.meta});var e=!1;f.eventsToTrackOnlyOnce.forEach(function(b){b.event===a.event&&
(!0===b.sent?(e=!0,f.logger.log('SKIP sending "'+a.event+"\" because 'ONLY-ONCE check' FAILED",{details:a.details,meta:a.meta})):(f.logger.log('CONTINUE sending "'+a.event+"\" because 'ONLY-ONCE check' passed",{details:a.details,meta:a.meta}),b.sent=!0))});if(e)f.context.messageBus.event.emit({kind:'tracker',event:'error-event-only-once',details:{source:a.event}});else{var h=!1,F=!1;f.registeredTrackerList.forEach(function(c){if(c.event===a.event&&!1===c.isInvalidated){if('undefined'!==typeof a.meta||
'undefined'!==typeof c.meta)if(h=!0,y()(a.meta,c.meta))f.logger.log('Meta: Found matched Tracker "'+a.event+'"',a.meta);else return;h&&(F=!0);var d=f.replaceMacros(c.content,a.details);'script'===c.type&&void 0!==c.content&&''!==c.content&&(f.loadTrackingScript(d),(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.invalidateVideoTracking(c.event,c.content),c.isInvalidated=!0,c.lastUpdate=Date.now(),f.logger.log('Sent script Tracker "'+a.event+'"',{content:d,meta:a.meta,details:a.details}));'url'===
c.type&&void 0!==c.content&&''!==c.content&&(f.loadTrackingImage(d),(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.invalidateVideoTracking(c.event,c.content),c.isInvalidated=!0,c.lastUpdate=Date.now(),f.logger.log('Sent URL Tracker "'+a.event+'"',{content:d,meta:a.meta,details:a.details}))}});if(h&&!F||'undefined'!==typeof a.meta&&!h&&!F)f.logger.log('Skip sending meta event "'+a.event+'"',a.meta);else switch(a.event){case 'served':case 'init':case 'sticky':case 'inline-to-sticky':case 'ready':case 'impression':case 'tpa-portrait-found':case 'tpa-landscape-found':case 'tpa-sticky-found':case 'tpa-hidden-found':case 'tpa-portrait-timeout':case 'tpa-landscape-timeout':case 'tpa-sticky-timeout':case 'tpa-hidden-timeout':case 'takeover':f.trackOnRegisteredProviders('',
a.event,'object'===typeof a.details&&'undefined'!==typeof a.details.msSinceStart?String(a.details.msSinceStart):'');break;case 'tracking-miner':f.trackOnRegisteredProviders('',a.event+'-'+('object'===typeof a.details&&'undefined'!==typeof a.details.countOfTrackersFound?String(a.details.countOfTrackersFound):''));break;case 'viewability':c='object'===typeof a.details&&'undefined'!==typeof a.details.msSinceStart?String(a.details.msSinceStart):'';f.trackOnRegisteredProviders('','general-viewable_ad_impression',
c);f.trackOnRegisteredProviders('',a.event,c);break;case 'click':case 'click-repeated':f.trackOnRegisteredProviders('',a.event,'object'===typeof a.details&&'undefined'!==typeof a.details.source?String(a.details.source):'');break;case 'error-event-only-once':f.trackOnRegisteredProviders('',a.event,'object'===typeof a.details&&'undefined'!==typeof a.details.source?String(a.details.source):'');break;case 'video-progress':f.trackOnRegisteredProviders('',a.event,'object'===typeof a.meta&&'undefined'!==
typeof a.meta.offset?String(a.meta.offset):'');break;case 'video-icon-static':case 'video-icon-iframe':case 'video-icon-html':f.trackOnRegisteredProviders('',a.event,f.initConfigMeta.creativeId);break;case 'video-error':f.trackOnRegisteredProviders('',a.event,(a.details&&a.details.errorCode&&String(a.details.errorCode))+(a.details&&a.details.message?'-'+String(a.details.message):'')||'');break;case 'video-vast-version':case 'mraid-version':f.trackOnRegisteredProviders('',a.event,a.details&&a.details.version&&
String(a.details.version)||'');break;case 'video-vast-duration':case 'video-real-duration':f.trackOnRegisteredProviders('',a.event,a.details&&a.details.duration&&String(a.details.duration)||'');break;case 'video-vast-dimensions':case 'video-real-dimensions':f.trackOnRegisteredProviders('',a.event,a.details&&a.details.dimensions&&String(a.details.dimensions)||'');break;case 'video-has-audio':f.trackOnRegisteredProviders('',a.event,a.details&&a.details.hasAudio?'true':'false');break;case 'video-vast-mediafile-type':f.trackOnRegisteredProviders('',
a.event,a.details&&String(a.details.mime)||'');break;case 'video-canplay-mime':f.trackOnRegisteredProviders('',a.event,a.details&&String(a.details.canplay)||'');break;case 'video-on-play-stats':f.trackOnRegisteredProviders('',a.event,a.details&&String(a.details.stats)||'');break;case 'video-warning-message':case 'video-subtitles-error':f.trackOnRegisteredProviders('',a.event,a.details&&String(a.details.message)||'');break;case 'video-source-type':f.trackOnRegisteredProviders('',a.event,a.details&&
String(a.details.type)||'');break;default:f.trackOnRegisteredProviders('',a.event)}}}};this.loadTrackingScript=function(a){var b=f.context.Environment,c=b.hostDocument.createElement('div');c.innerHTML=a;a=c.querySelectorAll('script');for(var d=0;d<a.length;d++){for(var e=a[d],h=b.hostDocument.createElement('script'),F=0;F<e.attributes.length;F++){var g=e.attributes[F];h.setAttribute(g.name,g.value)}h.appendChild(b.hostDocument.createTextNode(a[d].innerHTML));e.parentElement.insertBefore(h,e);e.remove()}m.f(c);
f.metricsContainer.append(c);return c};this.loadTrackingImage=function(a){a=new m.b(f.context,a,!1);m.f(a.node);f.metricsContainer.append(a.node);return a};this.loadTrackingIframe=function(a){a=new m.a(f.context,a,!1);m.f(a.node);f.metricsContainer.append(a.node);return a};this.generateCachebuster=function(){return f.normalizeInteger(''+f.currentTime()+String(1E8*Math.random()))};this.generateTimestamp=function(){return f.normalizeInteger(''+f.currentTime())};this.normalizeString=function(a,b){b=
void 0===b?!1:b;var c='';'string'!==typeof a&&(a=String(a));for(var d=0;d<a.length;d++)c=-1<'_-abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'.indexOf(a.charAt(d))?c+a.charAt(d):c+'_';b&&0===c.length&&(c='undefined');return c};this.normalizeInteger=function(a){var b='';'string'!==typeof a&&(a=String(a));for(var c=0;c<a.length;c++)-1<'0123456789'.indexOf(a.charAt(c))&&(b+=a.charAt(c));0===b.length&&(b='0');return b};this.currentTime=function(){return x?performance.timeOrigin+performance.now():
Date.now()};this.context=a;this.logger=this.context.newLogger('Metrics');this.initConfigMeta=c;this.initConfigProduct=e;this.eventsToTrackOnlyOnce.push({event:'init',sent:!1},{event:'ready',sent:!1},{event:'impression',sent:!1},{event:'viewability',sent:!1},{event:'video-start',sent:!1},{event:'video-firstquartile',sent:!1},{event:'video-midpoint',sent:!1},{event:'video-thirdquartile',sent:!1},{event:'video-complete',sent:!1},{event:'video-viewable_impression',sent:!1});this.metricsContainer=this.context.Environment.hostDocument.createElement('div');
this.metricsContainer.id='yoc_metrics_container_'+this.context.productTitlePostfix+'_'+this.initConfigMeta.adSessionId;m.f(this.metricsContainer);b.append(this.metricsContainer);this.context.messageBus.tracking.on(this.onTracking)};A.prototype.registerProvider=function(a,b,c){c=void 0===c?{externalId:''}:c;switch(b){case 'yoc-metrics':c=new t(a,this.context,this,this.initConfigMeta.adUnitId,this.initConfigMeta.orderId,this.initConfigMeta.lineItemId,this.initConfigMeta.creativeId,this.initConfigMeta.dealId,
this.initConfigMeta.adSessionId,c);c.init();this.registeredProviderList.push(c);this.logger.log('Registered Metrics Provider "'+a+'" ('+b+')');break;case 'yoc-metrics-visx':c=new r(a,this.context,this,this.initConfigMeta.adUnitId,this.initConfigMeta.orderId,this.initConfigMeta.lineItemId,this.initConfigMeta.creativeId,this.initConfigMeta.dealId,this.initConfigMeta.adSessionId,c);c.init();this.registeredProviderList.push(c);this.logger.log('Registered Metrics Provider "'+a+'" ('+b+')');break;case 'google-analytics':c=
new C(a,this.context,this,this.initConfigMeta.adUnitId,this.initConfigMeta.orderId,this.initConfigMeta.lineItemId,this.initConfigMeta.creativeId,this.initConfigMeta.dealId,this.initConfigMeta.adSessionId,c);c.init();this.registeredProviderList.push(c);this.logger.log('Registered Metrics Provider "'+a+'" ('+b+')');break;case 'test':c=new u(a,this.context,this,this.initConfigMeta.adUnitId,this.initConfigMeta.orderId,this.initConfigMeta.lineItemId,this.initConfigMeta.creativeId,this.initConfigMeta.dealId,
this.initConfigMeta.adSessionId,c);c.init();this.registeredProviderList.push(c);this.logger.log('Registered Metrics Provider "'+a+'" ('+b+')');break;default:return this.logger.error('Can\'t register unknown Metrics Provider "'+a+'" ('+b+')'),!1}return!0};A.prototype.trackOnRegisteredProviders=function(a,b,c,d){var e=this;c=void 0===c?'':c;d=void 0===d?'':d;var f=!0;this.registeredProviderList.forEach(function(h){h.track(a,b,c,d)||(e.logger.error('Track event failed ('+h.title+')',{category:a,action:b,
label:c,value:d}),f=!1)});return f};A.prototype.replaceMacros=function(a,b){var c=a,d=this.generateTimestamp();c=c.replace(new RegExp(decodeURIComponent('%25%25CACHEBUSTER%25%25'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%25%25cachebuster%25%25'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%25%25CACHEBUSTING%25%25'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%25%25cachebusting%25%25'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%5C%5BTIMESTAMP%5C%5D'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%5C%5Btimestamp%5C%5D'),
'g'),d);c=c.replace(/([\?&]correlator=)(?:\[placeholder\])/g,function(a,b){return b+d}).replace(/(\?|&)(correlator=)(&|$)/,function(a,b,c,e){return''+b+c+d+e});c=c.replace(/@PublisherHost@/g,this.context.Environment.publisherHost.value);if(b){var e=function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1')};Object.keys(b).forEach(function(a){c=c.replace(new RegExp(e('['+a.toLowerCase()+']'),'g'),b[a]);c=c.replace(new RegExp(e('['+a.toUpperCase()+']'),'g'),b[a]);c=c.replace(new RegExp(e('%%'+a.toLowerCase()+
'%%'),'g'),b[a]);c=c.replace(new RegExp(e('%%'+a.toUpperCase()+'%%'),'g'),b[a])})}return c};var E=a(5),w=function(a,b){this.messageBus=a;this.prefix=void 0===b?'':b};w.prototype.extend=function(a){return new w(this.messageBus,a)};w.prototype.emitLogMessage=function(a,b,c){var d=this.prefix;this.messageBus.logger.emit({kind:a,message:''!==d?d+': '+b:b,details:c})};w.prototype.debug=function(a,b){this.emitLogMessage('debug',a,b)};w.prototype.log=function(a,b){this.emitLogMessage('log',a,b)};w.prototype.warn=
function(a,b){this.emitLogMessage('warn',a,b)};w.prototype.error=function(a,b){this.emitLogMessage('error',a,b)};var z=function(a){return function(b){return new w(a,b)}},G=a(11),e=a(3),P=a(14),D=function(){this.deliveryContainer=null;this.usedHeight=this.usedWidth=this.updatedCreativeHeight=this.updatedCreativeWidth=this.scrollLeft=this.scrollTop=this.availableWidth=this.viewportHeight=this.viewportWidth=0;this.usedScaleFactor=1;this.scaledHeight=this.scaledWidth=0;this.isError=this.supportClipPath=
this.isUnderstitial=this.isSticky=!1;this.logger=this.context=0;this.creativeOption=this.deviceOrientationOriginal=this.deviceOrientation='portrait';this.isBrowserSafari=this.isDeviceDesktop=!1;this.isPortrait=!0;this.isLandscape=!1;this.isDealPricingTypeUnknown=!0;this.isVCPM=this.isDealPricingTypeVCPM=this.isDealPricingTypeCPM=!1;this.isPreloadImage=!0;this.isAutoResize=this.isVideo=this.isMRAID=!1;this.bundle='';this.ownWindow=window;this.ownDocument=document;var a=Object(P.a)(),b=a.wnd;this.hostWindow=
b;this.hostDocument=a.doc;var c={insideAmp:Object(G.c)(this.hostWindow),escapableToTopWindow:this.hostWindow===window.top,insideSameOriginFrame:this.hostWindow!==window,facebookInAppBrowser:/FBAN\/FBIOS|FBAN\/FB4A/.test(navigator.userAgent)};this.delivery=c;var d=null;a=null;if(c.insideAmp)d=Object(G.a)(b),a=Object(G.b)(b);else try{var e=window.top.location;d=e.host;a=e.href}catch(h){}e={trusted:null!==d,value:null!==d?d:b.location.host};b={trusted:null!==a,value:null!==a?a:b.location.href};this.publisherHost=
e;this.publisherHref=b;this.language=null;a=navigator.languages&&navigator.languages[0]||navigator.language;'string'===typeof a&&(this.language=a.toLowerCase().slice(0,2));this.isLogMode=/YOCAdLog|yoc_log/.test(b.value);this.isDebugMode=/YOCAdDebug|yoc_debug/.test(b.value);this.isDemoMode=/YOCAdDemo|yoc_demo/.test(b.value)};D.prototype.init=function(a,b,c,d){this.context=a;this.logger=a.newLogger('Environment');this.adConfig=c;this.initConfig=b;this.bundle=d;if(a=c.troubleshooting)this.isLogMode=
!!a.log||this.isLogMode,this.isDemoMode=!!a.demo||this.isDemoMode,this.isDebugMode=!!a.debug||this.isDebugMode;'creative-video'===this.bundle&&(this.isVideo=!0);this.isDealPricingTypeUnknown=!0;this.isDealPricingTypeVCPM=this.isDealPricingTypeCPM=!1;'CPM'===this.initConfig.meta.dealPricingType?(this.isDealPricingTypeUnknown=!1,this.isDealPricingTypeCPM=!0):'vCPM'===this.initConfig.meta.dealPricingType&&(this.isDealPricingTypeUnknown=!1,this.isDealPricingTypeVCPM=!0);this.isVCPM=this.adConfig.tracking.vCPMEnabled||
this.isDealPricingTypeVCPM||'viewability'===this.adConfig.tracking.countImpressionOn||'viewability'===this.adConfig.tracking.countVPAIDImpressionOn;this.isPreloadImage=this.adConfig.preload.image;try{this.determineBrowserDetails()}catch(h){this.isError=!0,this.logger.error(h)}this.supportClipPath=!1;try{var e=this.hostDocument.createElement('div');'undefined'!==typeof e.style&&'undefined'!==typeof e.style.clipPath&&''===e.style.clipPath&&(this.supportClipPath=!0);this.supportClipPath?this.logger.log('CSS clip-path - supported'):
this.logger.log('CSS clip-path - NOT supported')}catch(h){this.isError=!0,this.logger.error(h)}if('understitial'===this.adConfig.display.effect||'understitialMini'===this.adConfig.display.effect||'understitialMiniToSticky'===this.adConfig.display.effect||'understitialSizeSmall'===this.adConfig.display.effect||'understitialSizeMedium'===this.adConfig.display.effect||'understitialSizeLarge'===this.adConfig.display.effect||'understitialSizeCustom'===this.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===
this.adConfig.display.effect||'takeoverUnderstitialMiniAndHidden'===this.adConfig.display.effect)this.isUnderstitial=!0;'scale'===this.adConfig.display.responsive.mode&&('boolean'===typeof this.adConfig.display.responsive.autoResize?this.isAutoResize=this.adConfig.display.responsive.autoResize:'boolean'!==typeof this.adConfig.display.responsive.autoResize&&(this.isAutoResize=!0));try{this.determineDeliveryContainer(),this.addContainers(),this.context.rootContainer=this.rootContainer,this.determineAvailableWidth(),
this.determineViewportDimension(),this.determineScrollPosition(),this.determineOrientation(this.hostWindow),this.calculateAdDimension()}catch(h){this.isError=!0,this.logger.error(h)}};D.prototype.determineDeliveryContainer=function(){if(this.delivery.insideSameOriginFrame){for(var a=this.ownWindow,b=null;a!==window.top;)try{for(var c=a.parent,d=a.parent.document.getElementsByTagName('iframe'),e=0;e<d.length;e++)d[e].contentWindow===a&&(b=d[e]);a=c}catch(h){break}if(this.deliveryContainer=b)b.style.setProperty('width',
'0','important'),b.style.setProperty('height','0','important'),b.style.setProperty('display','none','important');else throw Error('Error during determining the iframe for the delivery');}else if(a=this.initConfig.placement.containerId,this.deliveryContainer=b=this.hostDocument.getElementById(a),!b)throw Error('Can\'t find container "'+a+'"');};D.prototype.addContainers=function(){var a=this.deliveryContainer,b=this.hostDocument,c=this.initConfig.meta.adSessionId;if(a&&a.parentElement){var d=b.createElement('div');
d.id='yoc_environment_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;d.style.setProperty('width','100%','important');d.style.setProperty('height','0','important');a.parentElement.insertBefore(d,a);this.environmentContainer=d;b=b.createElement('div');b.id='yoc_root_container_'+c;a.parentElement.insertBefore(b,a);this.rootContainer=b}};D.prototype.determineBrowserDetails=function(){try{var a=this.hostWindow.navigator.userAgent,b='string'===typeof a&&0<a.length&&-1!==
a.toLowerCase().indexOf('windows')&&-1===a.toLowerCase().indexOf('phone'),c='string'===typeof a&&0<a.length&&-1!==a.toLowerCase().indexOf('macintosh'),d='string'===typeof a&&0<a.length&&-1!==a.toLowerCase().indexOf('linux')&&-1===a.toLowerCase().indexOf('android'),e='string'===typeof a&&0<a.length&&-1!==a.toLowerCase().indexOf('playstation'),f='string'===typeof a&&0<a.length&&-1!==a.toLowerCase().indexOf('xbox');this.isDeviceDesktop=b||c||d||e||f;this.isBrowserSafari=/^((?!chrome|android).)*safari/i.test(a)}catch(V){}};
D.prototype.determineAvailableWidth=function(){this.availableWidth=this.environmentContainer.offsetWidth};D.prototype.determineViewportDimension=function(){var a=this.hostWindow,b=a.innerWidth;a=a.innerHeight;var c=this.hostDocument.documentElement,d=c.clientWidth;c=c.clientHeight;if(this.isMRAID){var f=Object(e.e)();if(f){this.viewportWidth=f.width;this.viewportHeight=f.height;return}}this.viewportWidth=d?Math.min(b,d):b;this.viewportHeight=c?Math.min(a,c):a};D.prototype.determineScrollPosition=
function(){this.scrollTop=this.hostWindow.pageYOffset||this.hostWindow.scrollY||this.hostDocument.body.scrollTop;this.scrollLeft=this.hostWindow.pageXOffset||this.hostWindow.scrollX||this.hostDocument.body.scrollLeft};D.prototype.calculateAdDimension=function(){if('hidden'===this.initConfig.layout)this.usedHeight=this.usedWidth=0;else{var a=parseInt(this.viewportWidth.toString(),10),b=parseInt(this.viewportHeight.toString(),10);!this.isSticky&&0<this.adConfig.creative.marginTop&&(b-=this.adConfig.creative.marginTop);
!this.isSticky&&0<this.adConfig.creative.marginBottom&&(b-=this.adConfig.creative.marginBottom);this.usedWidth=this.initConfig.placement.width;this.usedHeight=this.initConfig.placement.height;if(0<this.adConfig.display.width||0<this.adConfig.display.height)this.usedWidth=this.adConfig.display.width,this.usedHeight=this.adConfig.display.height;if(0<this.updatedCreativeWidth||0<this.updatedCreativeHeight)this.usedWidth=this.updatedCreativeWidth,this.usedHeight=this.updatedCreativeHeight;this.usedScaleFactor=
1;if('scale'===this.adConfig.display.responsive.mode||'noScale'===this.adConfig.display.responsive.mode||this.isSticky){if(this.isSticky){var c=parseInt(this.usedHeight.toString(),10),d=parseInt(this.usedWidth.toString(),10);this.usedScaleFactor=Math.min(a/c,this.adConfig.display.stickyMaxHeightPercentage/100*b/c,(a-2*this.adConfig.display.stickyMargin)/d)}else if('scale'===this.adConfig.display.responsive.mode&&this.adConfig.display.responsive.followLayout)if(this.isPortrait){if(this.usedScaleFactor=
parseInt(this.availableWidth.toString(10),10)/parseInt(this.usedWidth.toString(10),10),Math.floor(this.usedWidth*this.usedScaleFactor)>this.availableWidth||Math.floor(this.usedHeight*this.usedScaleFactor)>b)this.usedScaleFactor=parseInt(b.toString(10),10)/parseInt(this.usedHeight.toString(10),10)}else{if(this.usedScaleFactor=parseInt(b.toString(10),10)/parseInt(this.usedHeight.toString(10),10),Math.floor(this.usedWidth*this.usedScaleFactor)>this.availableWidth||Math.floor(this.usedHeight*this.usedScaleFactor)>
b)this.usedScaleFactor=parseInt(this.availableWidth.toString(10),10)/parseInt(this.usedWidth.toString(10),10)}else if(this.isPortrait){if(this.usedScaleFactor=parseInt(this.viewportWidth.toString(10),10)/parseInt(this.usedWidth.toString(10),10),Math.floor(this.usedWidth*this.usedScaleFactor)>this.viewportWidth||Math.floor(this.usedHeight*this.usedScaleFactor)>b)this.usedScaleFactor=parseInt(b.toString(10),10)/parseInt(this.usedHeight.toString(10),10)}else if(this.usedScaleFactor=parseInt(b.toString(10),
10)/parseInt(this.usedHeight.toString(10),10),Math.floor(this.usedWidth*this.usedScaleFactor)>this.viewportWidth||Math.floor(this.usedHeight*this.usedScaleFactor)>b)this.usedScaleFactor=parseInt(this.viewportWidth.toString(10),10)/parseInt(this.usedWidth.toString(10),10);this.scaledWidth=Math.floor(this.usedWidth*this.usedScaleFactor);this.scaledHeight=Math.floor(this.usedHeight*this.usedScaleFactor);a=this.adConfig.display.responsive;'scale'===a.mode&&0<a.maximumWidth&&0<a.maximumHeight&&(this.scaledWidth>
a.maximumWidth&&(b=a.maximumWidth/this.scaledWidth,this.scaledWidth=a.maximumWidth,this.scaledHeight*=b,this.usedScaleFactor*=b),this.scaledHeight>a.maximumHeight&&(b=a.maximumHeight/this.scaledHeight,this.scaledHeight=a.maximumHeight,this.scaledWidth*=b,this.usedScaleFactor*=b));'noScale'===this.adConfig.display.responsive.mode&&(this.usedWidth=this.scaledWidth,this.usedHeight=this.scaledHeight,this.usedScaleFactor=1)}else this.scaledWidth=this.usedWidth,this.scaledHeight=this.usedHeight}this.logger.debug('calculateAdDimensions',
{used:this.usedWidth+'x'+this.usedHeight,scaled:this.scaledWidth+'x'+this.scaledHeight,updatedCreative:this.updatedCreativeWidth+'x'+this.updatedCreativeHeight})};D.prototype.onOrientationChange=function(a){this.determineOrientation(this.hostWindow);this.determineAvailableWidth();this.determineViewportDimension();this.determineScrollPosition();this.calculateAdDimension()};D.prototype.onResize=function(a){this.determineOrientation(this.hostWindow);this.determineAvailableWidth();this.determineViewportDimension();
this.determineScrollPosition();this.calculateAdDimension()};D.prototype.onSticky=function(a){this.isSticky=!0;a&&(this.creativeOption=a);this.determineAvailableWidth();this.determineViewportDimension();this.determineScrollPosition();this.calculateAdDimension()};D.prototype.determineOrientation=function(a){var b=a.screen,c;try{if(this.isMRAID){var d=Object(e.d)();d&&(c=d.height>=d.width?0:90)}'number'!==typeof c&&('undefined'!==typeof a.orientation?c=a.orientation:'undefined'!==typeof b&&'undefined'!==
typeof b.orientation&&'undefined'!==typeof b.orientation.type&&'portrait-primary'===b.orientation.type?c=0:'undefined'!==typeof b&&'undefined'!==typeof b.orientation&&'undefined'!==typeof b.orientation.type&&'portrait-secondary'===b.orientation.type?c=180:'undefined'!==typeof b&&'undefined'!==typeof b.orientation&&'undefined'!==typeof b.orientation.type&&'landscape-primary'===b.orientation.type?c=90:'undefined'!==typeof b&&'undefined'!==typeof b.orientation&&'undefined'!==typeof b.orientation.type&&
'landscape-secondary'===b.orientation.type?c=270:'undefined'!==typeof b&&'undefined'!==typeof b.orientation&&'undefined'!==typeof b.orientation.angle&&(c=b.orientation.angle),null===c&&this.viewportWidth<this.viewportHeight&&(c=0),null===c&&this.viewportWidth>this.viewportHeight&&(c=90),null===c&&(c=0),this.isDeviceDesktop&&this.viewportWidth<this.viewportHeight&&(c=0),this.isDeviceDesktop&&this.viewportWidth>this.viewportHeight&&(c=90),c=c?Number(c):void 0)}catch(U){c=0}this.isPortrait='undefined'===
typeof c||null===c||-1===c||0===c||180===c||-180===c?!0:!1;this.isLandscape=-90===c||90===c||270===c||-270===c?!0:!1;this.deviceOrientation='portrait';this.isLandscape&&(this.deviceOrientation='landscape');this.deviceOrientationOriginal=this.deviceOrientation;this.isSticky&&'sticky'===this.creativeOption||(this.creativeOption=this.deviceOrientation);if(this.initConfig.meta.visx&&!this.isPortrait&&(!this.adConfig.troubleshooting||this.adConfig.troubleshooting&&this.adConfig.troubleshooting.useForcePortraitMode||
this.adConfig.troubleshooting&&!1!==this.adConfig.troubleshooting.useForcePortraitMode)||!this.isPortrait&&'undefined'!==typeof this.adConfig.creative.landscape&&'disabled'===this.adConfig.creative.landscape.mode)this.logger.log('Force portrait mode'),this.isPortrait=!0,this.isLandscape=!1,this.deviceOrientation='portrait',this.isSticky&&'sticky'===this.creativeOption||(this.creativeOption=this.deviceOrientation);return!0};var K=function(a){this.pageVisibilityEventListenerName=this.pageVisibilityObjectName=
'';this.eventListeners=[];this.Environment=a;'undefined'!==typeof a.hostDocument.hidden?(this.pageVisibilityObjectName='hidden',this.pageVisibilityEventListenerName='visibilitychange'):'undefined'!==typeof a.hostDocument.msHidden?(this.pageVisibilityObjectName='msHidden',this.pageVisibilityEventListenerName='msvisibilitychange'):'undefined'!==typeof a.hostDocument.webkitHidden&&(this.pageVisibilityObjectName='webkitHidden',this.pageVisibilityEventListenerName='webkitvisibilitychange')};K.prototype.add=
function(a,b,c,d){c=void 0===c?100:c;d=void 0===d?!0:d;this.Environment.hostWindow.addEventListener(a,0<c?v(b,c):b,{passive:d});this.eventListeners.push({type:a,listener:b})};K.prototype.remove=function(a,b){var c=this;a&&b?this.Environment.hostWindow.removeEventListener(a,b):this.eventListeners.forEach(function(a){c.Environment.hostWindow.removeEventListener(a.type,a.listener)})};var L=function(a){this.productTitlePostfix=a;this.messageBus={tracking:new E.a,logger:new E.a,event:new E.a,asset:new E.a,
clickOverlay:new E.a};this.Environment=a=new D;this.Listener=new K(a);this.trackingMiner={portrait:{visibleCreative:!1,hiddenCreative:!1},landscape:{visibleCreative:!1,hiddenCreative:!1},sticky:{visibleCreative:!1,hiddenCreative:!1},hidden:{visibleCreative:!1,hiddenCreative:!1}}};L.prototype.newLogger=function(a){return z(this.messageBus)(a)};L.prototype.setupClickHandler=function(a,b){a.addEventListener('click',b,!1)};var H=a(8),J=function(a,b,c,d){var e=this;this.elements=[];this.onEvent=function(a){switch(a.kind){case 'add-element':e.add(a);
break;case 'remove-element':e.remove(a.element);break;case 'refresh':e.refresh()}};this.context=a;this.initConfig=b;this.adConfig=c;this.logger=a.newLogger('ClickOverlay');this.productContainer=d;this.context.messageBus.clickOverlay.on(this.onEvent)};J.prototype.add=function(a){this.logger.debug('add');this.elements.push(a);this.refresh()};J.prototype.remove=function(a){this.logger.debug('remove');this.elements=this.elements.filter(function(b){(b=b.element!==a)||a.remove();return b});this.refresh()};
J.prototype.getElements=function(a){return this.elements.filter(function(b){return b.preferredPosition===a}).sort(function(a,b){return(b.priority||0)-(a.priority||0)})};J.prototype.refresh=function(){var a=this,b=this.context.Environment,c=1;400>b.scaledWidth&&(c=b.scaledWidth/400);var d=0;b.isSticky||(d='scale'!==this.adConfig.display.responsive.mode||this.adConfig.display.responsive.followLayout?'scale'===this.adConfig.display.responsive.mode&&this.adConfig.display.responsive.followLayout?(b.availableWidth-
b.scaledWidth)/2:(b.availableWidth-b.usedWidth)/2:(b.viewportWidth-b.scaledWidth)/2);this.leftTops.forEach(function(e){var f=e.element.style;f.position='absolute';f.left=(e.margin?Object(H.a)(e.margin.left)?0:e.margin.left*b.usedScaleFactor+20*c:20*c)+d+'px';f.top=(e.margin?Object(H.a)(e.margin.top)?0:e.margin.top*b.usedScaleFactor+20*c:20*c)+'px';f.zIndex='2';f.transformOrigin='left top';f.transform='scale('+c+')';('undefined'!==typeof e.parent?e.parent:a.productContainer).append(e.element)});this.leftBottoms.forEach(function(e){var f=
e.element.style;f.position='absolute';f.left=(e.margin?Object(H.a)(e.margin.left)?0:e.margin.left*b.usedScaleFactor+20*c:20*c)+d+'px';f.bottom=(e.margin?Object(H.a)(e.margin.bottom)?0:e.margin.bottom*b.usedScaleFactor+20*c:20*c)+'px';f.zIndex='2';f.transformOrigin='left bottom';f.transform='scale('+c+')';('undefined'!==typeof e.parent?e.parent:a.productContainer).append(e.element)});this.rightTops.forEach(function(e){var f=e.element.style;f.position='absolute';f.right=(e.margin?Object(H.a)(e.margin.right)?
0:e.margin.right*b.usedScaleFactor+20*c:20*c)+d+'px';f.top=(e.margin?Object(H.a)(e.margin.top)?0:e.margin.top*b.usedScaleFactor+20*c:20*c)+'px';f.zIndex='2';f.transformOrigin='right top';f.transform='scale('+c+')';('undefined'!==typeof e.parent?e.parent:a.productContainer).append(e.element)});this.rightBottoms.forEach(function(e){var f=e.element.style;f.position='absolute';f.right=(e.margin?Object(H.a)(e.margin.right)?0:e.margin.right*b.usedScaleFactor+20*c:20*c)+d+'px';f.bottom=(e.margin?Object(H.a)(e.margin.bottom)?
0:e.margin.bottom*b.usedScaleFactor+20*c:20*c)+'px';f.zIndex='2';f.transformOrigin='right bottom';f.transform='scale('+c+')';('undefined'!==typeof e.parent?e.parent:a.productContainer).append(e.element)})};$jscomp.global.Object.defineProperties(J.prototype,{leftTops:{configurable:!0,enumerable:!0,get:function(){return this.getElements('top-left')}},leftBottoms:{configurable:!0,enumerable:!0,get:function(){return this.getElements('bottom-left')}},rightTops:{configurable:!0,enumerable:!0,get:function(){return this.getElements('top-right')}},
rightBottoms:{configurable:!0,enumerable:!0,get:function(){return this.getElements('bottom-right')}}});var M=a(10),N=a(15),I=function(a,b,c){this.context=a;this.logger=this.context.newLogger('Troubleshooting');this.initConfig=b;this.adConfig=c;a=a.Environment;Object(N.a)(a.hostWindow);this.space=a.hostWindow.__YOC.session[this.initConfig.meta.adSessionId].troubleshootingLog=[];this.logList=a.hostWindow.__YOC.session[this.initConfig.meta.adSessionId].troubleshootingLog.ll=[]};I.prototype.check=function(a,
b,c){this.space[a]||(this.space[a]=[]);this.space[a][b]||(this.space[a][b]=[]);'undefined'===typeof this.space[a][b][c]&&(this.space[a][b][c]=[])};I.prototype.add=function(a,b,c,d){this.check(a,b,c);this.space[a][b][c].push({i:!1,v:d})};I.prototype.addVideoTracking=function(a,b){this.add('v','vt',a,b)};I.prototype.invalidate=function(a,b,c,d){var e=this;this.check(a,b,c);Object.keys(this.space[a][b][c]).forEach(function(f){e.space[a][b][c][f].v===d&&(e.space[a][b][c][f].i=!0,e.log())})};I.prototype.invalidateVideoTracking=
function(a,b){this.invalidate('v','vt',a,b)};I.prototype.log=function(a){var b=this;a=void 0===a?!1:a;var c=this.context.Environment;this.logList=c.hostWindow.__YOC.session[this.initConfig.meta.adSessionId].troubleshootingLog=[];c.hostWindow.__YOC.session[this.initConfig.meta.adSessionId].troubleshootingLog.lls='';Object.keys(this.space).forEach(function(a){'ll'!==a&&'lls'!==a&&Object.keys(b.space[a]).forEach(function(d){Object.keys(b.space[a][d]).forEach(function(e){var f=0;Object.keys(b.space[a][d][e]).forEach(function(c){if('v'!==
a||'vt'!==d||'string'!==typeof b.space[a][d][e][c].v||0!==b.space[a][d][e][c].v.length)b.logList[a+'.'+d+'.'+e+'.'+c]=b.space[a][d][e][c],!0===b.space[a][d][e][c].i&&f++});0<f&&(c.hostWindow.__YOC.session[b.initConfig.meta.adSessionId].troubleshootingLog.lls+=(0<c.hostWindow.__YOC.session[b.initConfig.meta.adSessionId].troubleshootingLog.lls.length?', ':'')+a+'.'+d+'.'+e+':'+f)})})});a&&console.table(this.logList)};var R=a(13),B=function(a){var b=this,c=a.bundle,d=a.initConfig,f=a.adConfigDefault,
g=a.adConfigSpecific,k=a.adAssetList;a=a.mraidInfo;this.adPainter=this.adConfig=this.initConfig=this.logger=this.context=null;this.adAssetList=[];this.isImage=!1;this.adNodeHidden=this.adNode=this.assets=this.rootContainer=this.containerId=null;this.trackerSync=[];this.trackerImpression=[];this.trackerViewability=[];this.trackerClick=[];this.visibilityHandlerList=[];this.visibilityHandlerDependsOnImpressionList=[];this.visibilityHandlerViewabilityGroupList=[];this.isVPAID=!1;this.trackerRedirect=
[];this.clickOverlay=null;this.trackerRedirectHasBeenSetUp=!1;this.adConfigSpecific='';this.snapInWasUsed=!1;this.snapInEventListenerOnTouchStart=function(a){};this.snapInEventListenerOnTouchMove=function(a){};this.snapInEventListenerOnTouchEnd=function(a){};this.snapInEventListenerOnScroll=function(a){};this.takeoverTarget=null;this.takeoverIsShown=!1;this.demoContainer=null;this.wasClicked=!1;this.onLog=function(a){if(!1!==b.context.Environment.isLogMode||'debug'!==a.kind&&'log'!==a.kind)b.onLogger(a)};
this.onEvent=function(a){var c=b.context.newLogger('Ad.onEvent()');switch(a.kind){case 'assetLoading':b.assets.onEventAssetLoading(a);break;case 'assetLoaded':b.assets.onEventAssetLoaded(a);break;case 'assetFailed':b.assets.onEventAssetFailed(a);break;case 'assetAllLoaded':b.assets.onEventAssetAllLoaded(a);b.run();break;case 'tracker':var d=!1;'undefined'!==typeof a.details&&'boolean'===typeof a.details.wasRedirected&&a.details.wasRedirected||b.trackerRedirect.forEach(function(b){b.event===a.event&&
(d=!0,c.log('SKIP processing event "'+a.event+'" because of enabled event redirect',{event:b.event,trackOn:b.trackOn}))});if(!d)switch(a.event){case 'viewability':n({kind:'viewability-triggered'});b.context.messageBus.tracking.emit({kind:'send',event:a.event,meta:a.meta,details:a.details});break;default:b.context.messageBus.tracking.emit({kind:'send',event:a.event,meta:a.meta,details:a.details})}b.trackerRedirect.forEach(function(d){d.trackOn===a.event&&(c.log('Process additional event "'+d.event+
'" on event "'+a.event+'" because of enabled event redirect',{event:d.event,trackOn:d.trackOn}),b.context.messageBus.event.emit({kind:'tracker',event:d.event,details:{wasRedirected:!0}}))});break;case 'close':b.visibilityHandlerList.forEach(function(a){a.disable()});b.visibilityHandlerDependsOnImpressionList.forEach(function(a){a.disable()});b.adPainter.close();b.context.Environment.isMRAID&&Object(e.j)();b.dispose();break;case 'revert-cursor':b.adPainter.revertCursorToDefault();break;case 'show-advertisment-message':b.adPainter.showAdvertisementMessage();
b.adPainter.updateAdPosition(b.adVisibilityDetails);break;case 'setup-tracker-redirect':b.setupTrackerRedirection(a.type);break;case 'shown':b.context.messageBus.event.emit({kind:'tracker',event:'shown'});break;case 'assets-ready-check':b.assets.readyCheck()}};this.processSnapIn=function(a){a=void 0===a?b.adVisibilityDetails:a;var c=b.context.Environment;b.adVisibilityDetails=a;'enabled'===b.adConfig.snapIn.mode&&0<b.adConfig.snapIn.threshold&&100*b.adVisibilityDetails.visibilityPercentage>b.adConfig.snapIn.threshold&&
!b.snapInWasUsed&&(b.snapInWasUsed=!0,b.logger.log('Snap in - visible for '+100*b.adVisibilityDetails.visibilityPercentage+'% (Position: '+b.adVisibilityDetails.top+'x'+b.adVisibilityDetails.left+' - Dimension: '+b.adVisibilityDetails.width+'x'+b.adVisibilityDetails.height+')'),c.determineScrollPosition(),c.hostWindow.scrollTo({top:c.scrollTop+(b.adVisibilityDetails.height-b.adVisibilityDetails.visibilityPercentage*b.adVisibilityDetails.height),left:c.scrollLeft,behavior:'smooth'}),0<b.adConfig.snapIn.lockTime&&
b.processSnapInLock())};this.processSnapInLock=function(){'enabled'===b.adConfig.snapIn.mode&&(b.logger.log('Snap in - LOCK'),b.snapInEventListenerOnTouchStart=function(a){a.preventDefault()},b.adPainter.rootContainer.addEventListener('touchstart',b.snapInEventListenerOnTouchStart),b.snapInEventListenerOnTouchMove=function(a){a.preventDefault()},b.adPainter.rootContainer.addEventListener('touchmove',b.snapInEventListenerOnTouchMove),b.snapInEventListenerOnTouchEnd=function(a){a.preventDefault()},
b.adPainter.rootContainer.addEventListener('touchend',b.snapInEventListenerOnTouchEnd),b.context.Environment.hostWindow.setTimeout(function(){b.processSnapInUnlock()},b.adConfig.snapIn.lockTime))};this.processSnapInUnlock=function(){'enabled'===b.adConfig.snapIn.mode&&(b.logger.log('Snap in - UNLOCK'),b.adPainter.rootContainer.removeEventListener('touchstart',b.snapInEventListenerOnTouchStart),b.adPainter.rootContainer.removeEventListener('touchmove',b.snapInEventListenerOnTouchMove),b.adPainter.rootContainer.removeEventListener('touchend',
b.snapInEventListenerOnTouchEnd))};var m=new L(d.product.title.replace(/ /g,'')),l=m.Environment;this.context=m;a&&(l.isMRAID=!0,l.MRAIDPlacement=a.placement,l.MRAIDVersion=a.version,this.context.messageBus.event.emit({kind:'tracker',event:'mraid-version',details:{version:a.version}}));this.logger=this.context.newLogger('AdCore');this.bundle=c;this.initConfig=d;this.adConfig=f;this.adConfigSpecific=g;this.adAssetList=k;this.adVisibilityDetails={visibilityPercentage:0,left:0,top:0,right:0,bottom:0,
width:0,height:0,visibilityX:0,visibilityY:0}};B.prototype.init=function(){var a=this;this.context.messageBus.logger.on(this.onLog);var c=this.context,e=c.Environment;c=c.Listener;this.adConfig=this.mergeAdConfig(this.adConfig,this.adConfigSpecific,this.initConfig.options.adUnit,this.initConfig.options.deal);e.init(this.context,this.initConfig,this.adConfig,this.bundle);if(e.isLogMode||e.isDebugMode)this.context.troubleshooting=new I(this.context,this.initConfig,this.adConfig);e.isDebugMode&&new k(this.context);
this.rootContainer=e.rootContainer;this.containerId=this.rootContainer.id;this.context.messageBus.event.on(this.onEvent);this.context.messageBus.event.emit({kind:'setup-tracker-redirect',type:'normal'});this.context.metrics=new A(this.context,this.rootContainer,this.initConfig.meta,this.initConfig.product);this.adConfig.metrics.provider.forEach(function(b){a.context.metrics.registerProvider(b.title,b.type,b.configuration)});this.initConfig.tracking.sync&&(this.trackerSync.push.apply(this.trackerSync,
$jscomp.arrayFromIterable(this.initConfig.tracking.sync.map(function(a){return d('served',a)}))),this.trackerSync.forEach(function(b){a.context.messageBus.tracking.emit({kind:'register',event:'served',tracker:b})}));try{m.g(e,'@charset "UTF-8";\n\n/*!\n * animate.css -https://daneden.github.io/animate.css/\n * Version - 3.7.2\n * Licensed under the MIT license - http://opensource.org/licenses/MIT\n *\n * Copyright (c) 2019 Daniel Eden\n */\n\n@-webkit-keyframes slideInDownAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, -100%, 0);\n        transform: translate3d(0, -100%, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n@keyframes slideInDownAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, -100%, 0);\n        transform: translate3d(0, -100%, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n.slideInDownAD_SESSION_ID {\n    -webkit-animation-name: slideInDownAD_SESSION_ID;\n    animation-name: slideInDownAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideInLeftAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(-100%, 0, 0);\n        transform: translate3d(-100%, 0, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n@keyframes slideInLeftAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(-100%, 0, 0);\n        transform: translate3d(-100%, 0, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n.slideInLeftAD_SESSION_ID {\n    -webkit-animation-name: slideInLeftAD_SESSION_ID;\n    animation-name: slideInLeftAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideInRightAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(100%, 0, 0);\n        transform: translate3d(100%, 0, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n@keyframes slideInRightAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(100%, 0, 0);\n        transform: translate3d(100%, 0, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n.slideInRightAD_SESSION_ID {\n    -webkit-animation-name: slideInRightAD_SESSION_ID;\n    animation-name: slideInRightAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideInUpAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 100%, 0);\n        transform: translate3d(0, 100%, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n@keyframes slideInUpAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 100%, 0);\n        transform: translate3d(0, 100%, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n.slideInUpAD_SESSION_ID {\n    -webkit-animation-name: slideInUpAD_SESSION_ID;\n    animation-name: slideInUpAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideOutDownAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(0, 100%, 0);\n        transform: translate3d(0, 100%, 0);\n    }\n}\n\n@keyframes slideOutDownAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(0, 100%, 0);\n        transform: translate3d(0, 100%, 0);\n    }\n}\n\n.slideOutDownAD_SESSION_ID {\n    -webkit-animation-name: slideOutDownAD_SESSION_ID;\n    animation-name: slideOutDownAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideOutLeftAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(-100%, 0, 0);\n        transform: translate3d(-100%, 0, 0);\n    }\n}\n\n@keyframes slideOutLeftAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(-100%, 0, 0);\n        transform: translate3d(-100%, 0, 0);\n    }\n}\n\n.slideOutLeftAD_SESSION_ID {\n    -webkit-animation-name: slideOutLeftAD_SESSION_ID;\n    animation-name: slideOutLeftAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideOutRightAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(100%, 0, 0);\n        transform: translate3d(100%, 0, 0);\n    }\n}\n\n@keyframes slideOutRightAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(100%, 0, 0);\n        transform: translate3d(100%, 0, 0);\n    }\n}\n\n.slideOutRightAD_SESSION_ID {\n    -webkit-animation-name: slideOutRightAD_SESSION_ID;\n    animation-name: slideOutRightAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideOutUpAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(0, -100%, 0);\n        transform: translate3d(0, -100%, 0);\n    }\n}\n\n@keyframes slideOutUpAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(0, -100%, 0);\n        transform: translate3d(0, -100%, 0);\n    }\n}\n\n.slideOutUpAD_SESSION_ID {\n    -webkit-animation-name: slideOutUpAD_SESSION_ID;\n    animation-name: slideOutUpAD_SESSION_ID;\n}\n\n.animatedAD_SESSION_ID {\n    -webkit-animation-duration: 1s;\n    animation-duration: 1s;\n    -webkit-animation-fill-mode: both;\n    animation-fill-mode: both;\n}\n\n.animatedAD_SESSION_ID.infinite {\n    -webkit-animation-iteration-count: infinite;\n    animation-iteration-count: infinite;\n}\n\n.animatedAD_SESSION_ID.delay-1s {\n    -webkit-animation-delay: 1s;\n    animation-delay: 1s;\n}\n\n.animatedAD_SESSION_ID.delay-2s {\n    -webkit-animation-delay: 2s;\n    animation-delay: 2s;\n}\n\n.animatedAD_SESSION_ID.delay-3s {\n    -webkit-animation-delay: 3s;\n    animation-delay: 3s;\n}\n\n.animatedAD_SESSION_ID.delay-4s {\n    -webkit-animation-delay: 4s;\n    animation-delay: 4s;\n}\n\n.animatedAD_SESSION_ID.delay-5s {\n    -webkit-animation-delay: 5s;\n    animation-delay: 5s;\n}\n\n.animatedAD_SESSION_ID.fast {\n    -webkit-animation-duration: 800ms;\n    animation-duration: 800ms;\n}\n\n.animatedAD_SESSION_ID.faster {\n    -webkit-animation-duration: 500ms;\n    animation-duration: 500ms;\n}\n\n.animatedAD_SESSION_ID.slow {\n    -webkit-animation-duration: 2s;\n    animation-duration: 2s;\n}\n\n.animatedAD_SESSION_ID.slower {\n    -webkit-animation-duration: 3s;\n    animation-duration: 3s;\n}\n\n@media (print), (prefers-reduced-motion: reduce) {\n    .animatedAD_SESSION_ID {\n        -webkit-animation-duration: 1ms !important;\n        animation-duration: 1ms !important;\n        -webkit-transition-duration: 1ms !important;\n        transition-duration: 1ms !important;\n        -webkit-animation-iteration-count: 1 !important;\n        animation-iteration-count: 1 !important;\n    }\n}\n'.replace(/AD_SESSION_ID/g,
''+this.initConfig.meta.adSessionId))}catch(O){this.logger.error("Can't inject general ad styles")}try{var f=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',event:'served',details:{msSinceStart:f}})}catch(O){}try{e.isError&&this.context.messageBus.event.emit({kind:'tracker',event:'error'}),e.delivery.facebookInAppBrowser&&this.context.messageBus.event.emit({kind:'tracker',event:'facebook'})}catch(O){}e.delivery.insideAmp&&('none'!==this.adConfig.display.effect&&
(this.logger.log("AMP detected - reset display effect from '"+this.adConfig.display.effect+"' to 'none'"),this.adConfig.display.effect='none',this.context.messageBus.event.emit({kind:'tracker',event:'error-display-effect'})),'disabled'!==this.adConfig.closeButton.mode&&(this.logger.log("AMP detected - reset close button option from '"+this.adConfig.closeButton.mode+"' to 'disabled'"),this.adConfig.closeButton.mode='disabled',this.context.messageBus.event.emit({kind:'tracker',event:'error-close-button'})));
this.initConfig.meta.om&&this.adConfig.display.hide&&(this.logger.log('Hide was enabled and open market demand is used - hide is now disabled'),this.adConfig.display.hide=!1);this.adPainter=new p(this.context,this.rootContainer,this.initConfig,this.adConfig,this.adVisibilityDetails);var l=this.adPainter.productContainer;this.adAssetList.forEach(function(b){b.init(a,a.context,a.adPainter,a.initConfig,a.adConfig,a.adAssetList);b.isImage&&(a.isImage=!0)});this.logger.log('Welcome to '+this.initConfig.product.title+
' v'+this.initConfig.product.release,{InitConfig:JSON.stringify(this.initConfig,null,2),AdConfig:JSON.stringify(this.adConfig,null,2)});this.logger.log('Delivery type',e.delivery);this.logger.log('Viewport dimension',{width:e.viewportWidth,height:e.viewportHeight});this.logger.log('Use creative dimension: '+e.usedWidth+'px x '+e.usedHeight+'px (scaled to: '+e.scaledWidth+'px x '+e.scaledHeight+'px)');this.logger.log('Scroll position at start - top:'+e.scrollTop+' left:'+e.scrollLeft);this.assets=
new g(this.context);this.clickOverlay=new J(this.context,this.initConfig,this.adConfig,l);this.adNode=e.hostDocument.createDocumentFragment();this.adNodeHidden=e.hostDocument.createDocumentFragment();this.visibilityHandlerList=this.constructVisibilityHandler(this.visibilityHandlerList);this.adAssetList.forEach(function(b){var c=b.constructAdNodes(a.adNode,a.adNodeHidden),d=c.adNodeHidden;a.adNode=c.adNode;a.adNodeHidden=d;a.visibilityHandlerList=b.constructVisibilityHandler(a.visibilityHandlerList)});
this.trackerImpression.push(d('impression',this.initConfig.tracking.impression));this.trackerImpression.forEach(function(b){a.context.messageBus.tracking.emit({kind:'register',event:'impression',tracker:b})});this.trackerViewability.push(d('viewability',this.initConfig.tracking.viewability));this.trackerViewability.forEach(function(b){a.context.messageBus.tracking.emit({kind:'register',event:'viewability',tracker:b})});this.trackerClick.push(d('click',this.initConfig.tracking.click));this.trackerClick.forEach(function(b){a.context.messageBus.tracking.emit({kind:'register',
event:'click',tracker:b})});if('understitialMini'===this.adConfig.display.effect||'understitialMiniToSticky'===this.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===this.adConfig.display.effect||'takeoverUnderstitialMiniAndHidden'===this.adConfig.display.effect)f=new b.c('Mini effect tracking (AdCore)',this.context,l,0,0,'scroll',[],!1,function(){},function(){},!1,function(){},function(){},function(b,c){a.adVisibilityDetails=b;a.updateStyles({updateAdPosition:!0,reset:!1});a.adPainter.updateAdPosition(a.adVisibilityDetails)}),
f.init(),this.visibilityHandlerList.push(f);'enabled'===this.adConfig.snapIn.mode&&0<this.adConfig.snapIn.threshold&&(f=new b.c('Snap in tracking (AdCore)',this.context,l,0,0,'scroll',[],!1,function(){},function(){},!1,function(){},function(){},function(b,c){a.adVisibilityDetails=b;a.processSnapIn(a.adVisibilityDetails)}),f.init(),this.visibilityHandlerList.push(f));if('yoc-inline-video-ad'===this.initConfig.product.key||'yoc-understitial-ad'===this.initConfig.product.key){e.isDemoMode&&(this.demoContainer=
e.hostDocument.createElement('div'),this.demoContainer.id='yoc_demo_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId,this.demoContainer.style.cssText='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 2147483647; background-color: rgba(127, 0, 0, 0.3);',this.demoContainer.style.backgroundColor='rgba(255, 255, 0, 0.3)',l.append(this.demoContainer));l.setAttribute(b.a.AD_SESSION_ID,this.initConfig.meta.adSessionId);l.setAttribute(b.a.CONTAINER_TYPE,
'ad');l.setAttribute(b.a.VIEWABILITY,b.b.ENABLED);l.setAttribute(b.a.VIEWABILITY_STATUS,b.b.WAITING);l.setAttribute(b.a.VIEWABILITY_GOAL,'viewability '+this.adConfig.tracking.viewabilityPercent+'/'+this.adConfig.tracking.viewabilityTime/1E3);var h=null;h=new b.c('Viewability Tracking (AdCore)',this.context,l,this.adConfig.tracking.viewabilityPercent,this.adConfig.tracking.viewabilityTime,this.adConfig.tracking.visibilityHandlerType,this.visibilityHandlerViewabilityGroupList,!0,function(){try{var c=
Date.now()-a.initConfig.timestamp;a.context.messageBus.event.emit({kind:'tracker',event:'viewability',details:{msSinceStart:c}});e.isVCPM&&(e.isPortrait?(a.context.trackingMiner.portrait.visibleCreative&&a.context.trackingMiner.portrait.visibleCreative.release(),a.context.trackingMiner.portrait.hiddenCreative&&a.context.trackingMiner.portrait.hiddenCreative.release()):(a.context.trackingMiner.landscape.visibleCreative&&a.context.trackingMiner.landscape.visibleCreative.release(),a.context.trackingMiner.landscape.hiddenCreative&&
a.context.trackingMiner.landscape.hiddenCreative.release()));l.setAttribute(b.a.VIEWABILITY_STATUS,b.b.FINISHED);l.setAttribute(b.a.VIEWABILITY_SUCCESS,'viewability '+a.adConfig.tracking.viewabilityPercent+'/'+a.adConfig.tracking.viewabilityTime/1E3);l.setAttribute(b.a.VIEWABILITY_TIME,''+h.visibilityHandler.viewedTime);e.isDemoMode&&a.demoContainer&&(a.demoContainer.style.backgroundColor='rgba(0, 255, 0, 0.3)')}catch(Q){}},function(){},!1,function(){h.visibilityHandler.disabled||(l.setAttribute(b.a.VIEWABILITY_STATUS,
b.b.STARTED),l.setAttribute(b.a.VIEWABILITY_TIME,h.visibilityHandler.viewedTime+' +'),e.isDemoMode&&a.demoContainer&&(a.demoContainer.style.backgroundColor='rgba(255, 165, 0, 0.3)'))},function(){h.visibilityHandler.disabled||(l.setAttribute(b.a.VIEWABILITY_STATUS,b.b.PAUSED),l.setAttribute(b.a.VIEWABILITY_TIME,''+h.visibilityHandler.viewedTime),e.isDemoMode&&a.demoContainer&&(a.demoContainer.style.backgroundColor='rgba(255, 255, 0, 0.3)'))});h.init();this.visibilityHandlerDependsOnImpressionList.push(h);
this.adConfig.tracking.viewabilityTrackingOverAll&&this.visibilityHandlerViewabilityGroupList.push(h);e.isVideo||this.isImage||!this.adConfig.tracking.enableClickTrackingWorkaround?this.isImage&&this.adConfig.tracking.enableClickTrackingWorkaround&&(this.logger.log('SKIP setup of click tracking on product container (AdCore) because (isVideo:'+(e.isVideo?'YES':'NO')+' / isImage:'+(this.isImage?'YES':'NO')+')'),l.setAttribute(b.a.CLICK,b.b.SKIPPED),l.setAttribute(b.a.CLICK_STATUS,b.b.SKIPPED)):(this.logger.log('Setup click tracking on product container (AdCore)'),
l.setAttribute(b.a.CLICK,b.b.ENABLED),l.setAttribute(b.a.CLICK_STATUS,b.b.WAITING),l.setAttribute(b.a.CLICK_GOAL,'click'),l.onclick=function(c){a.wasClicked?(a.logger.log('SKIP repeated CLICK on product container (AdCore)'),l.setAttribute(b.a.CLICK_SUCCESS,'click-repeated'),e.isDemoMode&&a.demoContainer&&(a.demoContainer.style.backgroundColor='rgba(128, 128, 128, 0.3)'),a.context.messageBus.event.emit({kind:'tracker',event:'click-repeated',details:{source:'adcore'}})):(a.logger.log('Handle CLICK on product container (AdCore)'),
a.wasClicked=!0,l.setAttribute(b.a.CLICK_STATUS,b.b.FINISHED),l.setAttribute(b.a.CLICK_SUCCESS,'click'),e.isDemoMode&&a.demoContainer&&(a.demoContainer.style.backgroundColor='rgba(0, 0, 0, 0.3)'),a.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'adcore'}}))})}else l.setAttribute(b.a.VIEWABILITY,b.b.SKIPPED),l.setAttribute(b.a.VIEWABILITY_STATUS,b.b.SKIPPED),l.setAttribute(b.a.CLICK,b.b.SKIPPED),l.setAttribute(b.a.CLICK_STATUS,b.b.SKIPPED);if('inlineToSticky'===this.adConfig.display.effect||
'understitialMiniToSticky'===this.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===this.adConfig.display.effect)f=new b.c('InlineToStickyVisibilityHandler',this.context,l,this.adConfig.display.toStickyThreshold,0,this.adConfig.tracking.visibilityHandlerType,[],!0,function(){},function(){a.logger.log('InlineToStickyVisibilityHandler - Convert ad from inline to sticky');a.adPainter.hideAdvertisementMessage();if('disabled'!==a.adConfig.creative.sticky.mode)e.onSticky('sticky');else e.onSticky();
a.adAssetList.forEach(function(a){a.onSticky()});a.updateStyles({updateAdPosition:!0,reset:!1});a.context.messageBus.event.emit({kind:'sticky'});try{var b=Date.now()-a.initConfig.timestamp;a.context.messageBus.event.emit({kind:'tracker',event:'inline-to-sticky',details:{msSinceStart:b}});n({kind:'inline-to-sticky-triggered'})}catch(Q){}},!1),f.init(),this.visibilityHandlerList.push(f);'takeoverInlineAndHidden'!==this.adConfig.display.effect&&'takeoverUnderstitialMiniAndHidden'!==this.adConfig.display.effect||
'disabled'===this.adConfig.creative.hidden.mode||(this.takeoverTarget='hidden');'takeoverInlineAndSticky'!==this.adConfig.display.effect&&'takeoverUnderstitialMiniAndSticky'!==this.adConfig.display.effect||'disabled'===this.adConfig.creative.sticky.mode||(this.takeoverTarget='sticky');this.takeoverTarget&&(f=new b.c('TakeoverVisibilityHandler',this.context,l,this.adConfig.display.toStickyThreshold,0,this.adConfig.tracking.visibilityHandlerType,[],!1,function(){'sticky'===a.takeoverTarget&&a.takeoverIsShown?
a.logger.log('TakeoverVisibilityHandler - Ad is visible - SKIP takeover logic'):(a.logger.log('TakeoverVisibilityHandler - Ad is visible - perform takeover logic'),a.adAssetList.forEach(function(b){b.onTakeoverDisable(a.takeoverTarget)}))},function(){if('sticky'===a.takeoverTarget&&a.takeoverIsShown)a.logger.log('TakeoverVisibilityHandler - Ad is not visible (enough) anymore - SKIP takeover logic');else{a.logger.log('TakeoverVisibilityHandler - Ad is not visible (enough) anymore - perform takeover logic');
a.adAssetList.forEach(function(b){b.onTakeoverEnable(a.takeoverTarget)});try{var b=Date.now()-a.initConfig.timestamp;a.context.messageBus.event.emit({kind:'tracker',event:'takeover',details:{msSinceStart:b}})}catch(Q){}}a.takeoverIsShown=!0},!1),f.init(),this.visibilityHandlerList.push(f));e.isAutoResize&&(c.add('orientationchange',v(this.onOrientationChange.bind(this),100),0,!0),c.add('resize',v(this.onResize.bind(this),100),0,!0));try{var q=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',
event:'init',details:{msSinceStart:q}})}catch(O){}var r=!1;this.adAssetList.forEach(function(a){a.waitForAssetReadyCheck||(r=!0)});r&&Promise.resolve().then(function(){a.context.messageBus.event.emit({kind:'assets-ready-check'})});return!0};B.prototype.replaceMacros=function(a,b){var c=this,d=a,e={percent:'%%',at:'@@'};Object.keys(e).forEach(function(a){d=d.replace(new RegExp(e[a]+'CLICK_URL_UNESC'+e[a],'g'),c.initConfig.tracking.click);d=d.replace(new RegExp(e[a]+'CLICK_URL_ESC'+e[a],'g'),encodeURIComponent(c.initConfig.tracking.click));
d=d.replace(new RegExp(e[a]+'CLICK_URL_ESC_ESC'+e[a],'g'),encodeURIComponent(encodeURIComponent(c.initConfig.tracking.click)));d=d.replace(new RegExp(e[a]+'SITE'+e[a],'g'),c.initConfig.meta.publisherDomain)});d=d.replace(new RegExp(decodeURIComponent('%25ecid!'),'g'),this.initConfig.meta.creativeId);d=d.replace(new RegExp(decodeURIComponent('%25esid!'),'g'),this.initConfig.meta.siteId);d=d.replace(new RegExp(decodeURIComponent('%25epid!'),'g'),this.initConfig.meta.adUnitId);d=d.replace(new RegExp(decodeURIComponent('%25ebuy!'),
'g'),this.initConfig.meta.orderId);d=d.replace(new RegExp(decodeURIComponent('%25eaid!'),'g'),this.initConfig.meta.lineItemId);d=d.replace(new RegExp(decodeURIComponent('%25eadv!'),'g'),this.initConfig.meta.advertiserId);d=this.context.metrics.replaceMacros(d);if(b){var f=function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1')};Object.keys(b).forEach(function(a){d=d.replace(new RegExp(f('['+a.toLowerCase()+']'),'g'),b[a]);d=d.replace(new RegExp(f('['+a.toUpperCase()+']'),'g'),b[a]);d=d.replace(new RegExp(f('%%'+
a.toLowerCase()+'%%'),'g'),b[a]);d=d.replace(new RegExp(f('%%'+a.toUpperCase()+'%%'),'g'),b[a])})}return d};B.prototype.constructVisibilityHandler=function(a){var c=this,d=new b.c('Shown',this.context,this.adPainter.productContainer,0,0,this.adConfig.tracking.visibilityHandlerType,[],!0,function(){c.context.messageBus.event.emit({kind:'shown'})},function(){});d.init();a.push(d);return a};B.prototype.getCreativeOptionDetails=function(a,b){var c=this.adConfig.creative.portrait,d=a.portrait,e=this.context.trackingMiner.portrait;
'landscape'===b&&(c=this.adConfig.creative.landscape,d=a.landscape,e=this.context.trackingMiner.landscape);'sticky'===b&&(c=this.adConfig.creative.sticky,d=a.sticky,e=this.context.trackingMiner.sticky);'hidden'===b&&(c=this.adConfig.creative.hidden,d=a.hidden,e=this.context.trackingMiner.hidden);return{configCreative:c,creativeDetails:d,trackingMiner:e}};B.prototype.mergeAdConfig=function(a,b,c,d){var e=this.context.Environment,f=JSON.parse(JSON.stringify(a));try{var g=this.context.newLogger('mergeAdConfig');
Object(M.a)(this.initConfig,g,f,b,e.isVideo);Object(M.a)(this.initConfig,g,f,c,e.isVideo);Object(M.a)(this.initConfig,g,f,d,e.isVideo)}catch(S){this.logger.error('Error during merging ad configuration',{adConfig:JSON.stringify(a,null,2),adConfigSpecific:b,adUnitOptions:c,dealOptions:d,error:S.message})}return f};B.prototype.run=function(){var a=this;this.paintAd();this.context.messageBus.event.emit({kind:'impression'});if(!this.context.Environment.isError)if(this.visibilityHandlerList.forEach(function(a){a.enable()}),
this.isVPAID)this.context.messageBus.event.onceEvent('vpaid-impression',function(){a.trackImpression()});else this.trackImpression()};B.prototype.trackImpression=function(){try{var a=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',event:'impression',details:{msSinceStart:a}});n({kind:'impression'})}catch(T){}this.visibilityHandlerDependsOnImpressionList.forEach(function(a){a.enable()})};B.prototype.paintAd=function(){var a=this,b=this.context.Environment;if(!b.isError){this.adPainter.insertAd(this.initConfig.placement.height,
this.adNode,this.adNodeHidden);this.postProcessAfterInsertAd();if('sticky'===this.adConfig.display.effect){this.logger.log('Display ad sticky');this.adPainter.hideAdvertisementMessage();if('disabled'!==this.adConfig.creative.sticky.mode)b.onSticky('sticky');else b.onSticky();this.adAssetList.forEach(function(a){a.onSticky()});this.updateStyles({updateAdPosition:!0,reset:!1});this.context.messageBus.event.emit({kind:'sticky'});try{var c=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',
event:'sticky',details:{msSinceStart:c}})}catch(h){}n({kind:'sticky-triggered'})}else this.isVPAID||this.adPainter.showAdvertisementMessage();this.adPainter.updateAdPosition(this.adVisibilityDetails);this.onResize();try{var d=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',event:'ready',details:{msSinceStart:d}})}catch(h){}if(this.adConfig.takeover.activateImmediately&&this.takeoverTarget){this.logger.log('Takeover - Activate immediately because of custom setting');
this.adAssetList.forEach(function(b){b.onTakeoverEnable(a.takeoverTarget)});try{var e=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',event:'takeover',details:{msSinceStart:e}})}catch(h){}}}};B.prototype.onLogger=function(a){var b={error:'font-weight: 600; color: #cc2208',warn:'font-weight: 500; color: #abb014',log:'font-weight: 500; color: #555',debug:'font-weight: 500; color: #888'},c=[],d=''+decodeURIComponent('%25c')+a.kind[0].toUpperCase()+decodeURIComponent('%25c')+
' ',e={error:'color: white; font-weight: 700; background-color: #f22; border-radius: 2px; padding: 0 4px 0',warn:'color: white; font-weight: 700; background-color: #f2ea5c; border-radius: 2px; padding: 0 4px 0',log:'color: white; font-weight: 700; background-color: #d0d4e0; border-radius: 2px; padding: 0 4px 0',debug:'color: white; font-weight: 700; background-color: #e8ecf7; border-radius: 2px; padding: 0 4px 0'};if(a.details){var f=a.details,g=0;'string'!==typeof a.details&&Object.keys(a.details).forEach(function(a){'object'===
typeof f[a]?Object.keys(f[a]).forEach(function(b){g++;c.push(a+'.'+b+'='+f[a][b])}):(g++,c.push(a+'='+f[a]))});0===g&&c.push(a.details)}if(0===c.length)switch(b=[''+d+decodeURIComponent('%25c')+a.message,e[a.kind],'',b[a.kind]],a.kind){case 'error':console.error.apply(console,$jscomp.arrayFromIterable(b));break;case 'warn':console.warn.apply(console,$jscomp.arrayFromIterable(b));break;case 'log':console.log.apply(console,$jscomp.arrayFromIterable(b));break;case 'debug':console.debug.apply(console,
$jscomp.arrayFromIterable(b))}else{console.groupCollapsed(''+d+decodeURIComponent('%25c')+a.message,e[a.kind],'',b[a.kind]);b=c.join('\n');switch(a.kind){case 'error':console.error(b);break;case 'warn':console.warn(b);break;case 'log':console.log(b);break;case 'debug':console.debug(b)}console.groupEnd()}};B.prototype.onOrientationChange=function(a){this.updateStyles({updateAdPosition:!0,reset:!0});this.context.Environment.onOrientationChange(a);this.adAssetList.forEach(function(b){b.onOrientationChange(a)});
this.updateStyles({updateAdPosition:!0,reset:!1})};B.prototype.onResize=function(a){this.updateStyles({updateAdPosition:!0,reset:!0});this.context.Environment.onResize(a);this.adAssetList.forEach(function(b){b.onResize(a)});this.updateStyles({updateAdPosition:!0,reset:!1});this.context.messageBus.clickOverlay.emit({kind:'refresh'})};B.prototype.postProcessAfterInsertAd=function(){this.adAssetList.forEach(function(a){a.postProcessAfterInsertAd(void 0)})};B.prototype.dispose=function(){this.adAssetList.forEach(function(a){a.dispose()})};
B.prototype.getCreative=function(){var a=null;this.adAssetList.forEach(function(b){b instanceof R.a&&(a=b)});return a};B.prototype.updateStyles=function(a){a=void 0===a?{updateAdPosition:!1,reset:!1}:a;var b=a.updateAdPosition,c=a.reset;this.adAssetList.forEach(function(a){a.updateStyles({updateAdPosition:b,reset:c})});b&&this.adPainter.updateAdPosition(this.adVisibilityDetails)};B.prototype.setupTrackerRedirection=function(a){if(this.trackerRedirectHasBeenSetUp)this.logger.error('setupTrackerRedirection called second time',
{type:a});else{var b=this.context.Environment,c=b.isVCPM;b=b.isDealPricingTypeUnknown;this.trackerRedirectHasBeenSetUp=!0;this.logger.debug('setupTrackerRedirection',{type:a});c&&b&&(this.trackerRedirect.push({event:'impression',trackOn:'viewability'}),this.logger.log('Enabled tracker redirect because of ad configuration "tracking.vCPMEnabled"',{event:'impression',trackOn:'viewability'}));var d=this.adConfig.tracking.countImpressionOn,e=this.adConfig.tracking.countVideoCreativeviewOn;'vpaid'===a&&
(d=this.adConfig.tracking.countVPAIDImpressionOn,e=this.adConfig.tracking.countVPAIDVideoCreativeviewOn);c&&!b?this.context.Environment.isVideo?(this.logger.log("Enable impression tracker redirect to 'video-start' because vCPM is used (video)",{event:'impression',trackOn:'video-start'}),this.trackerRedirect.push({event:'impression',trackOn:'video-start'})):this.logger.log('SKIP impression tracker redirect because vCPM is used (no video)',{event:'impression',trackOn:d}):c||'impression'===d||(this.logger.log("Enable impression tracker redirect to '"+
d+'\' because of ad configuration "tracking.countImpressionOn"',{event:'impression',trackOn:d}),this.trackerRedirect.push({event:'impression',trackOn:d}));'video-creativeview'!==this.adConfig.tracking.countVideoCreativeviewOn&&(this.trackerRedirect.push({event:'video-creativeview',trackOn:e}),this.logger.log('Enabled tracker redirect because of ad configuration "tracking.countVideoCreativeviewOn"',{event:'video-creativeview',trackOn:e}))}}},function(l,f,a){},function(l,f){(function(a){a.forEach(function(a){a.hasOwnProperty('append')||
Object.defineProperty(a,'append',{configurable:!0,enumerable:!0,writable:!0,value:function(){var a=Array.prototype.slice.call(arguments),f=document.createDocumentFragment();a.forEach(function(a){f.appendChild(a instanceof Node?a:document.createTextNode(String(a)))});this.appendChild(f)}})})})([Element.prototype,Document.prototype,DocumentFragment.prototype])},function(l,f){(function(a){a.forEach(function(a){a.hasOwnProperty('prepend')||Object.defineProperty(a,'prepend',{configurable:!0,enumerable:!0,
writable:!0,value:function(){var a=Array.prototype.slice.call(arguments),f=document.createDocumentFragment();a.forEach(function(a){f.appendChild(a instanceof Node?a:document.createTextNode(String(a)))});this.insertBefore(f,this.firstChild)}})})})([Element.prototype,Document.prototype,DocumentFragment.prototype])},function(l,f){},function(l,f){},function(l,f,a){a.r(f);var n=a(18),d=a(13),q=a(3);l=a(14);f=a(15);var v=a(16),m=Object(l.a)().wnd;Object(f.a)(m);Object.keys(m.__YOC.session).forEach(function(a){a=
m.__YOC.session[a];var f=a.initConfig,k=a.adConfigDefault,b=a.adConfigSpecific;a.processed||a.buildTag!==v.a||a.buildTime!==v.b||'creative'!==a.bundle||(a.processed=!0,Object(q.a)(k,f.options.adUnit,f.options.deal,function(a){var c=[];c.push(new d.a);(new n.a({bundle:'creative',initConfig:f,adConfigDefault:k,adConfigSpecific:JSON.stringify(b),adAssetList:c,mraidInfo:a})).init()}))})}]);}).call(this || window)
