(function(){/*
 creative-video
 0e39620986af0f4c412999aadaaa2d6b56c22bec
 2020-05-12T10:25:13.696Z */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(g){var e=0;return function(){return e<g.length?{done:!1,value:g[e++]}:{done:!0}}};$jscomp.arrayIterator=function(g){return{next:$jscomp.arrayIteratorImpl(g)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||'function'==typeof Object.defineProperties?Object.defineProperty:function(g,e,b){g!=Array.prototype&&g!=Object.prototype&&(g[e]=b.value)};$jscomp.getGlobal=function(g){return'undefined'!=typeof window&&window===g?g:'undefined'!=typeof global&&null!=global?global:g};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(g,e){this.$jscomp$symbol$id_=g;$jscomp.defineProperty(this,'description',{configurable:!0,writable:!0,value:e})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function g(b){if(this instanceof g)throw new TypeError('Symbol is not a constructor');return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||'')+'_'+e++,b)}var e=0;return g}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var g=$jscomp.global.Symbol.iterator;g||(g=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol('Symbol.iterator'));'function'!=typeof Array.prototype[g]&&$jscomp.defineProperty(Array.prototype,g,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var g=$jscomp.global.Symbol.asyncIterator;g||(g=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol('Symbol.asyncIterator'));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(g){$jscomp.initSymbolIterator();g={next:g};g[$jscomp.global.Symbol.iterator]=function(){return this};return g};
$jscomp.makeIterator=function(g){var e='undefined'!=typeof Symbol&&Symbol.iterator&&g[Symbol.iterator];return e?e.call(g):$jscomp.arrayIterator(g)};$jscomp.arrayFromIterator=function(g){for(var e,b=[];!(e=g.next()).done;)b.push(e.value);return b};$jscomp.arrayFromIterable=function(g){return g instanceof Array?g:$jscomp.arrayFromIterator($jscomp.makeIterator(g))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||'function'==typeof Object.create?Object.create:function(g){var e=function(){};e.prototype=g;return new e};
$jscomp.underscoreProtoCanBeSet=function(){var g={a:!0},e={};try{return e.__proto__=g,e.a}catch(b){}return!1};$jscomp.setPrototypeOf='function'==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(g,e){g.__proto__=e;if(g.__proto__!==e)throw new TypeError(g+' is not extensible');return g}:null;
$jscomp.inherits=function(g,e){g.prototype=$jscomp.objectCreate(e.prototype);g.prototype.constructor=g;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;b(g,e)}else for(b in e)if('prototype'!=b)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,b);n&&Object.defineProperty(g,b,n)}else g[b]=e[b];g.superClass_=e.prototype};
$jscomp.polyfill=function(g,e,b,n){if(e){b=$jscomp.global;g=g.split('.');for(n=0;n<g.length-1;n++){var c=g[n];c in b||(b[c]={});b=b[c]}g=g[g.length-1];n=b[g];e=e(n);e!=n&&null!=e&&$jscomp.defineProperty(b,g,{configurable:!0,writable:!0,value:e})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill('Promise',function(g){function e(){this.batch_=null}function b(b){return b instanceof c?b:new c(function(c,e){c(b)})}if(g&&!$jscomp.FORCE_POLYFILL_PROMISE)return g;e.prototype.asyncExecute=function(c){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(c)};var n=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(c){n(c,0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var b=0;b<c.length;++b){var e=c[b];c[b]=null;try{e()}catch(p){this.asyncThrow_(p)}}}this.batch_=null};e.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var c=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{c(b.resolve,b.reject)}catch(B){b.reject(B)}};c.prototype.createResolveAndReject_=function(){function c(c){return function(k){e||(e=!0,c.call(b,k))}}var b=this,e=!1;
return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};c.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError('A Promise cannot resolve to itself'));else if(b instanceof c)this.settleSameAsPromise_(b);else{a:switch(typeof b){case 'object':var q=null!=b;break a;case 'function':q=!0;break a;default:q=!1}q?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};c.prototype.resolveToNonPromiseObj_=function(c){var b=void 0;try{b=c.then}catch(B){this.reject_(B);return}'function'==typeof b?
this.settleSameAsThenable_(b,c):this.fulfill_(c)};c.prototype.reject_=function(c){this.settle_(2,c)};c.prototype.fulfill_=function(c){this.settle_(1,c)};c.prototype.settle_=function(c,b){if(0!=this.state_)throw Error('Cannot settle('+c+', '+b+'): Promise already settled in state'+this.state_);this.state_=c;this.result_=b;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=0;c<this.onSettledCallbacks_.length;++c)l.asyncExecute(this.onSettledCallbacks_[c]);
this.onSettledCallbacks_=null}};var l=new e;c.prototype.settleSameAsPromise_=function(c){var b=this.createResolveAndReject_();c.callWhenSettled_(b.resolve,b.reject)};c.prototype.settleSameAsThenable_=function(c,b){var e=this.createResolveAndReject_();try{c.call(b,e.resolve,e.reject)}catch(p){e.reject(p)}};c.prototype.then=function(b,e){function q(a,c){return'function'==typeof a?function(d){try{p(a(d))}catch(F){k(F)}}:c}var p,k,a=new c(function(a,c){p=a;k=c});this.callWhenSettled_(q(b,p),q(e,k));return a};
c.prototype.catch=function(c){return this.then(void 0,c)};c.prototype.callWhenSettled_=function(c,b){function e(){switch(p.state_){case 1:c(p.result_);break;case 2:b(p.result_);break;default:throw Error('Unexpected state: '+p.state_);}}var p=this;null==this.onSettledCallbacks_?l.asyncExecute(e):this.onSettledCallbacks_.push(e)};c.resolve=b;c.reject=function(b){return new c(function(c,e){e(b)})};c.race=function(e){return new c(function(c,g){for(var p=$jscomp.makeIterator(e),k=p.next();!k.done;k=p.next())b(k.value).callWhenSettled_(c,
g)})};c.all=function(e){var q=$jscomp.makeIterator(e),g=q.next();return g.done?b([]):new c(function(c,k){function a(a){return function(b){d[a]=b;p--;0==p&&c(d)}}var d=[],p=0;do d.push(void 0),p++,b(g.value).callWhenSettled_(a(d.length-1),k),g=q.next();while(!g.done)})};return c},'es6','es3');
$jscomp.iteratorFromArray=function(g,e){$jscomp.initSymbolIterator();g instanceof String&&(g+='');var b=0,n={next:function(){if(b<g.length){var c=b++;return{value:e(c,g[c]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};$jscomp.polyfill('Array.prototype.keys',function(g){return g?g:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},'es6','es3');
$jscomp.owns=function(g,e){return Object.prototype.hasOwnProperty.call(g,e)};$jscomp.assign='function'==typeof Object.assign?Object.assign:function(g,e){for(var b=1;b<arguments.length;b++){var n=arguments[b];if(n)for(var c in n)$jscomp.owns(n,c)&&(g[c]=n[c])}return g};$jscomp.polyfill('Object.assign',function(g){return g||$jscomp.assign},'es6','es3');
$jscomp.findInternal=function(g,e,b){g instanceof String&&(g=String(g));for(var n=g.length,c=0;c<n;c++){var l=g[c];if(e.call(b,l,c,g))return{i:c,v:l}}return{i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(g){return g?g:function(e,b){return $jscomp.findInternal(this,e,b).v}},'es6','es3');
(function(g){function e(n){if(b[n])return b[n].exports;var c=b[n]={i:n,l:!1,exports:{}};g[n].call(c.exports,c,c.exports,e);c.l=!0;return c.exports}var b={};e.m=g;e.c=b;e.d=function(b,c,g){e.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:g})};e.r=function(b){$jscomp.initSymbol();$jscomp.initSymbol();'undefined'!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.toStringTag,{value:'Module'}));Object.defineProperty(b,'__esModule',{value:!0})};e.t=function(b,
c){c&1&&(b=e(b));if(c&8||c&4&&'object'===typeof b&&b&&b.__esModule)return b;var g=Object.create(null);e.r(g);Object.defineProperty(g,'default',{enumerable:!0,value:b});if(c&2&&'string'!=typeof b)for(var n in b)e.d(g,n,function(c){return b[c]}.bind(null,n));return g};e.n=function(b){var c=b&&b.__esModule?function(){return b['default']}:function(){return b};e.d(c,'a',c);return c};e.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};e.p='';return e(e.s=25)})([function(g,e,b){function n(a,
d,b,c){b=a===d?a>b&&d<c?Infinity:-Infinity:a>c||b>d?0:Math.min(d,c)-Math.max(a,b);return Infinity===b?1:-Infinity===b?0:b/(d-a)}b.d(e,'b',function(){return u});b.d(e,'a',function(){return F});b.d(e,'c',function(){return t});var c='performance'in window&&'now'in performance&&'timeOrigin'in performance,l=function(a,d,b,k,p,D,m,f,u,e,g,t){D=void 0===D?[]:D;t=void 0===t?function(a,d){}:t;this.logger=0;this.visibilityHandlerGroupList=[];this.disabled=this.viewed=!1;this.viewStart=this.viewedTime=this.visibilityTimeoutId=
0;this.isVisible=!1;this.currentTime=function(){return c?performance.timeOrigin+performance.now():Date.now()};this.title=a;this.context=d;this.visibilityTarget=b;this.visibilityPercent=k;this.visibilityHandlerGroupList=D;this.visibilityTime=p;this.performOnlyOnce=m;this.callbackVisible=f;this.callbackInvisible=u;this.callbackTrackingStarts=void 0===e?function(){}:e;this.callbackTrackingEnds=void 0===g?function(){}:g;this.callbackVisibleUpdate=t};l.prototype.enable=function(){return!1};l.prototype.disable=
function(){return!1};l.prototype.setVisible=function(a){var d=this;a=void 0===a?this.currentTime():a;if(!this.isVisible)if(this.isVisible=!0,this.callbackTrackingStarts.call(this),!1===this.viewed){this.viewStart=a;var b=this.viewedTime;0<this.visibilityHandlerGroupList.length?(this.logger.log('setVisible() Determine the viewedTime sum from the group'),b=0,this.visibilityHandlerGroupList.forEach(function(a){d.logger.log("setVisible() Add viewedTime of '"+a.visibilityHandler.viewedTime+"' (current: "+
b+") from the group member '"+a.title+"'");b+=a.visibilityHandler.viewedTime}),this.logger.log("setVisible() Use viewedTime of '"+b+"' from the group")):this.logger.log("setVisible() Use viewedTime of '"+b+"' from myself");var c=this.visibilityTime-b;0>c?this.logger.log('setVisible() SKIP starting timer because the limit was already reached'):(this.visibilityTimeoutId=this.context.Environment.hostWindow.setTimeout(function(){d.logger.log("setVisible() Invoked timer '"+d.visibilityTimeoutId+"' with timeout of '"+
c+"'");d.viewed=!0;d.viewedTime+=d.currentTime()-d.viewStart;d.callbackVisible.call(d)},c),this.logger.log("setVisible() Started timer '"+this.visibilityTimeoutId+"' with timeout of '"+c+"' ms"))}else!0!==this.viewed||this.performOnlyOnce||this.callbackVisible.call(this)};l.prototype.visibleUpdate=function(a,d){d=void 0===d?this.currentTime():d;this.isVisible&&this.callbackVisibleUpdate.call(this,a,d)};l.prototype.setInvisible=function(a){var d=this;a=void 0===a?this.currentTime():a;if(this.isVisible){this.isVisible=
!1;!1===this.viewed&&0!==this.viewStart&&(this.viewedTime+=a-this.viewStart,this.visibilityTimeoutId&&(this.logger.log("setInvisible() Clear timer '"+this.visibilityTimeoutId+"'"),this.context.Environment.hostWindow.clearTimeout(this.visibilityTimeoutId),this.visibilityTimeoutId=0),this.callbackTrackingEnds.call(this),this.callbackInvisible.call(this));!0!==this.viewed||this.performOnlyOnce?!0===this.viewed&&this.performOnlyOnce&&(this.callbackInvisible.call(this),this.disable()):(this.callbackTrackingEnds.call(this),
this.callbackInvisible.call(this));var b=this.viewedTime;0<this.visibilityHandlerGroupList.length?(this.logger.log('setInvisible() Determine the viewedTime sum from the group'),b=0,this.visibilityHandlerGroupList.forEach(function(a){d.logger.log("setInvisible() Add viewedTime of '"+a.visibilityHandler.viewedTime+"' (current: "+b+") from the group member '"+a.title+"'");b+=a.visibilityHandler.viewedTime}),this.logger.log("setInvisible() Calculated viewedTime of '"+b+"' from the group")):this.logger.log("setInvisible() Calculated viewedTime of '"+
b+"' from myself")}};var v=function(a,d,b,c,k,D,p,f,m,e,u,t){D=void 0===D?[]:D;var x=l.call(this,a,d,b,c,k,D,p,f,m,e,u,t)||this;x.lastVisibilityPercentage=0;x.setInvisible=function(a){a=void 0===a?x.currentTime():a;x.logger.log('Ad is NOT visible for minimum '+x.visibilityPercent+' - detected by scroll handler',{now:a,viewStart:x.viewStart,percent:x.lastVisibilityPercentage,time:x.viewedTime});l.prototype.setInvisible.call(x,a)};x.logger=d.newLogger('VisibilityHandlerScroll['+x.title+']');x.calculateVisibilityHandler=
function(){};return x};$jscomp.inherits(v,l);v.prototype.enable=function(){var a=this.visibilityTarget;this.logger.log('Enable visibility tracking by using scroll handler',{threshold:this.visibilityPercent,ms:this.visibilityTime});this.trackViewportUpdates(a,this.onVisibility.bind(this));this.onVisibility(this.calculateVisibility(a));return!0};v.prototype.disable=function(){var a=this.context.Listener;if(this.disabled)return!0;this.disabled=!0;this.logger.log('Disable visibility tracking by using scroll handler',
{threshold:this.visibilityPercent,ms:this.visibilityTime});clearTimeout(this.visibilityTimeoutId);a.remove('scroll',this.calculateVisibilityHandler);a.remove('resize',this.calculateVisibilityHandler);a.remove('orientationchange',this.calculateVisibilityHandler);return!0};v.prototype.calculateVisibility=function(a){var d=a.getBoundingClientRect();a=d.left;var b=d.top,c=d.right,k=d.bottom,D=d.width;d=d.height;var p=this.context.Environment.hostWindow,f=p.innerHeight;p=n(a,c,0,p.innerWidth);f=n(b,k,
0,f);return{visibilityPercentage:p*f,left:a,top:b,right:c,bottom:k,width:D,height:d,visibilityX:p,visibilityY:f}};v.prototype.trackViewportUpdates=function(a,d){var b=this,c=this.context.Listener;this.calculateVisibilityHandler=function(){d(b.calculateVisibility(a))};c.add('scroll',this.calculateVisibilityHandler,0,!0);c.add('resize',this.calculateVisibilityHandler,0,!0);c.add('orientationchange',this.calculateVisibilityHandler,0,!0)};v.prototype.onVisibility=function(a){var d=this.visibilityPercent/
100;this.lastVisibilityPercentage<=d&&a.visibilityPercentage>d?this.setVisible():this.lastVisibilityPercentage>d&&a.visibilityPercentage<=d&&this.setInvisible();l.prototype.visibleUpdate.call(this,a);this.lastVisibilityPercentage=a.visibilityPercentage};v.prototype.setVisible=function(a){a=void 0===a?this.currentTime():a;this.logger.log('Ad is visible for minimum '+this.visibilityPercent+' - detected by scroll handler',{now:a,percent:this.lastVisibilityPercentage,time:this.viewedTime});l.prototype.setVisible.call(this,
a)};var q=function(a){for(var d,b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];d=l.apply(this,$jscomp.arrayFromIterable(b))||this;d.onObserved=function(a){a.forEach(function(a){var b=performance.timeOrigin+a.time;0!==a.intersectionRatio&&a.intersectionRatio>=d.visibilityPercent/100?d.setVisible(b):d.setInvisible(b)})};d.logger=d.context.newLogger('VisibilityHandlerIntersectionObserver['+d.title+']');return d};$jscomp.inherits(q,l);q.prototype.enable=function(){if(this.disabled)return!0;var a=
this.visibilityTarget;this.logger.log('Enable visibility tracking by using IntersectionObserver handler',{threshold:this.visibilityPercent,ms:this.visibilityTime});try{this.intersectionObserver=new IntersectionObserver(this.onObserved,{root:null,threshold:this.visibilityPercent/100}),this.intersectionObserver.observe(a)}catch(z){return!1}return!0};q.prototype.disable=function(){if(this.disabled)return!0;this.disabled=!0;this.logger.log('Disable visibility tracking by using IntersectionObserver handler',
{threshold:this.visibilityPercent,ms:this.visibilityTime});clearTimeout(this.visibilityTimeoutId);try{if(this.intersectionObserver)this.intersectionObserver.disconnect();else return!1}catch(x){return!1}return!0};q.prototype.setVisible=function(a){a=void 0===a?this.currentTime():a;this.logger.log('Ad is visible for minimum '+this.visibilityPercent+' - detected by intersectionObserver handler',{now:a,percent:-1,time:this.viewedTime});l.prototype.setVisible.call(this,a)};q.prototype.setInvisible=function(a){a=
void 0===a?this.currentTime():a;this.logger.log('Ad is NOT visible for minimum '+this.visibilityPercent+' - detected by intersectionObserver handler',{now:a,viewStart:this.viewStart,percent:-1,time:this.viewedTime});l.prototype.setInvisible.call(this,a)};var B=b(11),p=function(a){for(var d,b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];d=l.apply(this,$jscomp.arrayFromIterable(b))||this;d.onObserved=function(a){a.forEach(function(a){var b=performance.timeOrigin+a.time;0!==a.intersectionRatio&&
a.intersectionRatio>=d.visibilityPercent/100?d.setVisible(b):d.setInvisible(b)})};d.logger=d.context.newLogger('VisibilityHandlerAmpIntersectionObserver['+d.title+']');return d};$jscomp.inherits(p,l);p.prototype.enable=function(){if(this.disabled)return!0;this.logger.log('enable',{threshold:this.visibilityPercent,ms:this.visibilityTime});try{this.disableObserver=this.context.Environment.hostWindow.context.observeIntersection(this.onObserved)}catch(x){return!1}return!0};p.prototype.disable=function(){if(this.disabled)return!0;
this.disabled=!0;this.logger.log('disabled',{threshold:this.visibilityPercent,ms:this.visibilityTime});clearTimeout(this.visibilityTimeoutId);try{this.disableObserver()}catch(x){return!1}return!0};p.prototype.setVisible=function(a){a=void 0===a?this.currentTime():a;this.isVisible||this.logger.log('setVisible');l.prototype.setVisible.call(this,a)};p.prototype.setInvisible=function(a){a=void 0===a?this.currentTime():a;this.isVisible&&this.logger.log('setInvisible');l.prototype.setInvisible.call(this,
a)};var k=b(3),a=function(a){for(var d,b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];d=l.apply(this,$jscomp.arrayFromIterable(b))||this;d.onViewableChange=function(a){a?(d.logger.log('Ad is NOT visible - detected by mraid.isViewable()'),d.setVisible()):(d.logger.log('Ad is visible - detected by mraid.isViewable()'),d.setInvisible())};d.logger=d.context.newLogger('VisibilityHandlerMRAIDIsViewable['+d.title+']');return d};$jscomp.inherits(a,l);a.prototype.enable=function(){if(this.disabled)return!0;
if(!this.context.Environment.isMRAID)return!1;Object(k.c)(this.onViewableChange);var a=Object(k.f)();this.onViewableChange(a);return!0};a.prototype.disable=function(){if(this.disabled)return!0;this.disabled=!0;Object(k.i)(this.onViewableChange);return!0};var d=function(a){for(var d,b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];d=l.apply(this,$jscomp.arrayFromIterable(b))||this;d.onExposureChange=function(a){a>=d.visibilityPercent?d.setVisible():d.setInvisible()};d.logger=d.context.newLogger('VisibilityHandlerMRAIDExposureChange['+
d.title+']');return d};$jscomp.inherits(d,l);d.prototype.enable=function(){if(this.disabled)return!0;if(!this.context.Environment.isMRAID)return!1;Object(k.b)(this.onExposureChange);this.onExposureChange(0);return!0};d.prototype.disable=function(){if(this.disabled)return!0;this.disabled=!0;Object(k.h)(this.onExposureChange);return!0};var m='IntersectionObserver'in window,u={ENABLED:'enabled',DISABLED:'disabled',SKIPPED:'skipped',WAITING:'waiting',STARTED:'started',PAUSED:'paused',FINISHED:'finished'},
F={AD_SESSION_ID:'data-yoc-ad-session-id',CONTAINER_TYPE:'data-yoc-container-type',VIEWABILITY:'data-yoc-tracking-viewability',VIEWABILITY_STATUS:'data-yoc-tracking-viewability-status',VIEWABILITY_TIME:'data-yoc-tracking-viewability-time',VIEWABILITY_GOAL:'data-yoc-tracking-viewability-goal',VIEWABILITY_SUCCESS:'data-yoc-tracking-viewability-success',CLICK:'data-yoc-tracking-click',CLICK_STATUS:'data-yoc-tracking-click-status',CLICK_GOAL:'data-yoc-tracking-click-goal',CLICK_SUCCESS:'data-yoc-tracking-click-success'},
t=function(a,d,b,c,k,D,p,f,m,e,u,t,g,q){p=void 0===p?[]:p;u=void 0===u?!1:u;t=void 0===t?function(){}:t;g=void 0===g?function(){}:g;q=void 0===q?function(a,d){}:q;this.visibilityHandlerGroupList=[];this.visibilityHandler=null;this.title=a;this.context=d;this.logger=d.newLogger('Visibility');this.visibilityTarget=b;this.visibilityPercent=c;this.visibilityTime=k;this.visibilityHandlerType=D;this.visibilityHandlerGroupList=p;this.performOnlyOnce=f;this.callbackVisible=m;this.callbackInvisible=e;this.callbackTrackingStarts=
t;this.callbackTrackingEnds=g;this.callbackVisibleUpdate=q;this.logger.log('Setup visibility check '+this.title,{visibilityTarget:this.visibilityTarget,visibilityPercent:this.visibilityPercent,visibilityTime:this.visibilityTime,visibilityHandlerType:this.visibilityHandlerType,performOnlyOnce:this.performOnlyOnce});u&&(this.init(),this.enable())};t.prototype.init=function(){var b=this.context.Environment;switch(this.visibilityHandlerType){case 'auto':b.isMRAID?Object(k.k)()?this.visibilityHandler=
new d(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds):this.visibilityHandler=new a(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds):
Object(B.c)(b.hostWindow)?this.visibilityHandler=new p(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds):this.visibilityHandler=!0===m?new q(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,
this.callbackTrackingStarts,this.callbackTrackingEnds):new v(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds,this.callbackVisibleUpdate);break;case 'scroll':this.visibilityHandler=new v(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,
this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds,this.callbackVisibleUpdate);break;case 'intersectionObserver':!0===m?this.visibilityHandler=new q(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,this.callbackTrackingEnds):this.logger.error(this.title+" Can't setup visibility tracking (via intersectionObserver)");
break;default:this.logger.error(this.title+' Can\'t setup visibility tracking (unknown or unsupported handler "'+this.visibilityHandlerType+'")')}};t.prototype.enable=function(){switch(this.visibilityHandlerType){case 'auto':return!0===m?this.visibilityHandler.enable()?!0:(this.visibilityHandler=new v(this.title,this.context,this.visibilityTarget,this.visibilityPercent,this.visibilityTime,this.visibilityHandlerGroupList,this.performOnlyOnce,this.callbackVisible,this.callbackInvisible,this.callbackTrackingStarts,
this.callbackTrackingEnds,this.callbackVisibleUpdate),this.visibilityHandler.enable()):this.visibilityHandler.enable();case 'scroll':return this.visibilityHandler.enable();case 'intersectionObserver':if(!0===m)return this.visibilityHandler.enable();this.logger.error(this.title+" Can't enable visibility tracking (via intersectionObserver)");break;default:this.logger.error(this.title+' Can\'t enable visibility tracking (unknown or unsupported handler "'+this.visibilityHandlerType+'")')}return!1};t.prototype.disable=
function(){return this.visibilityHandler.disable()}},function(g,e,b){function n(a){a=a.style;a.display='none';a.visibility='hidden'}function c(a){a=a.style;a.display='';a.visibility='visible'}function l(a,d){var b=a.hostDocument.createElement('style');b.append(a.hostDocument.createTextNode(d));a.hostDocument.head.append(b)}function v(a){return a.mozHasAudio||!!a.webkitAudioDecodedByteCount||!(!a.audioTracks||!a.audioTracks.length)}b.d(e,'e',function(){return q});b.d(e,'f',function(){return n});b.d(e,
'h',function(){return c});b.d(e,'g',function(){return l});b.d(e,'b',function(){return B});b.d(e,'a',function(){return p});b.d(e,'c',function(){return t});b.d(e,'d',function(){return w});var q=function(a,d){return a.hostDocument.createElement(d)},B=function(a,d,b){var c=this;b=void 0===b?!0:b;this.onLoad=function(){c.logger.log('On load of img tag invoked',c.url);var a=c.state;c.state='loaded';c.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:c,previousState:a}})};
this.onError=function(){c.logger.log('On error of img tag invoked',c.url);var a=c.state;c.state='failed-preload';c.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:c,previousState:a}})};var f=document.createElement('img');this.context=a;this.logger=a.newLogger('Image');this.state='preloading';this.node=f;this.url=d;this.logger.log('Creating img tag ('+(b?'asset':'no asset')+')',this.url);!0===b&&(this.logger.log('Add img tag as new asset',this.url),a.messageBus.asset.emit({kind:'added',
message:{kind:'new-asset',asset:this}}),f.addEventListener('load',this.onLoad,!1),f.addEventListener('error',this.onError,!1));f.src=d},p=function(a,d,b){var c=this;b=void 0===b?!0:b;this.onLoad=function(){var a=c.state;c.state='loaded';c.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:c,previousState:a}})};this.onError=function(){var a=c.state;c.state='failed-preload';c.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:c,previousState:a}})};
var f=document.createElement('iframe');this.context=a;this.state='preloading';this.node=f;this.url=d;!0===b&&(a.messageBus.asset.emit({kind:'added',message:{kind:'new-asset',asset:this}}),f.addEventListener('load',this.onLoad,!1),f.addEventListener('error',this.onError,!1));f.src=d},k=b(9),a=b(7);g=b(5);var d=b(6),m=b(4),u=b(2),F=g.a,t=function(b,c){var f=F.call(this)||this;f.state='preloading';f.width=0;f.height=0;f.previousVideoProgress={currentTime:0,percentage:0};f.loadPromiseResolver=0;f.loadPromiseReject=
0;f.isEnded=!1;f.muted=!0;f.haveRestartedOnFirstUnmute=!1;f.haveStarted=!1;f.reportedStats=!1;f.dimensionsListenersForHLS={};f.isWaiting=!1;f.onSourceError=function(){var a='Video: <source> error: '+f.url;f.context.Environment.isLogMode&&(console.error('debug!'),console.error(a));f.logger.error(a);f.loadPromiseReject(new u.k(u.g));a=f.state;f.state='failed-preload';f.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:f,previousState:a}});f.context.messageBus.event.emit({kind:'close',
interactive:!1})};f.onError=function(){var a=f.context.Environment,d='Video: error: '+f.url,c=f.video.error,b=u.f;c?(c.message&&(d+='\n'+c.message),f.logger.error(d),-1!==[3,4].indexOf(c.code)&&(b=u.h)):f.logger.error(d);f.context.messageBus.event.emit({kind:'tracker',event:'video-error',details:{errorCode:b}});f.context.messageBus.event.emit({kind:'close',interactive:!1});(a.isLogMode||a.isDebugMode)&&f.context.troubleshooting.log()};f.onLoadedMetadata=function(){f.logger.debug('Video: loaded metadata',
{url:f.url,'video-dimensions':f.video.videoWidth+'\u00d7'+f.video.videoHeight});var a=f.state;f.state='loaded';f.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:f,previousState:a}});f.reattachVideo();var d=f.video;a=d.videoWidth;var c=d.videoHeight;d=d.duration;a||c?f.emit({kind:'actualVideoSizes',width:a,height:c,duration:d,source:'video-slot'}):f.subscribeToVideoEventsToGetVideoSizes();f.loadPromiseResolver()};f.onLoadedData=function(){f.logger.debug('Video: loaded data');
f.emit({kind:'audioAvailability',hasAudio:v(f.video)})};f.onCanPlay=function(){f.logger.debug('Video: canplay')};f.onPlay=function(){var a=f.context.Environment;f.haveStarted?f.emit({kind:'resume'}):(f.emit({kind:'start'}),f.haveStarted=!0);var c=f.options,b=c.breakpointTrackingPercentage;f.logger.debug('Video: Play',{'tracking-time-breakpoints':c.breakpointTrackingTime.map(function(d){return Object(m.a)(a,d)}).join(', '),'tracking-percent-breakpoints':b.map(function(c){return Object(d.a)(a,c)}).join(', ')});
f.reportedStats||(f.reportedStats=!0,f.reportStats());f.emit({kind:'play'})};f.onPause=function(){f.emit({kind:'pause'})};f.onResume=function(){f.emit({kind:'resume'})};f.onTimeUpdate=function(){f.emit({kind:'timeUpdate'});f.performVideoTracking(f.currentProgress)};f.onEnded=function(){f.logger.debug('Video: Ended');f.performVideoTracking(f.currentProgress);f.isEnded=!0;f.emit({kind:'complete'})};f.onWaiting=function(){f.logger.debug('Video: Waiting');f.isWaiting=!0;f.emit({kind:'waiting'})};f.onPlaying=
function(){f.logger.debug('Video: Playing');f.isWaiting&&f.emit({kind:'resumed-from-waiting'});f.isWaiting=!1};var k=b.context,p=b.initConfig,D=b.sourceUrl;f.adConfig=b.adConfig;f.uniqueId='yoc_video_player_'+p.meta.adSessionId;k.messageBus.asset.emit({kind:'added',message:{kind:'new-asset',asset:f}});f.context=k;f.logger=k.newLogger('VideoPlayerMedia');f.url=D;b=f.context.Environment;f.options=Object.assign({},a.a,c);c=q(b,'div');f.wrapper=c;c.style.overflow='hidden';c.style.display='block';c=q(b,
'video');f.video=c;c.muted=!0;c.preload='auto';'playsInline'in c&&(c.playsInline=!0);c.style.pointerEvents='none';c.style.height='100%';c.style.width='100%';c.id=f.uniqueId;c.addEventListener('loadedmetadata',f.onLoadedMetadata,!1);c.addEventListener('loadeddata',f.onLoadedData,!1);c.addEventListener('error',f.onError,!1);c.addEventListener('canplay',f.onCanPlay,!1);c.addEventListener('play',f.onPlay,!1);c.addEventListener('playing',f.onPlaying,!1);c.addEventListener('timeupdate',f.onTimeUpdate,!1);
c.addEventListener('ended',f.onEnded,!1);c.addEventListener('waiting',f.onWaiting,!1);f.setDimensions({width:f.width,height:f.height,scaleFactor:1});c.style.display='none';f.context.rootContainer.append(c);f.loadPromise=new Promise(function(a,d){f.loadPromiseResolver=a;f.loadPromiseReject=d});c=q(b,'source');f.videoSource=c;return f};$jscomp.inherits(t,F);t.prototype.load=function(){this.videoSource.addEventListener('error',this.onSourceError,!1);var a=this.url;/i(Pod|Phone|Pad)/.test(navigator.platform)&&
!/#/.test(a)&&(a+='#t=0.001');this.videoSource.src=a;this.video.append(this.videoSource);return this.loadPromise};t.prototype.setDimensions=function(a){var d=a.width,c=a.height;a=a.scaleFactor;this.width=d;this.height=c;var b=this.wrapper.style;b.width=''+d+'px';b.height=''+c+'px';b.transform='scale('+a+')';b.transformOrigin='top left'};t.prototype.performVideoTracking=function(a){var c=this,b=this.options,k=this.previousVideoProgress,p=this.context.Environment;b.breakpointTrackingTime.forEach(function(d){k.currentTime<=
d&&d<a.currentTime&&(c.logger.debug('progressTime',{time:Object(m.a)(p,d)}),c.emit({kind:'progressTime',time:d}))});b.breakpointTrackingPercentage.forEach(function(b){var f=b/100;k.percentage<=f&&f<a.percentage&&(c.logger.debug('progressPercentage',{time:Object(d.a)(p,f)}),c.emit({kind:'progressPercentage',percentage:b}))});.25>=k.percentage&&.25<a.percentage?(this.logger.debug('firstQuartile'),this.emit({kind:'firstQuartile'})):.5>=k.percentage&&.5<a.percentage?(this.logger.debug('midpoint'),this.emit({kind:'midpoint'})):
.75>=k.percentage&&.75<a.percentage&&(this.logger.debug('thirdQuartile'),this.emit({kind:'thirdQuartile'}));this.previousVideoProgress=a};t.prototype.appendTo=function(a){a.append(this.wrapper)};t.prototype.reattachVideo=function(){var a=this.video;this.wrapper.append(a);a.style.removeProperty('display')};t.prototype.subscribeToVideoEventsToGetVideoSizes=function(){var a=this,d=this.video,c=function(){var c=d.videoWidth,b=d.videoHeight,f=d.duration;c&&b&&f&&(a.unsubscribeFromVideoEvents(c,b,f),a.emit({kind:'actualVideoSizes',
width:c,height:b,duration:f,source:'video-slot'}))},b;for(b in d)if(/^on/.test(b)&&!/mouse|touch|pointer/.test(b)){var k=b.slice(2);this.dimensionsListenersForHLS[k]=c;d.addEventListener(k,c,!1)}};t.prototype.unsubscribeFromVideoEvents=function(a,d,c){var b=this.dimensionsListenersForHLS,f=this.video;Object.keys(b).forEach(function(a){f.removeEventListener(a,b[a],!1)})};t.prototype.mute=function(){this.muted=!0;var a=this.video;this.logger.debug('mute');a.muted||(a.muted=!0,this.emit({kind:'mute'}))};
t.prototype.unmute=function(){this.muted=!1;var a=this.video;this.haveRestartedOnFirstUnmute||(a.currentTime=0);this.logger.debug('unmute');a.muted&&(a.muted=!1,this.emit({kind:'unmute'}));this.haveRestartedOnFirstUnmute=!0};t.prototype.play=function(){var a=this;if(this.isEnded)this.logger.debug('play: already ended');else{this.logger.debug('play');var d=this.video.play();d&&d.then(function(){}).catch(function(d){a.logger.error('play: '+d);a.context.messageBus.event.emit({kind:'tracker',event:'video-error',
details:{errorCode:u.f}});a.context.messageBus.event.emit({kind:'close',interactive:!1})})}};t.prototype.pause=function(){this.logger.debug('pause');this.video.pause()};t.prototype.seek=function(a){var d=this.video,c=this.context.Environment;if(0<=a&&a<=d.duration)this.logger.debug('seek',{timeOffset:Object(m.a)(c,a)}),d.currentTime=a;else if(a>=-d.duration){var b=d.duration+a;this.logger.debug('seek',{timeOffset:Object(m.a)(c,a),targetTime:Object(m.a)(c,b)});d.currentTime=b}else this.logger.debug('seek: bad timeOffset',
{timeOffset:Object(m.a)(c,a)})};t.prototype.dispose=function(){this.logger.debug('dispose');var a=this.video,d=this.videoSource;a.removeEventListener('loadedmetadata',this.onLoadedMetadata,!1);a.removeEventListener('loadeddata',this.onLoadedData,!1);a.removeEventListener('error',this.onError,!1);a.removeEventListener('canplay',this.onCanPlay,!1);a.removeEventListener('play',this.onPlay,!1);a.removeEventListener('playing',this.onPlaying,!1);a.removeEventListener('pause',this.onPause,!1);a.removeEventListener('resume',
this.onResume,!1);a.removeEventListener('timeupdate',this.onTimeUpdate,!1);a.removeEventListener('ended',this.onEnded,!1);a.removeEventListener('waiting',this.onWaiting,!1);d.removeEventListener('error',this.onSourceError,!1);a.pause()};t.prototype.reportStats=function(){var d=this.video;this.context.messageBus.event.emit({kind:'tracker',event:'video-on-play-stats',details:{stats:Object(a.b)(d)+'x'+d.videoWidth+'x'+d.videoHeight+'@'+Object(m.a)(this.context.Environment,d.duration)}})};t.prototype.addSubtitles=
function(a){var d=this.context.Environment,c=q(d,'track'),b=new Blob([a],{type:'text/vtt'});a=this.adConfig.video.subtitles;c.kind='captions';c.src=URL.createObjectURL(b);this.video.appendChild(c);c.mode='showing';this.video.textTracks[0].mode='showing';c=/Firefox/.test(navigator.userAgent)?'':'font-size: '+a.fontSize+';';l(d,'\n#'+this.uniqueId+'::-webkit-media-text-track-display { width: 64% !important; margin-left: 18% !important; }\n#'+this.uniqueId+'::cue { color: '+a.textColor+' !important; background-color: '+
a.bgColor+' !important; '+c+' }\n#'+this.uniqueId+'::-webkit-media-text-track-display-backdrop { background-color: transparent !important; }\n')};$jscomp.global.Object.defineProperties(t.prototype,{currentProgress:{configurable:!0,enumerable:!0,get:function(){if(0===this.video.readyState)return{currentTime:0,percentage:0};var a=this.video;return{currentTime:this.video.currentTime,percentage:a.currentTime/a.duration}}}});var x=g.a,z=function(a,c,b,k,p,u,e,t,g){var f=x.call(this)||this;f.loadPromiseResolver=
0;f.loadPromiseReject=0;f.adHasBeenLoaded=!1;f.adRemainingDurationTimeoutPollId=0;f.lastCurrentTime=0;f.lastVolume=0;f.haveStarted=!1;f.disposed=!1;f.isEnded=!1;f.adStopInvoked=!1;f.videoCompleted=!1;f.onVPAIDLoaded=function(){f.logger.debug('onVPAIDLoaded');var a=f.vpaidIframe.contentWindow;if(a&&a.getVPAIDAd){var d=a.getVPAIDAd();if(f.checkVPAIDInterface(d)){f.ad=d;f.logger.debug('subscribing VPAID event handlers');Object.keys(f.callbacks).forEach(function(a){d.subscribe(f.callbacks[a],a)});a=d.handshakeVersion('2.0');
f.logger.debug('handshakeVersion',{result:a});a={AdParameters:f.adParameters};var c={slot:f.slot,videoSlot:f.videoSlot,videoSlotCanAutoPlay:!1};f.logger.debug('initAd',{width:f.width,height:f.height,viewMode:'normal',desiredBitrate:500,creativeData:JSON.stringify(a,null,2)});f.timeoutCallTimerId=window.setTimeout(f.timeoutCall.bind(f,'initAd'),f.adConfig.video.VPAIDCallTimeout);d.initAd(f.width,f.height,'normal',500,a,c)}}};f.onVPAIDLoadError=function(){f.loadPromiseReject(Error('unable to load vpaid: '+
f.vpaidUrl))};f.onAdStarted=function(){f.timeoutCallTimerId&&(window.clearTimeout(f.timeoutCallTimerId),delete f.timeoutCallTimerId);if(!f.disposed){f.haveStarted=!0;var a=f.ad.getAdWidth(),d=f.ad.getAdHeight();f.tryToUseVideoDimensionsFromTheVideoInsideSlot();f.logger.debug('onStartAd',{width:a,height:d});f.dumpDebugInfo();var c=function(){f.adRemainingDurationTimeoutPollId=window.setTimeout(c,250);f.onTimeUpdate()};c();f.emit({kind:'AdStarted'})}};f.onAdStopped=function(){if(!f.adStopInvoked)f.onAdVideoComplete();
f.disposed||(f.logger.debug('onStopAd'),window.clearTimeout(f.adRemainingDurationTimeoutPollId))};f.onAdSkipped=function(){f.disposed||(f.logger.debug('onSkipAd'),f.emit({kind:'AdSkipped'}))};f.onAdLoaded=function(){f.timeoutCallTimerId&&(window.clearTimeout(f.timeoutCallTimerId),delete f.timeoutCallTimerId);f.disposed||(f.logger.debug('onAdLoaded'),f.context.messageBus.event.emit({kind:'tracker',event:'vpaid-init'}),f.adHasBeenLoaded=!0,f.lastVolume=f.ad.getAdVolume(),f.dumpDebugInfo(),f.loadPromiseResolver())};
f.onAdLinearChange=function(){f.disposed||f.logger.debug('onAdLinearChange')};f.onAdSizeChange=function(){if(!f.disposed){var a=f.ad.getAdWidth(),d=f.ad.getAdHeight();f.logger.debug('onAdSizeChange',{width:a,height:d})}};f.onAdExpandedChange=function(){f.disposed||f.logger.debug('onAdExpandedChange')};f.onAdSkippableStateChange=function(){f.disposed||f.logger.debug('onAdSkippableStateChange')};f.onAdDurationChange=function(){if(!f.disposed){var a=f.ad.getAdDuration();f.logger.debug('onAdDurationChange',
{duration:Object(m.a)(f.context.Environment,a)})}};f.onAdRemainingTimeChange=function(){f.disposed||f.logger.debug('onAdRemainingTimeChange')};f.onAdVolumeChange=function(){if(!f.disposed){var a=f.ad.getAdVolume(),c=f.lastVolume,b=f.context.Environment;f.logger.debug('onAdVolumeChange',{last:Object(d.a)(b,c),current:Object(d.a)(b,a)});0===a&&0<c?f.emit({kind:'AdVolumeChange',muted:!0}):f.emit({kind:'AdVolumeChange',muted:!1});f.lastVolume=a}};f.onAdImpression=function(){f.disposed||(f.logger.debug('onAdImpression'),
f.emit({kind:'AdImpression'}))};f.onAdClickThru=function(a,d,c){f.disposed||(f.logger.debug('onAdClickThru',{url:a,id:d,playerHandles:c}),d={kind:'AdClickThru',playerHandles:c},a&&(d.url=a),f.emit(d))};f.onAdInteraction=function(){f.disposed||f.logger.debug('onAdInteraction')};f.onAdVideoStart=function(){if(!f.disposed){f.logger.log('onAdVideoStart');var a=f.ad.getAdWidth(),d=f.ad.getAdHeight();f.tryToUseVideoDimensionsFromTheVideoInsideSlot();f.callbackWithMediaFileDimensions(a,d);f.dumpDebugInfo();
f.emit({kind:'AdVideoStart'})}};f.onAdVideoFirstQuartile=function(){f.disposed||(f.logger.debug('onAdVideoFirstQuartile'),f.emit({kind:'AdVideoFirstQuartile'}))};f.onAdVideoMidpoint=function(){f.disposed||(f.logger.debug('onAdVideoMidpoint'),f.emit({kind:'AdVideoMidpoint'}))};f.onAdVideoThirdQuartile=function(){f.disposed||(f.logger.debug('onAdVideoThirdQuartile'),f.emit({kind:'AdVideoThirdQuartile'}))};f.onAdVideoComplete=function(){f.isEnded=!0;f.videoCompleted||(f.videoCompleted=!0,f.disposed||
(f.logger.debug('onAdVideoComplete'),f.emit({kind:'AdVideoComplete'})))};f.onAdUserAcceptInvitation=function(){f.disposed||f.logger.debug('onAdUserAcceptInvitation')};f.onAdUserMinimize=function(){f.disposed||f.logger.debug('onAdUserMinimize')};f.onAdUserClose=function(){f.disposed||f.logger.debug('onAdUserClose')};f.onAdPaused=function(){f.disposed||(f.logger.debug('onAdPaused'),window.clearTimeout(f.adRemainingDurationTimeoutPollId),f.emit({kind:'AdPaused'}))};f.onAdPlaying=function(){f.disposed||
(f.logger.debug('onAdPlaying'),f.emit({kind:'AdPlaying'}))};f.onAdError=function(a){f.disposed||(f.logger.debug('onAdError'),f.emit({kind:'AdError',message:a}))};f.onAdLog=function(){f.disposed||f.logger.debug('onAdLog')};f.onTimeUpdate=function(){var a=f.currentTime;a!==f.lastCurrentTime&&f.emit({kind:'progressTime',currentTime:a,duration:f.ad.getAdDuration()});f.lastCurrentTime=a};f.adConfig=c;f.context=a;f.logger=a.newLogger('VPAIDProcessor');f.logger.debug('constructor');f.adParameters=k;f.vpaidUrl=
b;f.slot=p;f.videoSlot=u;f.width=e;f.height=t;f.videoPlayerVPAID=g;f.loadPromise=new Promise(function(a,d){f.loadPromiseResolver=a;f.loadPromiseReject=d});return f};$jscomp.inherits(z,x);z.prototype.load=function(){this.logger.debug('load');var a=document.createElement('iframe');n(a);this.vpaidIframe=a;this.context.rootContainer.append(a);var d=a.contentWindow;d.inDapIF=!0;var f=d.document.createElement('script');f.src=this.vpaidUrl;f.addEventListener('load',this.onVPAIDLoaded);f.addEventListener('error',
this.onVPAIDLoadError);setTimeout(function(){d.document.body.appendChild(f)},0);return this.loadPromise};z.prototype.setDimensions=function(a){var d=a.width;a=a.height;this.disposed||this.isEnded||(this.logger.debug('vpaid.resizeAd()',{width:d,height:a,viewMode:'normal'}),this.ad.resizeAd(d,a,'normal'))};z.prototype.play=function(){this.isReady?(this.logger.debug('play'),this.haveStarted?(this.logger.debug('vpaid.resumeAd()'),this.ad.resumeAd()):(this.timeoutCallTimerId&&window.clearTimeout(this.timeoutCallTimerId),
this.timeoutCallTimerId=window.setTimeout(this.timeoutCall.bind(this,'startAd'),this.adConfig.video.VPAIDCallTimeout),this.logger.debug('vpaid.startAd()'),this.ad.startAd())):this.logger.warn("play: vpaid creative isn't ready")};z.prototype.pause=function(){this.isReady?(this.logger.debug('pause'),this.logger.debug('vpaid.pauseAd()'),this.ad.pauseAd()):this.logger.warn("pause: vpaid creative isn't ready")};z.prototype.mute=function(){this.isReady?(this.logger.debug('mute'),this.logger.debug('vpaid.setAdVolume()',
{volume:0}),this.ad.setAdVolume(0)):this.logger.warn("mute: vpaid creative isn't ready")};z.prototype.unmute=function(){this.isReady?(this.logger.debug('unmute'),this.logger.debug('vpaid.setAdVolume()',{volume:1}),this.ad.setAdVolume(1)):this.logger.warn("unmute: vpaid creative isn't ready")};z.prototype.checkVPAIDInterface=function(a){this.logger.debug('checking VPAID interface');return'handshakeVersion initAd startAd stopAd skipAd resizeAd pauseAd resumeAd expandAd collapseAd subscribe unsubscribe'.split(' ').every(function(d){return'function'===
typeof a[d]})};z.prototype.dumpDebugInfo=function(){var a=this.ad;this.logger.debug('VPAID properties',{adLinear:a.getAdLinear(),adWidth:a.getAdWidth(),adHeight:a.getAdHeight(),adExpanded:a.getAdExpanded(),adSkippableState:a.getAdSkippableState(),adRemainingTime:a.getAdRemainingTime(),adDuration:a.getAdDuration(),adVolume:a.getAdVolume(),adCompanions:a.getAdCompanions(),adIcons:a.getAdIcons()})};z.prototype.dispose=function(){var a=this;this.logger.debug('dispose');this.disposed=!0;this.ad&&(Object.keys(this.callbacks).forEach(function(d){a.ad.unsubscribe(a.callbacks[d],
d)}),this.timeoutCallTimerId=window.setTimeout(this.timeoutCall.bind(this,'stopAd'),this.adConfig.video.VPAIDCallTimeout),this.logger.debug('vpaid.stopAd()'),this.adStopInvoked=!0,this.ad.stopAd())};z.prototype.timeoutCall=function(a){this.disposed||(this.logger.error('VPAID Call Timeout',{callName:a}),this.context.messageBus.event.emit({kind:'tracker',event:'video-error',details:{errorCode:u.j}}),this.context.messageBus.event.emit({kind:'close',interactive:!1}))};z.prototype.tryToUseVideoDimensionsFromTheVideoInsideSlot=
function(){var a=this;if(this.videoSlot.videoWidth&&this.videoSlot.videoHeight&&this.videoSlot.duration)this.dimensionsCallback(this.videoSlot.videoWidth,this.videoSlot.videoHeight,this.videoSlot.duration,'video-slot'),this.checkAudio(this.videoSlot),this.reportStats(this.videoSlot);else{var d=Array.apply(null,this.slot.querySelectorAll('video')).filter(function(d){return d!==a.videoSlot});if(1===d.length){var f=d[0],c=f.videoWidth;f=f.videoHeight;if(c&&f){var b=this.ad.getAdDuration();this.dimensionsCallback(c,
f,b,'video-slot');this.checkAudio(d[0]);this.reportStats(d[0])}}}};z.prototype.callbackWithMediaFileDimensions=function(a,d){var f=this.ad.getAdDuration();this.dimensionsCallback(a,d,f,'vast-mediafile')};z.prototype.dimensionsCallback=function(a,d,f,c){this.videoPlayerVPAID.emit({kind:'actualVideoSizes',width:a,height:d,duration:f,source:c})};z.prototype.reportStats=function(d){this.context.messageBus.event.emit({kind:'tracker',event:'video-on-play-stats',details:{stats:Object(a.b)(d)+'x'+d.videoWidth+
'x'+d.videoHeight+'x'+Object(m.a)(this.context.Environment,d.duration)}})};z.prototype.checkAudio=function(a){this.videoPlayerVPAID.emit({kind:'audioAvailability',hasAudio:v(a)})};$jscomp.global.Object.defineProperties(z.prototype,{callbacks:{configurable:!0,enumerable:!0,get:function(){return{AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdSkipped:this.onAdSkipped,AdLoaded:this.onAdLoaded,AdLinearChange:this.onAdLinearChange,AdSizeChange:this.onAdSizeChange,AdExpandedChange:this.onAdExpandedChange,
AdSkippableStateChange:this.onAdSkippableStateChange,AdDurationChange:this.onAdDurationChange,AdRemainingTimeChange:this.onAdRemainingTimeChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:this.onAdInteraction,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,
AdUserMinimize:this.onAdUserMinimize,AdUserClose:this.onAdUserClose,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog}}},isReady:{configurable:!0,enumerable:!0,get:function(){return!!this.ad&&this.adHasBeenLoaded}},currentTime:{configurable:!0,enumerable:!0,get:function(){if(!this.isReady)return 0;var a=this.ad.getAdRemainingTime();return this.ad.getAdDuration()-a}}});var E=b(0),I=g.a,w=function(d,c){var f=I.call(this)||this;f.vpaidLoadPromiseResolved=!1;
f.previousVideoProgress=0;f.isEnded=!1;f.muted=!0;f.wasClicked=!1;f.onVpaidProcessorEvent=function(a){switch(a.kind){case 'AdSkipped':f.emit({kind:'skip'});break;case 'AdStarted':f.emit({kind:'creativeView'});break;case 'AdImpression':f.emit({kind:'impression'});break;case 'AdVideoStart':f.emit({kind:'start'});break;case 'AdVideoFirstQuartile':f.emit({kind:'firstQuartile'});break;case 'AdVideoMidpoint':f.emit({kind:'midpoint'});break;case 'AdVideoThirdQuartile':f.emit({kind:'thirdQuartile'});break;
case 'AdVideoComplete':f.isEnded=!0;f.emit({kind:'complete'});break;case 'AdPaused':f.emit({kind:'pause'});break;case 'AdPlaying':f.emit({kind:'resume'});break;case 'AdError':throw f.context.messageBus.event.emit({kind:'tracker',event:'video-error',details:{errorCode:u.j,message:a.message}}),f.context.messageBus.event.emit({kind:'close',interactive:!1}),new u.k(u.j);case 'AdVolumeChange':f.emit({kind:a.muted?'mute':'unmute'});break;case 'AdClickThru':f.wasClicked?(f.logger.log('SKIP repeated CLICK on VPAID video creative'),
f.wrapper.setAttribute(E.a.CLICK_SUCCESS,'click-repeated'),f.context.messageBus.event.emit({kind:'tracker',event:'click-repeated',details:{source:'video-vpaid'}})):(f.logger.log('Handle CLICK on VPAID video creative'),f.wasClicked=!0,f.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'video-vpaid'}}),!0===a.playerHandles&&a.url?(Object(k.a)(f.context,a.url),f.wrapper.setAttribute(E.a.CLICK_STATUS,E.b.FINISHED),f.wrapper.setAttribute(E.a.CLICK_SUCCESS,'click')):(f.wrapper.setAttribute(E.a.CLICK_STATUS,
E.b.FINISHED),f.wrapper.setAttribute(E.a.CLICK_SUCCESS,'click-handled-by-ad')));break;case 'progressTime':f.processTimeEvent(a.currentTime,a.duration)}};f.onVideoSlotLoadedMetadata=function(){var a=f.video;f.emit({kind:'actualVideoSizes',duration:a.duration,width:a.videoWidth,height:a.videoHeight,source:'video-slot'});f.emit({kind:'audioAvailability',hasAudio:v(f.video)})};f.options=Object.assign({},a.a,c);c=d.context;var b=d.adConfig,p=d.vpaidExecutableUrl,m=d.adParameters,e=d.width;d=d.height;f.context=
c;f.width=e;f.height=d;f.logger=c.newLogger('VideoPlayerVPAID');d=document.createElement('div');f.wrapper=d;d.style.cursor='pointer';d.style.position='relative';e=document.createElement('video');d.setAttribute(E.a.CLICK,E.b.ENABLED);d.setAttribute(E.a.CLICK_STATUS,E.b.WAITING);d.setAttribute(E.a.CLICK_GOAL,'click');f.video=e;e.muted=!0;e.preload='auto';e.style.pointerEvents='none';e.addEventListener('loadedmetadata',f.onVideoSlotLoadedMetadata,!1);'playsInline'in e&&(e.playsInline=!0);d.append(e);
c=new z(c,b,p,m,d,e,f.width,f.height,f);f.vpaidProcessor=c;c.on(f.onVpaidProcessorEvent);return f};$jscomp.inherits(w,I);w.prototype.load=function(){var a=this;this.logger.debug('load');this.vpaidLoadPromise=this.vpaidProcessor.load();this.vpaidLoadPromise.then(function(){a.vpaidLoadPromiseResolved=!0});return this.vpaidLoadPromise};w.prototype.processTimeEvent=function(a,c){var f=this;if(!(a>c||0>=a||0>=c)){var b=this.options,k=b.breakpointTrackingTime,p=this.previousVideoProgress,e=p/c,u=a/c,t=
this.context.Environment;b.breakpointTrackingPercentage.forEach(function(a){var c=a/100;e<=c&&c<u&&(f.logger.debug('progressPercentage',{previousPercentage:Object(d.a)(t,e),percentage:Object(d.a)(t,c),currentPercentage:Object(d.a)(t,u)}),f.emit({kind:'progressPercentage',percentage:a}))});k.forEach(function(d){p<=d&&d<a&&(f.logger.debug('progressTime',{previousTime:Object(m.a)(t,p),time:Object(m.a)(t,d),currentTime:Object(m.a)(t,a)}),f.emit({kind:'progressTime',time:d}))});this.previousVideoProgress=
a}};w.prototype.setDimensions=function(a){var d=this,f=a.width,c=a.height;a=a.scaleFactor;this.width=f;this.height=c;var b=this.wrapper.style;b.width=f+'px';b.height=c+'px';b.transform='scale('+a+')';b.transformOrigin='top left';this.vpaidLoadPromiseResolved?this.vpaidProcessor.setDimensions({width:f,height:c}):this.vpaidLoadPromise&&this.vpaidLoadPromise.then(function(){d.vpaidProcessor.setDimensions({width:f,height:c})})};w.prototype.appendTo=function(a){a.append(this.wrapper)};w.prototype.mute=
function(){this.muted=!0;this.logger.debug('mute');this.vpaidProcessor.mute();this.video.muted=!0};w.prototype.unmute=function(){this.muted=!1;this.logger.debug('unmute');this.vpaidProcessor.unmute();this.video.muted=!1};w.prototype.play=function(){this.isEnded?this.logger.debug('play: video is ended'):(this.logger.debug('play'),this.vpaidProcessor.play())};w.prototype.pause=function(){this.logger.debug('pause');this.vpaidProcessor.pause()};w.prototype.dispose=function(){this.logger.debug('dispose');
this.vpaidProcessor.off(this.onVpaidProcessorEvent);this.vpaidProcessor.dispose();this.video.removeEventListener('loadedmetadata',this.onVideoSlotLoadedMetadata,!1)}},function(g,e,b){function n(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||'object'!==typeof b&&'function'!==typeof b?c:b}function c(c,b){if('function'!==typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);c.prototype=Object.create(b&&
b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}b.d(e,'a',function(){return 100});b.d(e,'b',function(){return 300});b.d(e,'c',function(){return 301});b.d(e,'d',function(){return 302});b.d(e,'e',function(){return 303});b.d(e,'f',function(){return 400});b.d(e,'g',function(){return 401});b.d(e,'h',function(){return 405});b.d(e,'i',function(){return 900});b.d(e,'j',function(){return 901});b.d(e,'k',function(){return v});
var l=function(b){function e(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'';if(!(this instanceof e))throw new TypeError('Cannot call a class as a function');var b=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c));Object.defineProperty(b,'message',{configurable:!0,enumerable:!1,value:c,writable:!0});Object.defineProperty(b,'name',{configurable:!0,enumerable:!1,value:b.constructor.name,writable:!0});if(Error.hasOwnProperty('captureStackTrace'))return Error.captureStackTrace(b,
b.constructor),n(b);Object.defineProperty(b,'stack',{configurable:!0,enumerable:!1,value:Error(c).stack,writable:!0});return b}c(e,b);return e}(function(c){function b(){c.apply(this,arguments)}b.prototype=Object.create(c.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c;return b}(Error)),v=function(c,b){var p=l.call(this,'VAST error '+c)||this;p.$type='VASTError';p.code=c;b&&(p.cause=b);return p};$jscomp.inherits(v,
l)},function(g,e,b){function n(a,d,f,b){var k='undefined'!==typeof MRAID_ENV;a=a.mraid.mode;try{var p=Object(E.b)(d);p&&p.mraid&&p.mraid.mode&&(a=p.mraid.mode)}catch(X){}try{var e=Object(E.b)(f);e&&e.mraid&&e.mraid.mode&&(a=e.mraid.mode)}catch(X){}d='object'===typeof mraid&&null!==mraid;'disabled'!==a&&('check-for-mraid3'!==a||k)||d?(I=b,(b=document.documentElement.querySelector('script[src="mraid.js"]'))?'undefined'!==typeof mraid?l():(b.addEventListener('load',l),b.addEventListener('error',c)):
(b=document.createElement('script'),b.src='mraid.js',b.addEventListener('load',l),b.addEventListener('error',c),document.head.append(b))):b(void 0)}function c(){I(void 0)}function l(){'undefined'===typeof mraid?c():'loading'===mraid.getState()?mraid.addEventListener('ready',function(){w=mraid.getPlacementType();v()}):(w=mraid.getPlacementType(),v())}function v(){D=mraid.getVersion();I({version:D,placement:mraid.getPlacementType(),screenSize:B()})}function q(){if(mraid.getCurrentPosition){var a=mraid.getCurrentPosition(),
d=a.width;a=a.height;if(0<d&&0<a)return{width:d,height:a}}else if(mraid.getSize&&(a=mraid.getSize(),d=a.width,a=a.height,0<d&&0<a))return{width:d,height:a}}function B(){if(mraid.getScreenSize)return mraid.getScreenSize()}function p(){mraid.unload&&mraid.unload()}function k(a){mraid.open(a)}function a(){return mraid.isViewable()}function d(a){0===O.length&&mraid.addEventListener('viewableChange',u);O.push(a)}function m(a){O=O.filter(function(d){return d!==a});0===O.length&&mraid.removeEventListener('viewableChange',
u)}function u(a){O.forEach(function(d){'interstitial'===w?d(a):d(!0)})}function F(a){0===f.length&&mraid.addEventListener('exposureChange',x);f.push(a)}function t(a){f=f.filter(function(d){return d!==a});0===f.length&&mraid.removeEventListener('exposureChange',x)}function x(a){f.forEach(function(d){d(a)})}function z(){try{if(mraid.getExposureChangeAvailability&&mraid.getExposureChangeAvailability())return!0;if('Google Mobile Ads'===MRAID_ENV.sdk)return!1;if(3<=Number(MRAID_ENV.version))return!0}catch(y){}return!1}
b.d(e,'a',function(){return n});b.d(e,'e',function(){return q});b.d(e,'d',function(){return B});b.d(e,'j',function(){return p});b.d(e,'g',function(){return k});b.d(e,'f',function(){return a});b.d(e,'c',function(){return d});b.d(e,'i',function(){return m});b.d(e,'b',function(){return F});b.d(e,'h',function(){return t});b.d(e,'k',function(){return z});var E=b(10),I,w,D,O=[],f=[]},function(g,e,b){function n(c,b){return'number'!==typeof b?(c.isLogMode&&console.error('NaN'),'NaN'):b.toFixed(2)+'s'}b.d(e,
'a',function(){return n})},function(g,e,b){b.d(e,'a',function(){return n});var n=function(){var c=this;this.listeners=[];this.listenersOncer=[];this.listenerOncerUnused=[];this.on=function(b){c.listeners.push(b);return{dispose:function(){c.off(b)}}};this.onEvent=function(b,e){return c.on(function(c){c.kind===b&&e(c)})};this.once=function(b){c.listenersOncer.push(b)};this.onceEvent=function(b,e){var g=function(q){q.kind===b?e(q):c.listenerOncerUnused.push(g)};c.once(g)};this.off=function(b){b=c.listeners.indexOf(b);
-1<b&&c.listeners.splice(b,1)};this.emit=function(b){c.listeners.forEach(function(c){c(b)});c.listenersOncer.forEach(function(c){c(b)});c.listenersOncer=c.listenerOncerUnused;c.listenerOncerUnused=[]};this.pipe=function(b){return c.on(function(c){return b.emit(c)})}}},function(g,e,b){function n(c,b){return'number'!==typeof b?(c.isLogMode&&console.error('NaN'),'NaN'):(100*b).toFixed(2)+'%'}b.d(e,'a',function(){return n})},function(g,e,b){function n(b){switch(b.readyState){case 0:return'HAVE_NOTHING';
case 1:return'HAVE_METADATA';case 2:return'HAVE_CURRENT_DATA';case 3:return'HAVE_FUTURE_DATA';case 4:return'HAVE_ENOUGH_DATA';default:return'UNKNOWN_STATE_'+b.readyState}}function c(b,c,a){switch(c.kind){case 'creativeView':b.messageBus.event.emit({kind:'tracker',event:'video-creativeview'});break;case 'start':b.messageBus.event.emit({kind:'tracker',event:'video-start'});break;case 'complete':b.messageBus.event.emit({kind:'tracker',event:'video-complete'});break;case 'firstQuartile':b.messageBus.event.emit({kind:'tracker',
event:'video-firstquartile'});break;case 'midpoint':b.messageBus.event.emit({kind:'tracker',event:'video-midpoint'});break;case 'thirdQuartile':b.messageBus.event.emit({kind:'tracker',event:'video-thirdquartile'});break;case 'mute':b.messageBus.event.emit({kind:'tracker',event:'video-mute'});break;case 'unmute':b.messageBus.event.emit({kind:'tracker',event:'video-unmute'});break;case 'skip':a();break;case 'progressPercentage':b.messageBus.event.emit({kind:'tracker',event:'video-progress',meta:{type:'relative',
offset:c.percentage},details:{progress:Object(l.a)(b.Environment,c.percentage/100)}});break;case 'progressTime':b.messageBus.event.emit({kind:'tracker',event:'video-progress',meta:{type:'absolute',offset:c.time},details:{progress:Object(v.a)(b.Environment,c.time)}});break;case 'impression':b.messageBus.event.emit({kind:'vpaid-impression'})}}b.d(e,'a',function(){return q});b.d(e,'b',function(){return n});b.d(e,'c',function(){return c});g=b(5);var l=b(6),v=b(4),q={maintainAspectRatio:!0,breakpointTrackingTime:[],
breakpointTrackingPercentage:[]},B=g.a;$jscomp.inherits(function(){return B.apply(this,arguments)||this},B)},function(g,e,b){function n(b){return 0===b&&0<1/b}b.d(e,'a',function(){return n})},function(g,e,b){function n(b,e){var g=b.Environment;g.isMRAID?Object(l.g)(e):(g=c.e(g,'a'),g.target='_blank',g.href=e,c.f(g),b.rootContainer.append(g),g.click(),g.remove())}b.d(e,'a',function(){return n});var c=b(1),l=b(3)},function(g,e,b){function n(b,c){try{var e=JSON.parse(b)}catch(k){c&&c.warn('bad json',
{source:b})}return e}function c(b,c,e,k,a){a=void 0===a?!1:a;if(''!==k){var d=n(k,c);d&&(c.debug('mergeOptions',{custom:JSON.stringify(d,null,2)}),l(c,e,d),Object.keys(d).forEach(function(b){if('string'===typeof d[b]){var k=d[b];switch(b.toLowerCase()){case 'video-overlay-position':switch(k){case 'topleft':e.video.branding.position='top-left';break;case 'topright':e.video.branding.position='top-right';break;case 'bottomleft':e.video.branding.position='bottom-left';break;case 'bottomright':e.video.branding.position=
'bottom-right'}break;case 'video-overlay-url':e.video.branding.mode='static-image';e.video.branding.url=k;break;case 'video-overlay-width':e.video.branding.width=k;break;case 'video-overlay-height':e.video.branding.height=k;break;case 'post-ad-image':e.video.reminderBanner.mode='static-image';e.video.reminderBanner.url=k;break;case 'advertisement-message-text-top':e.advertisementMessage.contentAbove=k;break;case 'advertisement-message-text-bottom':e.advertisementMessage.contentBelow=k;break;case 'scale-to-fit-maximum-width':'scale'===
e.display.responsive.mode&&(e.display.responsive.maximumWidth=k);break;case 'scale-to-fit-maximum-height':'scale'===e.display.responsive.mode&&(e.display.responsive.maximumHeight=k);break;case 'background-image':e.creative.portrait.mode='static-image';e.creative.portrait.imageUrl=k;break;case 'background-width':e.creative.portrait.mode='static-image';e.creative.portrait.width=k;break;case 'background-height':e.creative.portrait.mode='static-image';e.creative.portrait.height=k;break;case 'video-top':'undefined'===
typeof e.video.background.video&&(e.video.background.video={});e.video.background.video.top=k;break;case 'video-left':'undefined'===typeof e.video.background.video&&(e.video.background.video={});e.video.background.video.left=k;break;case 'icon-close':e.closeButton.mode='enabled';e.closeButton.image={url:k,width:30,height:30};break;case 'button-close-show':case 'sticky-button-close-show':v(k)?(e.closeButton.mode='enabled',e.closeButton.image={url:'//creatives.yoc.com/cdn/icons/28x28/icon_grey_close_01.svg',
width:30,height:30}):e.closeButton.mode='disabled';break;case 'button-close-position':e.closeButton.mode='enabled';switch(k){case 'topleft':e.closeButton.position='top-left';break;case 'topright':e.closeButton.position='top-right'}break;case 'skip-in-seconds':e.video.skip.mode='enabled-override-vast';e.video.skip.skipSeconds=k;break;case 'skip-position':switch(k){case 'topleft':e.video.skip.button.position='top-left';break;case 'topright':e.video.skip.button.position='top-right'}break;case 'display-effect':'string'===
typeof k&&'sticky'===k.toLowerCase()?e.display.effect='sticky':'string'===typeof k&&'inline-to-sticky'===k.toLowerCase()?e.display.effect='inlineToSticky':'string'===typeof k&&'mini'===k.toLowerCase()?e.display.effect='understitialMini':'string'===typeof k&&'s'===k.toLowerCase()?e.display.effect='understitialSizeSmall':'string'===typeof k&&'m'===k.toLowerCase()?e.display.effect='understitialSizeMedium':'string'===typeof k&&'xl'===k.toLowerCase()?e.display.effect='understitialSizeLarge':e.display.effect=
'none';break;case 'auto-stopp':e.video.autoStop=v(k);break;case 'overwrite-mrc-settings':break;case 'user-viewability-area':e.tracking.viewabilityPercent=k;break;case 'user-viewability-time':e.tracking.viewabilityTime=parseInt((1E3*parseFloat(k)).toString(),10);break;case 'vcpm':e.tracking.vCPMEnabled=v(k);break;case 'count-impression-on':if(a)switch(k){case 'creativeview':e.tracking.countImpressionOn='video-creativeview';e.tracking.countVPAIDImpressionOn='video-creativeview';break;case 'start':e.tracking.countImpressionOn=
'video-start';e.tracking.countVPAIDImpressionOn='shown';break;case 'viewable_ad_impression':e.tracking.countImpressionOn='viewability';e.tracking.countVPAIDImpressionOn='viewability';break;case 'firstquartile':e.tracking.countImpressionOn='video-firstquartile';e.tracking.countVPAIDImpressionOn='video-firstquartile';break;case 'midpoint':e.tracking.countImpressionOn='video-midpoint';e.tracking.countVPAIDImpressionOn='video-midpoint';break;case 'thirdquartile':e.tracking.countImpressionOn='video-thirdquartile';
e.tracking.countVPAIDImpressionOn='video-thirdquartile';break;case 'complete':e.tracking.countImpressionOn='video-complete';e.tracking.countVPAIDImpressionOn='video-complete';break;case 'button-close':e.tracking.countImpressionOn='close';e.tracking.countVPAIDImpressionOn='close';break;case 'unmute':e.tracking.countImpressionOn='video-unmute';e.tracking.countVPAIDImpressionOn='video-unmute';break;case 'mute':e.tracking.countImpressionOn='video-mute';e.tracking.countVPAIDImpressionOn='video-mute';break;
default:e.tracking.countImpressionOn=k,e.tracking.countVPAIDImpressionOn=k}else c.warn("Skip custom option because it's not a video ad",{customOptionKey:b,customOptionValue:k});break;case 'count-creativeview-on':if(a)switch(k){case 'creativeview':e.tracking.countVideoCreativeviewOn='video-creativeview';e.tracking.countVPAIDVideoCreativeviewOn='video-creativeview';break;case 'start':e.tracking.countVideoCreativeviewOn='video-start';e.tracking.countVPAIDVideoCreativeviewOn='shown';break;case 'viewable_ad_impression':e.tracking.countVideoCreativeviewOn=
'viewability';e.tracking.countVPAIDVideoCreativeviewOn='viewability';break;case 'firstquartile':e.tracking.countVideoCreativeviewOn='video-firstquartile';e.tracking.countVPAIDVideoCreativeviewOn='video-firstquartile';break;case 'midpoint':e.tracking.countVideoCreativeviewOn='video-midpoint';e.tracking.countVPAIDVideoCreativeviewOn='video-midpoint';break;case 'thirdquartile':e.tracking.countVideoCreativeviewOn='video-thirdquartile';e.tracking.countVPAIDVideoCreativeviewOn='video-thirdquartile';break;
case 'complete':e.tracking.countVideoCreativeviewOn='video-complete';e.tracking.countVPAIDVideoCreativeviewOn='video-complete';break;case 'button-close':e.tracking.countVideoCreativeviewOn='close';e.tracking.countVPAIDVideoCreativeviewOn='close';break;case 'unmute':e.tracking.countVideoCreativeviewOn='video-unmute';e.tracking.countVPAIDVideoCreativeviewOn='video-unmute';break;case 'mute':e.tracking.countVideoCreativeviewOn='video-mute';e.tracking.countVPAIDVideoCreativeviewOn='video-mute';break;default:e.tracking.countVideoCreativeviewOn=
k,e.tracking.countVPAIDVideoCreativeviewOn=k}else c.warn("Skip custom option because it's not a video ad",{customOptionKey:b,customOptionValue:k});break;case 'vast-mediafile-priority-1':case 'vast-mediafile-priority-2':case 'vast-mediafile-priority-3':case 'vast-mediafile-priority-4':case 'vast-mediafile-priority-5':case 'vast-mediafile-priority-6':case 'vast-mediafile-priority-7':case 'vast-mediafile-priority-8':break;case 'enable-indapif':e.display.useFriendlyIframe=v(k);break;case 'use-creative-wrapper-ge':e.creativeWrapper.ge=
v(k);break;case 'use-gpt-passback-tag':case 'metrics-tracker-visx-enabled':break;default:c.warn('Unknown custom option',{customOptionKey:b,customOptionValue:k})}}else if('object'===typeof d[b]){var m=d[b];Object.keys(m).forEach(function(a){if('string'===typeof m[a]){var d=m[a];switch(b.toLowerCase()+'.'+a.toLowerCase()){case 'thirdparty.source':e.thirdParty.creativeSource.portrait=d,e.thirdParty.creativeSource.landscape=d}}})}}))}}function l(b,c,e,k){k=void 0===k?[]:k;Object.keys(e).forEach(function(a){var d=
c[a],m=e[a];var g=k.join('.')+'.'+a;if(void 0===d)'object'!==typeof m||null===m||Array.isArray(m)?(m=Number(m).toString()===m?Number(m):m,c[a]=m,b.debug('updated '+g,{before:d,value:m})):(d={},c[a]=d,l(b,d,m,[].concat($jscomp.arrayFromIterable(k),[a])));else if('number'===typeof d)if('number'===typeof m)c[a]=m,b.debug('updated '+g,{before:d,value:m});else{if('string'===typeof m){var F=Number(m);F===F?(c[a]=F,b.debug('updated '+g,{before:d,value:F})):b.warn('cannot merge '+g,{original:d,custom:m})}}else'boolean'===
typeof d?'boolean'===typeof m?(c[a]=m,b.debug('updated '+g,{before:d,value:m})):'string'===typeof m&&(m=v(m),c[a]=m,b.debug('updated '+g,{before:d,value:m})):'string'===typeof d&&'string'===typeof m?(c[a]=m,b.debug('updated '+g,{before:d,value:m})):'object'===typeof d&&null!==d&&'object'===typeof m&&null!==m?Array.isArray(d)&&Array.isArray(m)?(m=d.concat(m),b.debug('updated '+g,{before:JSON.stringify(d,null,2),value:JSON.stringify(m,null,2)}),c[a]=m):Array.isArray(d)||Array.isArray(m)?b.warn('cannot merge '+
g,{original:d,custom:m}):l(b,d,m,[].concat($jscomp.arrayFromIterable(k),[a])):b.warn('cannot merge '+g,{original:d,custom:m})})}function v(b){return!0===b||'string'===typeof b&&-1!==['1','true','yes'].indexOf(b.toLowerCase())?!0:!1}b.d(e,'b',function(){return n});b.d(e,'a',function(){return c})},function(g,e,b){function n(b){var c=!0;(b=b.context)&&'function'===typeof b.observeIntersection||(c=!1);return c}function c(b){return b.context&&b.context.location&&b.context.location.href||null}function l(b){return b.context&&
b.context.location&&b.context.location.host||null}b.d(e,'c',function(){return n});b.d(e,'b',function(){return c});b.d(e,'a',function(){return l})},function(g,e,b){b.d(e,'a',function(){return c});var n=b(1),c=function(b,c,e){b=b.Environment;c=c.closeButton;var g=n.e(b,'div');b=n.e(b,'img');b.width=c.image.width;b.height=c.image.height;b.src=c.image.url;b.style.pointerEvents='none';g.append(b);g.style.width=c.image.width+'px';g.style.height=c.image.height+'px';g.style.cursor='pointer';g.style.userSelect=
'none';g.addEventListener('click',e,!1);this.root=g};c.preload=function(b,c){var e=new Image;e.style.width='0';e.style.height='0';e.style.position='absolute';var g=function(){c.removeChild(e)};e.addEventListener('load',g,!1);e.addEventListener('error',g,!1);e.src=b.closeButton.image.url;c.append(e)};c.defaultPosition='top-right'},function(g,e,b){b.d(e,'a',function(){return p});var n=b(1),c=b(0),l=b(12),v=b(9),q=function(b,a,d,c,e,g,t,x){this.creativeIframe=this.adContainer=this.adCore=null;this.intervalStart=
this.intervalId=-1;this.thirdPartyClickContainer=this.thirdPartyAdContainer=this.thirdPartyHostContainer=null;this.foundDuringPreCheck=!1;this.demoContainer=null;this.isCheckModeStrict=this.isCheckModeEasy=!1;this.searchForNodeResult=null;this.wasClicked=this.isRunning=!1;this.context=b;this.logger=b.newLogger('ThirdPartyAd ('+g+')');this.initConfig=a;this.adConfig=d;this.adCore=c;this.adPainter=e;this.creativeOption=g;this.configCreative=t;this.creativeDetails=x;'undefined'!==typeof this.adConfig.thirdParty&&
'undefined'!==typeof this.adConfig.thirdParty.checkMode&&'easy'===this.adConfig.thirdParty.checkMode?this.isCheckModeEasy=!0:'undefined'!==typeof this.adConfig.thirdParty&&'undefined'!==typeof this.adConfig.thirdParty.checkMode&&'strict'===this.adConfig.thirdParty.checkMode&&(this.isCheckModeStrict=!0)};q.prototype.preCheck=function(){this.logger.log('Pre-check '+this.creativeOption+' creative',{configCreative:this.configCreative});if('string'===typeof this.configCreative.mode&&'disabled'===this.configCreative.mode)'undefined'===
typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]||'string'===typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]&&'auto'===this.adConfig.thirdParty.creativeSource[this.creativeOption]?(this.logger.log("Pre-check: Disable third party creative source, because it's disabled",{configCreative:this.configCreative}),this.adConfig.thirdParty.creativeSource[this.creativeOption]='disabled'):this.logger.log("Pre-check: Nothing to do - it's disabled",{configCreative:this.configCreative});
else if('string'===typeof this.configCreative.mode&&0<this.configCreative.mode.length&&'redirect'===this.configCreative.mode.substr(0,8)){try{var b='';if('redirect'===this.configCreative.mode||'redirect-load-rtb-hidden'===this.configCreative.mode)b=decodeURIComponent(this.configCreative.redirectCode);var a=decodeURIComponent(this.initConfig.rtbCreative);('undefined'===typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]||'string'===typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]&&
'auto'===this.adConfig.thirdParty.creativeSource[this.creativeOption])&&('string'===typeof b&&-1!==b.indexOf('.celtra.com')||'string'===typeof a&&-1!==a.indexOf('.celtra.com'))&&(-1!==this.initConfig.product.templateName.toLowerCase().indexOf('mystery scroller')&&(this.logger.log("Pre-check: Mystery Scroller identified - set third party source to 'celtra-banner-sticky'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='celtra-banner-sticky'),-1!==this.initConfig.product.templateName.toLowerCase().indexOf('understitial')&&
(this.logger.log("Pre-check: Understitial Ad identified - set third party source to 'celtra-interscroller'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='celtra-interscroller'),-1!==this.initConfig.product.templateName.toLowerCase().indexOf('mystery ad')&&(this.logger.log("Pre-check: Mystery Ad identified - set third party source to 'celtra-interstitial'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='celtra-interstitial'),-1!==this.initConfig.product.templateName.toLowerCase().indexOf('banner classic')&&
(this.logger.log("Pre-check: Banner Classic identified - set third party source to 'default'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='default'))}catch(d){this.logger.error(d)}!this.context.Environment.isVCPM||'undefined'!==typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]&&('string'!==typeof this.adConfig.thirdParty.creativeSource[this.creativeOption]||0!==this.adConfig.thirdParty.creativeSource[this.creativeOption].length&&'auto'!==this.adConfig.thirdParty.creativeSource[this.creativeOption])||
(this.logger.log("Pre-check: vCPM is enabled and no third party source was provided, set third party source to 'default'"),this.adConfig.thirdParty.creativeSource[this.creativeOption]='default');if('portrait'===this.creativeOption||'landscape'===this.creativeOption)'celtra-interscroller'===this.adConfig.thirdParty.creativeSource[this.creativeOption]&&'scale'===this.adConfig.display.responsive.mode&&!1===this.adConfig.display.responsive.followLayout&&(this.logger.log("Pre-check: third party source for portrait/landscape is 'celtra-interscroller', reset scale mode and set followLayout to 'true'"),
this.adConfig.display.responsive.followLayout=!0,this.adConfig.display.responsive.mode='none'),'celtra-interstitial'===this.adConfig.thirdParty.creativeSource[this.creativeOption]&&'scale'===this.adConfig.display.responsive.mode&&!1===this.adConfig.display.responsive.followLayout&&(this.logger.log("Pre-check: third party source for portrait/landscape is 'celtra-interstitial', reset scale mode and set followLayout to 'true'"),this.adConfig.display.responsive.followLayout=!0,this.adConfig.display.responsive.mode=
'none'),'celtra-banner-sticky'===this.adConfig.thirdParty.creativeSource[this.creativeOption]&&'scale'===this.adConfig.display.responsive.mode&&!1===this.adConfig.display.responsive.followLayout&&(this.logger.log("Pre-check: third party source for portrait/landscape is 'celtra-banner-sticky', reset scale mode and set followLayout to 'true'"),this.adConfig.display.responsive.followLayout=!0,this.adConfig.display.responsive.mode='none');switch(this.adConfig.thirdParty.creativeSource[this.creativeOption]){case 'disabled':this.logger.log("Pre-check: Check environment - nothing to do - it's disabled");
break;case 'default':this.logger.log("Pre-check: Check environment - 'Default' (delivered inside the product container)");break;case 'celtra-banner':this.logger.log("Pre-check: Check environment - 'Celtra Banner'");break;case 'celtra-banner-sticky':this.logger.log("Pre-check: Check environment - 'Celtra Banner Sticky'");if('portrait'===this.creativeOption||'landscape'===this.creativeOption)this.logger.log("Pre-check: Check environment - 'Celtra Banner Sticky' - Force ad container hiding"),this.adConfig.display.hide=
!0;break;case 'celtra-interscroller':this.logger.log("Pre-check: Check environment - 'Celtra Interscroller'");break;case 'celtra-interstitial':this.logger.log("Pre-check: Check environment - 'Celtra Interstitial'");if('portrait'===this.creativeOption||'landscape'===this.creativeOption)this.logger.log("Pre-check: Check environment - 'Celtra Interstitial' - Force ad container hiding"),this.adConfig.display.hide=!0;break;default:this.logger.warn("Pre-check: Check environment - invalid third party source: '"+
this.adConfig.thirdParty.creativeSource[this.creativeOption]+"'"),this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-source'})}}else this.logger.log('Pre-check: Invalid creative mode used for third party ad in '+this.creativeOption+' creative',{configCreative:this.configCreative});this.foundDuringPreCheck&&this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-precheck'})};q.prototype.init=function(){var b=this.context.Environment;
this.logger.log('Initialize '+this.creativeOption+' creative',{configCreative:this.configCreative});if('string'===typeof this.configCreative.mode&&0<this.configCreative.mode.length&&'redirect'===this.configCreative.mode.substr(0,8))switch(this.adConfig.thirdParty.creativeSource[this.creativeOption]){case 'disabled':this.logger.log("Prepare environment - nothing to do - it's disabled");break;case 'default':this.logger.log("Prepare environment - 'Default' (delivered inside the product container)");
break;case 'celtra-banner':this.logger.log("Prepare environment - 'Celtra Banner'");break;case 'celtra-banner-sticky':this.logger.log("Prepare environment - 'Celtra Banner Sticky'");this.startCheckCeltraOverlay(!0);break;case 'celtra-interscroller':this.logger.log("Prepare environment - 'Celtra Interscroller'");break;case 'celtra-interstitial':this.logger.log("Prepare environment - 'Celtra Interstitial'");this.startCheckCeltraOverlay(!0);break;default:this.logger.warn("Prepare environment - invalid third party source: '"+
this.adConfig.thirdParty.creativeSource[this.creativeOption]+"'")}else this.logger.log('Invalid creative mode used for third party ad in '+this.creativeOption+' creative',{configCreative:this.configCreative});b.isDemoMode&&(this.demoContainer=b.hostDocument.createElement('div'),this.demoContainer.id='yoc_demo_container_'+this.creativeOption+'_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId,this.demoContainer.style.cssText='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 2147483647; background-color: rgba(127, 0, 0, 0.3);')};
q.prototype.run=function(b){if(!this.isRunning)switch(this.isRunning=!0,this.creativeIframe=b,this.adConfig.thirdParty.creativeSource[this.creativeOption]){case 'celtra-banner-sticky':this.startCheck(this.startCheckCeltraOverlay.bind(this));break;case 'celtra-interstitial':this.startCheck(this.startCheckCeltraOverlay.bind(this));break;case 'celtra-interscroller':this.startCheck(this.startCheckCeltraInline.bind(this));break;default:this.thirdPartyClickContainer=this.thirdPartyAdContainer=this.thirdPartyHostContainer=
this.adPainter.productContainer,this.enableTracking(this.thirdPartyHostContainer,this.thirdPartyAdContainer,this.thirdPartyClickContainer)}};q.prototype.startCheckCeltraOverlay=function(b){var a=this;b=void 0===b?!1:b;this.logger.log((b?'PRE-Check ':'')+(this.isCheckModeStrict?'STRICT ':'')+'Try to find third party ad OVERLAY container ('+this.adConfig.thirdParty.creativeSource[this.creativeOption]+')');this.context.Environment.hostDocument.querySelectorAll('div > iframe:first-child[allowfullscreen]').forEach(function(d){a.logger.log('Found element - start checking ('+
a.adConfig.thirdParty.creativeSource[a.creativeOption]+')',{parentElementStyle:d.parentElement&&d.parentElement.style?d.parentElement.style:'unknown'});if(d.parentElement&&d.parentElement.style&&'string'===typeof d.parentElement.style.position&&('fixed'===d.parentElement.style.position||'absolute'===d.parentElement.style.position)&&'undefined'!==typeof d.parentElement.style.zIndex&&2E9<parseInt(d.parentElement.style.zIndex,10))if(b)a.foundDuringPreCheck=!0,a.logger.warn('PRE-Check - Found third party ad container ('+
a.adConfig.thirdParty.creativeSource[a.creativeOption]+')',d.parentElement);else if(a.thirdPartyAdContainer)a.logger.error('Third party ad container was found already',a.thirdPartyAdContainer);else{var c=null;'iframe'===d.nodeName.toLocaleLowerCase()&&d.contentDocument&&(c=d.contentDocument.getElementById('viewport'));try{a.logger.log('Checking Celtra viewport ('+a.adConfig.thirdParty.creativeSource[a.creativeOption]+')',{celtraViewportStyle:c?c.getAttribute('style'):'unknown'}),a.logger.log('Checking Celtra payloads ('+
a.adConfig.thirdParty.creativeSource[a.creativeOption]+')',{celtraPayloads:a.creativeIframe.contentWindow&&'undefined'!==typeof a.creativeIframe.contentWindow.celtra&&'object'===typeof a.creativeIframe.contentWindow.celtra.payloads?Object.keys(a.creativeIframe.contentWindow.celtra.payloads)[0]:'unknown'}),a.logger.log('Checking Celtra urls ('+a.adConfig.thirdParty.creativeSource[a.creativeOption]+')',{celtraUrlsCreativeUrl:d.contentWindow&&'undefined'!==typeof d.contentWindow.urls&&'undefined'!==
typeof d.contentWindow.urls.creativeUrl?d.contentWindow.urls.creativeUrl:'unknown'})}catch(z){a.logger.error(z)}var e=!1;if(a.isCheckModeStrict&&c&&a.creativeIframe.contentWindow&&'undefined'!==typeof a.creativeIframe.contentWindow.celtra&&'object'===typeof a.creativeIframe.contentWindow.celtra.payloads&&d.contentWindow&&'undefined'!==typeof d.contentWindow.urls&&'undefined'!==typeof d.contentWindow.urls.creativeUrl)try{a.logger.log('STRICT - TRY to find third party ad container check based on Celtra ID',
d.parentElement);var k=Object.keys(a.creativeIframe.contentWindow.celtra.payloads)[0].match(/https:\/\/cache-ssl.celtra.com\/api\/creatives\/([0-9a-zA-Z]+)\//)[1],g=d.contentWindow.urls.creativeUrl.match(/https:\/\/ads.celtra.com\/compiled\/([0-9a-zA-Z]+)\//)[1];a.logger.log("STRICT - CHECK third party ad container check based on Celtra ID: '"+k+"' <> '"+g+"'",d.parentElement);'string'===typeof k&&0<k.length&&'string'===typeof g&&0<g.length&&k===g&&(e=!0,a.logger.log("STRICT - FOUND third party ad container based on Celtra ID: '"+
k+"' <> '"+g+"'",d.parentElement))}catch(z){a.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+a.creativeOption+'-error-ad-container'}),a.logger.error(z)}if(c&&(!a.isCheckModeStrict||a.isCheckModeStrict&&e)){a.logger.log('Found third party ad container ('+a.adConfig.thirdParty.creativeSource[a.creativeOption]+')',c);a.thirdPartyHostContainer=d.parentElement;a.thirdPartyAdContainer=c;a.stopCheck();a.startCheckCeltraClickContainer();a.enableTracking(a.thirdPartyHostContainer,a.thirdPartyAdContainer,
a.thirdPartyClickContainer);try{var x=Date.now()-a.intervalStart;a.logger.log('Third party ad container was found ('+x/1E3+'s)');a.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+a.creativeOption+'-found',details:{msSinceStart:x}})}catch(z){}}}});this.validateCheck()};q.prototype.startCheckCeltraInline=function(){var b=this,a=this.context.Environment;this.logger.log('Try to find third party ad INLINE container ('+this.adConfig.thirdParty.creativeSource[this.creativeOption]+')');if(this.thirdPartyAdContainer)this.logger.error('Third party ad INLINE container was found already',
this.thirdPartyAdContainer);else if(this.adCore.adAssetList.forEach(function(d){d instanceof p&&Object.keys(d.creative).forEach(function(c){var e=b.adCore.getCreativeOptionDetails(d.creative,c).creativeDetails;b.logger.log('Check creative option '+c+' ('+a.creativeOption+')');e.container?c===a.creativeOption&&!1!==e.host&&'undefined'!==typeof e.host?e.host.childNodes.forEach(function(a){b.logger.log('Check child node (DIV)',a);'div'===a.nodeName.toLowerCase()&&(b.logger.log('Search for iframe'),b.searchForNode(a,
'iframe'),b.searchForNodeResult?(b.logger.log('Found iframe',b.searchForNodeResult),'iframe'===b.searchForNodeResult.nodeName.toLocaleLowerCase()&&b.searchForNodeResult.contentDocument?(b.logger.log('FOUND',a),b.thirdPartyHostContainer=a,b.thirdPartyAdContainer=b.searchForNodeResult.contentDocument.getElementById('viewport')):b.logger.log('Iframe has no content')):b.logger.log("Can't find iframe"))}):b.logger.log("Can't find host for creative option "+c+' ('+a.creativeOption+')'):b.logger.log("Can't find container for creative option "+
c+' ('+a.creativeOption+')')})}),this.thirdPartyHostContainer&&this.thirdPartyAdContainer){this.logger.log('Found third party ad INLINE container ('+this.adConfig.thirdParty.creativeSource[this.creativeOption]+')',this.thirdPartyAdContainer);this.thirdPartyClickContainer=this.thirdPartyAdContainer;this.stopCheck();this.enableTracking(this.thirdPartyHostContainer,this.thirdPartyAdContainer,this.thirdPartyClickContainer);try{var d=Date.now()-this.intervalStart;this.logger.log('Third party ad INLINE container was found ('+
d/1E3+'s)');this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-found',details:{msSinceStart:d}})}catch(m){}}this.validateCheck()};q.prototype.startCheckCeltraClickContainer=function(b){this.logger.log(((void 0===b?0:b)?'PRE-Check ':'')+'Try to find third party click container ('+this.adConfig.thirdParty.creativeSource[this.creativeOption]+')');if(this.thirdPartyAdContainer)try{switch(this.logger.log('TRY to find third party click container',this.thirdPartyAdContainer.parentElement),
this.adConfig.thirdParty.creativeSource[this.creativeOption]){case 'celtra-banner':this.thirdPartyClickContainer=this.thirdPartyAdContainer.parentElement;break;case 'celtra-banner-sticky':this.thirdPartyClickContainer=this.thirdPartyAdContainer;break;case 'celtra-interscroller':break;case 'celtra-interstitial':this.thirdPartyClickContainer=this.thirdPartyAdContainer;break;default:this.thirdPartyClickContainer=this.thirdPartyAdContainer.parentElement,this.logger.warn("TRY to find third party click container - invalid third party source: '"+
this.adConfig.thirdParty.creativeSource[this.creativeOption]+"'"),this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-source'})}}catch(a){this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-click-container'}),this.logger.error(a)}else this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-error-click-container'})};q.prototype.startCheck=function(b){this.logger.log('startCheck - Entered (interval start: '+
this.intervalStart+')');this.logger.log('startCheck - Reset interval start');this.intervalStart=Date.now();'undefined'!==typeof this.adConfig.thirdParty&&'undefined'!==typeof this.adConfig.thirdParty.checkInterval&&'undefined'!==typeof this.adConfig.thirdParty.checkTimeout?this.intervalId=this.context.Environment.hostWindow.setInterval(b,this.adConfig.thirdParty.checkInterval):(this.logger.error("startCheck - Can't start checking third party ad container"),this.context.messageBus.event.emit({kind:'tracker',
event:'tpa-'+this.creativeOption+'-error-config'}))};q.prototype.validateCheck=function(){this.logger.log('validateCheck - Entered (interval start: '+this.intervalStart+')');0>=this.intervalStart&&(this.logger.log('validateCheck - Reset interval start'),this.intervalStart=Date.now());var b=Date.now()-this.intervalStart;'undefined'!==typeof this.adConfig.thirdParty&&'undefined'!==typeof this.adConfig.thirdParty.checkTimeout&&b>this.adConfig.thirdParty.checkTimeout&&(this.stopCheck(),this.logger.error('validateCheck - Timeout during checking third party ad container'),
this.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+this.creativeOption+'-timeout',details:{msSinceStart:b}}))};q.prototype.stopCheck=function(){this.intervalId&&this.context.Environment.hostWindow.clearInterval(this.intervalId)};q.prototype.searchForNode=function(b,a,d){var c=this;d=void 0===d?0:d;b.childNodes.forEach(function(b){b.nodeName.toLowerCase()===a.toLowerCase()?c.searchForNodeResult=b:c.searchForNode(b,a,d++)})};q.prototype.enableTracking=function(b,a,d){var e=this,k=this.context.Environment;
this.logger.log('Enable Tracking on ad container');b.setAttribute(c.a.AD_SESSION_ID,this.initConfig.meta.adSessionId);b.setAttribute(c.a.CONTAINER_TYPE,'host');a.setAttribute(c.a.AD_SESSION_ID,this.initConfig.meta.adSessionId);a.setAttribute(c.a.CONTAINER_TYPE,'ad');k.isDemoMode&&this.demoContainer&&(this.demoContainer.style.backgroundColor='rgba(255, 255, 0, 0.3)',a.append(this.demoContainer));if(this.adConfig.tracking.viewabilityTrackingOverAll||'portrait'===this.creativeOption||'landscape'===this.creativeOption){a.setAttribute(c.a.VIEWABILITY,
c.b.ENABLED);a.setAttribute(c.a.VIEWABILITY_STATUS,c.b.WAITING);a.setAttribute(c.a.VIEWABILITY_GOAL,'viewability '+this.adConfig.tracking.viewabilityPercent+'/'+this.adConfig.tracking.viewabilityTime/1E3);var g=null;g=new c.c('Viewability Tracking (ThirdPartyAd - '+this.creativeOption+')',this.context,a,this.adConfig.tracking.viewabilityPercent,this.adConfig.tracking.viewabilityTime,this.adConfig.tracking.visibilityHandlerType,this.adCore.visibilityHandlerViewabilityGroupList,!0,function(){try{var b=
Date.now()-e.initConfig.timestamp;e.context.messageBus.event.emit({kind:'tracker',event:'viewability',details:{msSinceStart:b}});k.isVCPM&&(k.isPortrait?(e.context.trackingMiner.portrait.visibleCreative&&e.context.trackingMiner.portrait.visibleCreative.release(),e.context.trackingMiner.portrait.hiddenCreative&&e.context.trackingMiner.portrait.hiddenCreative.release()):(e.context.trackingMiner.landscape.visibleCreative&&e.context.trackingMiner.landscape.visibleCreative.release(),e.context.trackingMiner.landscape.hiddenCreative&&
e.context.trackingMiner.landscape.hiddenCreative.release()));a.setAttribute(c.a.VIEWABILITY_STATUS,c.b.FINISHED);a.setAttribute(c.a.VIEWABILITY_SUCCESS,'viewability '+e.adConfig.tracking.viewabilityPercent+'/'+e.adConfig.tracking.viewabilityTime/1E3);a.setAttribute(c.a.VIEWABILITY_TIME,''+g.visibilityHandler.viewedTime);k.isDemoMode&&e.demoContainer&&(e.demoContainer.style.backgroundColor='rgba(0, 255, 0, 0.3)')}catch(x){e.context.messageBus.event.emit({kind:'tracker',event:'tpa-'+e.creativeOption+
'-error-viewability'}),e.logger.error(x)}},function(){},!1,function(){g.visibilityHandler.disabled||(a.setAttribute(c.a.VIEWABILITY_STATUS,c.b.STARTED),a.setAttribute(c.a.VIEWABILITY_TIME,g.visibilityHandler.viewedTime+' +'),k.isDemoMode&&e.demoContainer&&(e.demoContainer.style.backgroundColor='rgba(255, 165, 0, 0.3)'))},function(){g.visibilityHandler.disabled||(a.setAttribute(c.a.VIEWABILITY_STATUS,c.b.PAUSED),a.setAttribute(c.a.VIEWABILITY_TIME,''+g.visibilityHandler.viewedTime),k.isDemoMode&&e.demoContainer&&
(e.demoContainer.style.backgroundColor='rgba(255, 255, 0, 0.3)'))});g.init();this.adCore.visibilityHandlerDependsOnImpressionList.push(g);this.adConfig.tracking.viewabilityTrackingOverAll&&this.adCore.visibilityHandlerViewabilityGroupList.push(g);g.enable()}else a.setAttribute(c.a.VIEWABILITY,c.b.SKIPPED),a.setAttribute(c.a.VIEWABILITY_STATUS,c.b.SKIPPED),this.logger.log('SKIP viewability tracking for '+this.creativeOption+' creative',{configCreative:this.configCreative});this.adConfig.tracking.enableClickTrackingWorkaround&&
d?(this.logger.log('Setup click tracking on click container (ThirdPartyAd)'),d.setAttribute(c.a.CLICK,c.b.ENABLED),d.setAttribute(c.a.CLICK_STATUS,c.b.WAITING),d.setAttribute(c.a.CLICK_GOAL,'click'),d.setAttribute(c.a.AD_SESSION_ID,this.initConfig.meta.adSessionId),d.onclick=function(a){e.wasClicked?(e.logger.log('SKIP repeated CLICK on click container (ThirdPartyAd)'),d.setAttribute(c.a.CLICK_SUCCESS,'click-repeated'),k.isDemoMode&&e.demoContainer&&(e.demoContainer.style.backgroundColor='rgba(128, 128, 128, 0.3)'),
e.context.messageBus.event.emit({kind:'tracker',event:'click-repeated',details:{source:'tpa-'+e.creativeOption}})):(e.logger.log('Handle CLICK on click container (ThirdPartyAd)'),e.wasClicked=!0,d.setAttribute(c.a.CLICK_STATUS,c.b.FINISHED),d.setAttribute(c.a.CLICK_SUCCESS,'click'),k.isDemoMode&&e.demoContainer&&(e.demoContainer.style.backgroundColor='rgba(0, 0, 0, 0.3)'),e.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'tpa-'+e.creativeOption}}))}):this.logger.log('Setup click tracking on click container (ThirdPartyAd)')};
var B=function(b,a,d){this.method='all';this.creativeContentWithoutTracking=this.creativeContentOriginal='';this.trackingImages=[];this.trackingIframes=[];this.countOfTrackersFound=0;this.isReleased=this.isError=!1;this.context=b;this.logger=b.newLogger('Miner');'all'!==a&&'pattern'!==a&&(a='all');this.method=a;this.creativeContentOriginal=d};B.prototype.release=function(){var b=this;this.isReleased?this.logger.warn('Ignore call to fetch all trackers, already done'):(this.logger.log('Start fetching all trackers'),
this.isReleased=!0,this.trackingImages.forEach(function(a){b.logger.log('Fetching image tracker: '+a);b.context.metrics.loadTrackingImage(a)}),this.trackingIframes.forEach(function(a){b.logger.log('Fetching iframe tracker: '+a);b.context.metrics.loadTrackingIframe(a)}),this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner-released'}),this.logger.log('Finished fetching all trackers'))};B.prototype.collect=function(){var b=this;this.logger.log('Start mining of trackers');this.countOfTrackersFound=
0;var a=['IMG','IFRAME'],d={IMG:[],IFRAME:[],CONTENT:''};try{if(''!==this.creativeContentOriginal)try{var c=(new DOMParser).parseFromString(this.creativeContentOriginal,'text/html');a.forEach(function(a){var e=c.getElementsByTagName(a);0<e.length&&(Object.keys(e).forEach(function(c){c=e[c];var g=c.src,k=!1;b.logger.log("By using method '"+b.method+"' found '"+a+"': "+g,c);try{if('string'!==typeof g||'data:'!==g.toLocaleLowerCase().substring(0,5))'all'===b.method?1!==c.width&&0!==c.width||1!==c.height&&
0!==c.height?'undefined'===typeof c.style||(1===parseInt(c.style.width,10)||0===parseInt(c.style.width,10),!1)||1!==parseInt(c.style.height,10)&&0!==parseInt(c.style.height,10)||(k=!0,b.logger.log("By using method '"+b.method+"' - identified as tracker due to style dimension: "+g),d[a].push(g)):(k=!0,b.logger.log("By using method '"+b.method+"' - identified as tracker due to tag dimension: "+g),d[a].push(g)):'pattern'===b.method&&-1!==g.indexOf('bidswitch.net/imp/')&&(k=!0,b.logger.log("By using method '"+
b.method+"' - identified as tracker: "+g),d[a].push(g))}catch(E){b.isError||b.logger.error('Internal error 90003'),b.isError=!0}k||b.logger.log('Skip element: '+g)}),d[a].forEach(function(a){Object.keys(e).forEach(function(c){if('undefined'!==typeof e[c]){c=e[c];var d=c.src;d===a&&'undefined'!==typeof c&&'undefined'!==typeof c.parentNode&&(b.logger.log('Removed tracker: '+d),c.parentNode.removeChild(c))}})}));b.countOfTrackersFound+=d[a].length});0===this.countOfTrackersFound?(this.logger.warn("Can't find trackings"),
this.isError=!0,d.CONTENT=this.creativeContentOriginal,this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner-warn-notfound'})):d.CONTENT=c.body.innerHTML}catch(u){this.logger.error('Error during search for trackings',u),this.isError=!0,d.IMG=[],d.IFRAME=[],d.CONTENT=this.creativeContentOriginal,this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner-error-search'})}}catch(u){this.logger.error('Exception during mining of trackers: '+u),this.isError=!0,d.IMG=[],d.IFRAME=
[],d.CONTENT=this.creativeContentOriginal,this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner-error-exception'})}this.trackingImages=d.IMG;this.trackingIframes=d.IFRAME;this.creativeContentWithoutTracking=d.CONTENT;this.logger.log('Finished mining of trackers '+(this.isError?'WITH':'without')+' error: '+this.countOfTrackersFound+' trackers found',d);this.context.messageBus.event.emit({kind:'tracker',event:'tracking-miner',details:{countOfTrackersFound:this.countOfTrackersFound}});
return this.isError?!1:!0};var p=function(){var b=this;this.adAssetList=[];this.creative={portrait:{container:!1,wrapper:!1,host:!1,iframe:!1,iframeHidden:!1,image:!1,canvas:!1,alreadyInserted:!1,thirdPartyAd:!1},landscape:{container:!1,wrapper:!1,host:!1,iframe:!1,iframeHidden:!1,image:!1,canvas:!1,alreadyInserted:!1,thirdPartyAd:!1},sticky:{container:!1,wrapper:!1,host:!1,iframe:!1,iframeHidden:!1,image:!1,canvas:!1,alreadyInserted:!1,thirdPartyAd:!1},hidden:{container:!1,wrapper:!1,host:!1,iframe:!1,
iframeHidden:!1,image:!1,canvas:!1,alreadyInserted:!1,thirdPartyAd:!1}};this.isImage=this.isVideo=this.isReady=!1;this.waitForAssetReadyCheck=!0;this.wasClicked=this.showTakeover=!1;this.closeAd=function(a,c){c=!1;a&&(c=!0,a.stopPropagation(),b.context.messageBus.event.emit({kind:'tracker',event:'close'}));b.context.messageBus.event.emit({kind:'close',interactive:c});(b.context.Environment.isLogMode||b.context.Environment.isDebugMode)&&b.context.troubleshooting.log()};this.onUnderstitialPaint=function(a){a=
a.enabled;var c=b.context.Environment,e=c.isSticky;if(c=b.creative[c.creativeOption].wrapper)c.style.overflow=a&&!e?'hidden':''}};p.prototype.init=function(b,a,c,e,g,n){var d=this;this.adCore=b;this.context=a;this.adPainter=c;this.initConfig=e;this.adConfig=g;this.adAssetList=n;this.logger=this.context.newLogger('AdCreative');Object.keys(this.creative).forEach(function(a){var b=d.adCore.getCreativeOptionDetails(d.creative,a),c=b.configCreative;b=b.creativeDetails;'static-image'===c.mode&&(d.isImage=
!0);d.logger.log('Pre-check third party ad logic for '+a+' creative',{configCreative:c});b.thirdPartyAd=new q(d.context,d.initConfig,d.adConfig,d.adCore,d.adPainter,a,c,b);b.thirdPartyAd.preCheck()});return!0};p.prototype.constructVisibilityHandler=function(b){return b};p.prototype.constructAdNodes=function(b,a){var d=this,e=this.context.Environment;Object.keys(this.creative).forEach(function(g){var k=d.adCore.getCreativeOptionDetails(d.creative,g),t=k.configCreative;k=k.creativeDetails;d.logger.log('Starting to prepare '+
g+' creative',{configCreative:t});var m=n.e(e,'div');m.id='yoc_creative_container_'+g+'_'+d.context.productTitlePostfix+'_'+d.initConfig.meta.adSessionId;var p=n.e(e,'div');p.id='yoc_creative_wrapper_'+g+'_'+d.context.productTitlePostfix+'_'+d.initConfig.meta.adSessionId;var q=n.e(e,'div');q.id='yoc_creative_host_'+g+'_'+d.context.productTitlePostfix+'_'+d.initConfig.meta.adSessionId;if('static-image'===t.mode){var l='',u='';try{l=decodeURIComponent(t.imageUrl),u=decodeURIComponent(t.clickUrl)}catch(D){d.logger.error(D)}l?
(l=new n.b(d.context,l,!0),l.node.id='yoc_creative_image_'+g+'_'+d.context.productTitlePostfix+'_'+d.initConfig.meta.adSessionId,m.setAttribute(c.a.CLICK,c.b.ENABLED),m.setAttribute(c.a.CLICK_STATUS,c.b.WAITING),m.setAttribute(c.a.CLICK_GOAL,'click'),m.setAttribute(c.a.AD_SESSION_ID,d.initConfig.meta.adSessionId),d.context.setupClickHandler(m,function(){d.wasClicked?(d.logger.log('SKIP repeated CLICK on '+g+' image creative',{configCreative:t}),m.setAttribute(c.a.CLICK_SUCCESS,'click-repeated'),d.context.messageBus.event.emit({kind:'tracker',
event:'click-repeated',details:{source:'adcreative-'+g}})):(d.logger.log('Handle CLICK on '+g+' image creative',{configCreative:t}),d.wasClicked=!0,void 0===u?(m.setAttribute(c.a.CLICK_STATUS,c.b.FINISHED),m.setAttribute(c.a.CLICK_SUCCESS,'click-error')):(Object(v.a)(d.context,u),m.setAttribute(c.a.CLICK_STATUS,c.b.FINISHED),m.setAttribute(c.a.CLICK_SUCCESS,'click')),d.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'adcreative-'+g}}))}),q.append(l.node),k.image=l.node):
d.logger.log('Skip '+g+' image creative - URL is missing',{configCreative:t});e.isVideo||e.isPreloadImage||(d.waitForAssetReadyCheck=!1)}else'html5'===t.mode||'redirect'===t.mode||'redirect-use-rtb'===t.mode||'redirect-load-rtb-hidden'===t.mode?(l=n.e(e,'iframe'),l.id='yoc_creative_'+t.mode+'_'+g+'_'+d.context.productTitlePostfix+'_'+d.initConfig.meta.adSessionId,l.frameBorder='0',l.scrolling='no',0<d.adConfig.display.sandboxForIframes.length&&(l.sandbox=d.adConfig.display.sandboxForIframes),n.f(m),
q.append(l),k.iframe=l,'redirect-load-rtb-hidden'===t.mode&&(l=n.e(e,'iframe'),l.id='yoc_creative_hidden_'+t.mode+'_'+g+'_'+d.context.productTitlePostfix+'_'+d.initConfig.meta.adSessionId,l.frameBorder='0',l.scrolling='no',0<d.adConfig.display.sandboxForIframes.length&&(l.sandbox=d.adConfig.display.sandboxForIframes),n.f(l),q.append(l),k.iframeHidden=l),d.waitForAssetReadyCheck=!1):'blurred-video'===t.mode&&(l=n.e(e,'canvas'),l.id='yoc_creative_canvas_'+g+'_'+d.context.productTitlePostfix+'_'+d.initConfig.meta.adSessionId,
n.f(m),q.append(l),k.canvas=l);p.append(q);m.append(p);'hidden'===g?a.prepend(m):b.prepend(m);k.container=m;k.wrapper=p;k.host=q;'undefined'!==typeof d.adConfig.thirdParty.creativeSource[g]&&'disabled'!==d.adConfig.thirdParty.creativeSource[g]?(d.logger.log('Init third party ad logic for '+g+' creative',{configCreative:t}),k.thirdPartyAd.init()):d.logger.log('SKIP third party ad logic for '+g+" creative because it's disabled / undefined",{configCreative:t})});l.a.preload(this.adConfig,this.adPainter.productContainer);
this.addCloseAdButton();this.understitialPaintHandler=this.context.messageBus.event.onEvent('understitial',this.onUnderstitialPaint);return{adNode:b,adNodeHidden:a}};p.prototype.updateStyles=function(b){var a=this;b=(void 0===b?{updateAdPosition:!1,reset:!1}:b).reset;var c=this.context.Environment;Object.keys(this.creative).forEach(function(b){var d=a.adCore.getCreativeOptionDetails(a.creative,b),e=d.configCreative;d=d.creativeDetails;d.container&&(b===c.creativeOption?a.adConfig.display.hide?(a.logger.log('Style update - custom option hide found - hide '+
b+' - '+e.mode+' creative',{configCreative:e}),n.f(d.container),a.context.messageBus.event.emit({kind:'tracker',event:'hide'})):'html5'===e.mode||'redirect'===e.mode||'redirect-load-rtb-hidden'===e.mode||'static-image'===e.mode||'blurred-video'===e.mode?(a.logger.log('Style update - show '+b+' - '+e.mode+' creative',{configCreative:e}),n.h(d.container),c.updatedCreativeHeight=e.height,c.updatedCreativeWidth=e.width,c.calculateAdDimension()):'redirect-use-rtb'===e.mode?(a.logger.log('Style update - show '+
b+' - '+e.mode+' creative',{configCreative:e}),n.h(d.container),c.updatedCreativeHeight=a.adConfig.display.height,c.updatedCreativeWidth=a.adConfig.display.width,c.calculateAdDimension()):a.logger.log('Style update - SKIP '+b+" creative because of unsupported mode '"+e.mode+"'",{configCreative:e}):(a.logger.log('Style update - hide '+b+' - '+e.mode+' creative',{configCreative:e}),n.f(d.container)))});b?this.setDimensions({width:0,height:0,scaleFactor:1}):this.setDimensions({width:c.scaledWidth/c.usedScaleFactor,
height:c.scaledHeight/c.usedScaleFactor,scaleFactor:c.usedScaleFactor})};p.prototype.setDimensions=function(b){var a=this,c=b.width,e=b.height,g=b.scaleFactor;Object.keys(this.creative).forEach(function(b){var d=a.adCore.getCreativeOptionDetails(a.creative,b),k=d.configCreative;d=d.creativeDetails;if(b===a.context.Environment.creativeOption)if(a.logger.log('Starting to set dimension of '+b+' - '+k.mode+' creative',{configCreative:k}),a.adConfig.display.hide)a.logger.log('Set dimension - custom option hide found - skip '+
b+' - '+k.mode+' creative',{configCreative:k});else if(d.container&&d.wrapper&&d.host&&('html5'===k.mode||'redirect'===k.mode||'redirect-use-rtb'===k.mode||'redirect-load-rtb-hidden'===k.mode||'static-image'===k.mode||'blurred-video'===k.mode)){var m=0===c?0:a.adConfig.display.width,l=0===e?0:a.adConfig.display.height;if('html5'===k.mode||'redirect'===k.mode||'redirect-load-rtb-hidden'===k.mode||'static-image'===k.mode||'blurred-video'===k.mode)m=0===c?0:k.width,l=0===e?0:k.height;var n=m,p=l,q='';
1!==g&&('scaleToFit'===a.adConfig.display.iFrameScaleMethod?(q='transform-origin: left top; transform:scale('+g+');',n*=g,p*=g):'scaleToWidth'===a.adConfig.display.iFrameScaleMethod&&(m*=g,l*=g));a.logger.log('Set dimension - process '+b+' - '+k.mode+' creative',{width:c,height:e,scaleFactor:g,creativeWidth:m,creativeHeight:l,configCreative:k});n='position: relative; width: '+n+'px; height: '+p+'px;';p='display: block; width: '+m+'px; height: '+l+'px; '+q;'celtra-interscroller'===a.adConfig.thirdParty.creativeSource.portrait&&
(n='position: relative; width: auto; height: auto;',p='display: block; width: auto; height: auto; '+q);'blurred-video'===k.mode&&'sharp'===k.type&&(p+='overflow: hidden;');d.container.style.cssText='left: 0px; top: 0px; width: 100%; height: auto;';d.wrapper.style.cssText=n;d.host.style.cssText=p;d.iframe?'none'===d.iframe.style.display||'hidden'===d.iframe.style.visibility?a.logger.warn('Set dimension - SKIP '+b+' - '+k.mode+' IFRAME because of display==none'):d.iframe.style.cssText='position: relative; display: block; width: '+
m+'px; height: '+l+'px; max-width: none !important; max-height: none !important; overflow: hidden;':d.image?d.image.style.cssText='position: relative; display: block; width: '+m+'px; height: '+l+'px; max-width: none !important; max-height: none !important; overflow: hidden;':d.canvas&&(b='position: relative; display: block; width: '+m+'px; height: '+l+'px; max-width: none !important; max-height: none !important; overflow: hidden;','blurred-video'===k.mode&&(b+='filter: blur('+k.intensity+'px););',
b+='backdrop-filter: blur('+k.intensity+'px);'),d.canvas.style.cssText=b)}else a.logger.log('Set dimension - SKIP '+b+" creative because of unsupported mode '"+k.mode+"'",{configCreative:k});else a.logger.log('Set dimension - skip '+b+' - '+k.mode+' creative',{configCreative:k})})};p.prototype.onOrientationChange=function(b){this.isReady&&this.postProcessAfterInsertAd()};p.prototype.onResize=function(b){this.isReady&&this.postProcessAfterInsertAd()};p.prototype.postProcessAfterInsertAd=function(b){var a=
this,c=this.context.Environment;this.logger.log('Post process after insert ad - run ...');Object.keys(this.creative).forEach(function(d){a.logger.log('Post process after insert ad - PROCESS '+d+' creative');var e=a.adCore.getCreativeOptionDetails(a.creative,d),g=e.configCreative,k=e.creativeDetails;e=e.trackingMiner;if(k.container&&k.iframe&&(k.iframe.contentWindow||k.iframe.contentDocument))if(k.alreadyInserted)a.logger.log('Post process after insert ad - SKIP '+d+' creative because it was already inserted',
{configCreative:g});else if(d===c.creativeOption||d===b&&void 0!==b){if(a.logger.log('Post process after insert ad - '+d+' - '+g.mode+' creative',{configCreative:g}),'static-image'!==g.mode)if('html5'===g.mode){d='';try{d=decodeURIComponent(g.html5Url)}catch(w){a.logger.error(w)}if(d)try{k.iframe.src=d,k.alreadyInserted=!0}catch(w){a.logger.error('Error during creative content handling (HTML5 URL)'),a.context.messageBus.event.emit({kind:'tracker',event:'error-html5-add'})}}else if('redirect'===g.mode||
'redirect-use-rtb'===g.mode||'redirect-load-rtb-hidden'===g.mode){var l='',m='';try{'redirect'===g.mode?l=decodeURIComponent(g.redirectCode):'redirect-use-rtb'===g.mode?l=decodeURIComponent(a.initConfig.rtbCreative):'redirect-load-rtb-hidden'===g.mode&&(l=decodeURIComponent(g.redirectCode),m=decodeURIComponent(a.initConfig.rtbCreative))}catch(w){a.logger.error(w)}l=a.adCore.replaceMacros(l);m=a.adCore.replaceMacros(m);c.isVCPM&&(a.logger.log('vCPM is enabled - tracking miner for visible creative started',
l),e.visibleCreative=new B(a.context,'all',l),e.visibleCreative.collect(),l=e.visibleCreative.creativeContentWithoutTracking,a.logger.log('vCPM is enabled - tracking miner for visible creative finished',l),'redirect-load-rtb-hidden'===g.mode&&(a.logger.log('vCPM is enabled - tracking miner for hidden creative started',m),e.hiddenCreative=new B(a.context,'all',m),e.hiddenCreative.collect(),m=e.hiddenCreative.creativeContentWithoutTracking,a.logger.log('vCPM is enabled - tracking miner for hidden creative finished',
m)));if('redirect-load-rtb-hidden'===g.mode&&'string'===typeof m&&0<m.length&&k.iframeHidden&&(k.iframeHidden.contentWindow||k.iframeHidden.contentDocument))try{var n='<!DOCTYPE html><head>'+(a.adConfig.display.useFriendlyIframe?'<script>var inDapIF=true;\x3c/script>':'')+'</head><body style="margin:0;padding:0;">'+m+'</body></html>';k.iframeHidden.contentDocument.open();k.iframeHidden.contentDocument.close();k.iframeHidden.contentWindow.contents=n;k.iframeHidden.src='javascript:window["contents"]'}catch(w){a.logger.error('Error during creative content handling (redirect code hidden)'),
a.context.messageBus.event.emit({kind:'tracker',event:'error-redirect-add-hidden'})}c.isVCPM&&a.adConfig.creativeWrapper.ge&&(a.logger.log("vCPM is enabled and creative wrapper 'ge' was enabled - creative wrapper is now disabled"),a.adConfig.creativeWrapper.ge=!1,a.context.messageBus.event.emit({kind:'tracker',event:'creative-wrapper-disabled-ge'}));!a.initConfig.meta.visx&&a.adConfig.creativeWrapper.ge&&(a.logger.log("Ad is not delivered via VIS.X and creative wrapper 'ge' was enabled - creative wrapper is now disabled"),
a.adConfig.creativeWrapper.ge=!1);if(a.adConfig.creativeWrapper.ge)try{l='<div id="grumi-container"><script type="text/javascript" nonce="!headerNonce!">!function(d,i){var p={wver:"1.1.3",wtype:"dfp",key:"c41ea7b0-7b8a-4bcc-9876-4a9f25cab255",meta:{adup:"'+a.initConfig.meta.adUnitId+'",dest:"",w:"'+a.adConfig.display.width+'",h:"'+a.adConfig.display.height+'",li:"",adv:"",ord:"",cr:"",aduid:"",haduid:"",isAfc:"",isAmp:"",qid:"",cust_imp:"",cust1:"",cust2:"",cust3:"",caid:"",di:"'+a.initConfig.meta.dspId+
'",dn:"'+a.initConfig.meta.dspName+'",dcid:"'+a.initConfig.meta.creativeId+'",pid:"'+a.initConfig.meta.publisherId+'",pn:"",adElId:""},sp:"dfp",cfg:{},pbAdId:"",pbAdIdAst:"",pbBidder:"",hbPb:"",hbCid:"",site:"",pimp:""};window.grumi=p}();\x3c/script><template style="display: none;" id="template0"><xmp style="display: none;" id="xmp0">'+l+'</xmp></template><script type="text/javascript" nonce="!footerNonce!">!function(n){var e,o=window.grumi.key,i=window.grumi,r=i&&i.wtype&&"gpt"===i.wtype,a=1*new Date,d=navigator.userAgent&&navigator.userAgent.match(/\\b(MSIE |Trident.*?rv:|Edge\\/)(\\d+)/);function t(){var e=function(){for(var e,t=document.getElementsByTagName("template"),n=t.length-1;0<=n;n--)if("template0"===t[n].id){e=t[n];break}return e}();return e.content?e.content.getElementById?e.content.getElementById("xmp0"):e.content.childNodes[0]:e.getElementsByTagName("xmp")[0]}function u(e,t){t=t||!1,top.postMessage&&top.postMessage({evType:e||"",key:i.key,adup:i.meta.adup,html:window.grumi?window.grumi.tag:"",el:i.meta.adElId,refresh:t},"*")}function w(e,t){var n="",o=d&&"complete"===document.readyState;window.grumi&&(window.grumi.fsRan=!0,n=window.grumi.tag),o||(window.document.open(),window.document.write(n),window.document.close()),((t=t||!1)||o)&&u(e,o)}function c(e,n){return function(){var t=setTimeout(function(){var e=document.getElementById(a);e&&null===function(e){if(void 0!==e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;t&&1!==t.nodeType;)t=t.nextSibling;return t}(e)&&n&&n(),clearTimeout(t)},e)}}c(5e3,function(){w()})(),c(2e3,function(){u("slwCl")})(),window.grumi.tag=(e=t())&&e.innerHTML,window.grumi.scriptHost=n,window.parent&&window.parent.postMessage&&window.parent.postMessage({iw:!0,key:i.key,adup:i.meta.adup,el:i.meta.adElId},"*"),function(){var e=document.createElement("script");e.type="text/javascript",e.src=n+o+"/grumi.js",e.className="rm",e.id=a,r&&!d&&(e.async=!0);var t="_"+1*new Date;window[t]=function(){w("netErr",!0)},window.grumi.start=1*new Date;try{window.document.write(e.outerHTML.replace(\'class="rm"\',\'onerror="\'+t+\'();"\'))}catch(e){w()}}()}(("http"===window.location.protocol.substr(0,4)?window.location.protocol:"https:")+"//rumcdn.geoedge.be/");\x3c/script></div>',
a.context.messageBus.event.emit({kind:'tracker',event:'creative-wrapper-setup-done-ge'})}catch(w){a.logger.error('Error during creative wrapper setup (ge)'),a.context.messageBus.event.emit({kind:'tracker',event:'creative-wrapper-setup-error-ge'})}if(l){try{var p='<!DOCTYPE html><head>'+(a.adConfig.display.useFriendlyIframe?'<script>var inDapIF=true;\x3c/script>':'')+'</head><body style="margin:0;padding:0;">'+l+'</body></html>';k.iframe.contentDocument.open();k.iframe.contentDocument.close();k.iframe.contentWindow.contents=
p;k.iframe.src='javascript:window["contents"]'}catch(w){a.logger.error('Error during creative content handling (redirect code)'),a.context.messageBus.event.emit({kind:'tracker',event:'error-redirect-add'})}k.alreadyInserted=!0}'undefined'!==typeof a.adConfig.thirdParty.creativeSource[d]&&'disabled'!==a.adConfig.thirdParty.creativeSource[d]&&k.thirdPartyAd.run(k.iframe)}else'blurred-video'===g.mode?(a.logger.log('Post process after insert ad - '+d+' - '+g.mode+' creative',{configCreative:g}),k.alreadyInserted=
!0):a.logger.log('Post process after insert ad - SKIP '+d+' - '+g.mode+" creative because of unsupported mode '"+g.mode+"'",{configCreative:g})}else a.logger.log('Post process after insert ad - SKIP '+d+' - '+g.mode+' creative for now, because not needed yet',{configCreative:g})});this.isReady=!0};p.prototype.dispose=function(){var b=this;this.logger.debug('dispose');this.understitialPaintHandler.dispose();Object.keys(this.creative).forEach(function(a){var c=b.adCore.getCreativeOptionDetails(b.creative,
a);a=c.configCreative;c=c.creativeDetails;'static-image'===a.mode?c.image&&c.image.remove():'html5'===a.mode||'redirect'===a.mode||'redirect-use-rtb'===a.mode||'redirect-load-rtb-hidden'===a.mode?c.iframe&&c.iframe.remove():'blurred-video'===a.mode&&c.canvas&&c.canvas.remove();c.container&&(c.container.remove(),c.container=!1);c.wrapper&&(c.wrapper.remove(),c.wrapper=!1);c.host&&(c.host.remove(),c.host=!1)})};p.prototype.removeCloseAdButton=function(){'creative'===this.adCore.bundle&&this.closeAdButton&&
(this.closeAdButton.root&&this.context.messageBus.clickOverlay.emit({kind:'remove-element',element:this.closeAdButton.root}),delete this.closeAdButton)};p.prototype.addCloseAdButton=function(){var b=this.adConfig.closeButton.mode;if('creative'===this.adCore.bundle&&!this.context.Environment.isSticky&&('enabled'===b||'only-inline'===b)||this.context.Environment.isSticky&&('enabled'===b||'only-sticky'===b))if(this.closeAdButton=b=new l.a(this.context,this.adConfig,this.closeAd),b.root){var a=l.a.defaultPosition;
'disabled'!==this.adConfig.closeButton.mode&&(a=this.adConfig.closeButton.position);this.context.messageBus.clickOverlay.emit({kind:'add-element',element:b.root,preferredPosition:a})}};p.prototype.onSticky=function(){this.logger.debug('onSticky');'disabled'===this.adConfig.creative.sticky.mode||'redirect-use-rtb'===this.adConfig.creative.sticky.mode||'takeoverInlineAndSticky'!==this.adConfig.display.effect&&'takeoverUnderstitialMiniAndSticky'!==this.adConfig.display.effect||(this.context.Environment.updatedCreativeWidth=
this.adConfig.creative.sticky.width,this.context.Environment.updatedCreativeHeight=this.adConfig.creative.sticky.height,this.adCore.onResize());this.postProcessAfterInsertAd();this.removeCloseAdButton();this.addCloseAdButton()};p.prototype.onTakeoverEnable=function(b){var a=this;this.logger.log('onTakeoverEnable - '+b);this.showTakeover=!0;if(this.isReady){var c=this.adCore.getCreativeOptionDetails(this.creative,b).creativeDetails;if(c.thirdPartyAd&&c.thirdPartyAd.thirdPartyHostContainer){n.h(c.thirdPartyAd.thirdPartyHostContainer);
this.logger.log('onTakeoverEnable - '+b+' - adding styles');var e=!0,g='animated'+this.initConfig.meta.adSessionId,k='slideInUp'+this.initConfig.meta.adSessionId;c.thirdPartyAd.thirdPartyHostContainer.classList.add(g,k);var l=function(){e&&a.showTakeover&&(a.logger.log('onTakeoverEnable - '+b+' - removing styles'),c.thirdPartyAd.thirdPartyHostContainer.classList.remove(g,k),c.thirdPartyAd.thirdPartyHostContainer.removeEventListener('animationend',l),e=!1)};c.thirdPartyAd.thirdPartyHostContainer.addEventListener('animationend',
l);this.context.Environment.hostWindow.setTimeout(l,2E3)}else this.postProcessAfterInsertAd(b)}else this.logger.log('onTakeoverEnable - '+b+' - creative is not yet ready')};p.prototype.onTakeoverDisable=function(b){var a=this;this.logger.log('onTakeoverDisable - '+b);this.showTakeover=!1;if(this.isReady){var c=this.adCore.getCreativeOptionDetails(this.creative,b).creativeDetails;if(c.thirdPartyAd&&c.thirdPartyAd.thirdPartyHostContainer){this.logger.log('onTakeoverDisable - '+b+' - adding styles');
var e=!0,g='animated'+this.initConfig.meta.adSessionId,k='slideOutDown'+this.initConfig.meta.adSessionId;c.thirdPartyAd.thirdPartyHostContainer.classList.add(g,k);var l=function(){e&&!a.showTakeover&&(n.f(c.thirdPartyAd.thirdPartyHostContainer),a.logger.log('onTakeoverDisable - '+b+' - removing styles'),c.thirdPartyAd.thirdPartyHostContainer.classList.remove(g,k),c.thirdPartyAd.thirdPartyHostContainer.removeEventListener('animationend',l),e=!1)};c.thirdPartyAd.thirdPartyHostContainer.addEventListener('animationend',
l);this.context.Environment.hostWindow.setTimeout(l,2E3)}else this.logger.log('onTakeoverDisable - '+b+" - can't find third party ad and corresponding host container")}else this.logger.log('onTakeoverDisable - '+b+' - creative is not yet ready')}},function(g,e,b){function n(){for(var b=window,e=document;b!==window.top;)try{e=b.parent.document,b=b.parent}catch(v){break}return{wnd:b,doc:e}}b.d(e,'a',function(){return n})},function(g,e,b){function n(b){b.__YOC=b.__YOC||[];b.__YOC.session=b.__YOC.session||
{}}b.d(e,'a',function(){return n})},function(g,e,b){b.d(e,'a',function(){return'0e39620986af0f4c412999aadaaa2d6b56c22bec'});b.d(e,'b',function(){return'2020-05-12T10-25-13-696Z'})},function(g,e,b){var n=Array.isArray,c=Object.keys,l=Object.prototype.hasOwnProperty;g.exports=function p(b,e){if(b===e)return!0;if(b&&e&&'object'==typeof b&&'object'==typeof e){var g=n(b),a=n(e);if(g&&a){var d=b.length;if(d!=e.length)return!1;for(g=d;0!==g--;)if(!p(b[g],e[g]))return!1;return!0}if(g!=a)return!1;g=b instanceof
Date;a=e instanceof Date;if(g!=a)return!1;if(g&&a)return b.getTime()==e.getTime();g=b instanceof RegExp;a=e instanceof RegExp;if(g!=a)return!1;if(g&&a)return b.toString()==e.toString();a=c(b);d=a.length;if(d!==c(e).length)return!1;for(g=d;0!==g--;)if(!l.call(e,a[g]))return!1;for(g=d;0!==g--;)if(d=a[g],!p(b[d],e[d]))return!1;return!0}return b!==b&&e!==e}},function(g,e,b){function n(a){window.top.postMessage(a,'*')}function c(a,b,c,d){return{event:a,type:'url',content:b,meta:c,isInvalidated:void 0===
d?!1:d,created:Date.now(),lastUpdate:Date.now()}}function l(a,b,c,d){return{event:a,type:'script',content:b,meta:c,isInvalidated:void 0===d?!1:d,created:Date.now(),lastUpdate:Date.now()}}function v(a,b){var c;return function(d){for(var e=[],h=0;h<arguments.length;++h)e[h-0]=arguments[h];var f=this;clearTimeout(c);c=window.setTimeout(function(){a.apply(f,e)},b)}}b.d(e,'a',function(){return G});b(19);b(20);b(21);var q=b(1),B=function(a,b,c,d,e){var h=this;this.displayAsUnderstitialEnabled=!1;this.updateAdPosition=
function(b){b=void 0===b?h.adVisibilityDetails:b;var a=h.context.Environment;h.adVisibilityDetails=b;h.logger.log('updateAdPosition() Ad is visible for '+100*h.adVisibilityDetails.visibilityPercentage+'% (Position: '+h.adVisibilityDetails.top+'x'+h.adVisibilityDetails.left+' - '+h.adVisibilityDetails.bottom+'x'+h.adVisibilityDetails.right+' - Dimension: '+h.adVisibilityDetails.width+'x'+h.adVisibilityDetails.height+') ('+(h.adVisibilityDetails.bottom-a.viewportHeight)+')');h.advertisementMessageAboveContainer.style.height=
h.advertisementMessageAboveWrapper.clientHeight+'px';h.advertisementMessageBelowContainer.style.height=h.advertisementMessageBelowWrapper.clientHeight+'px';a.isUnderstitial?('scale'===h.adConfig.display.responsive.mode&&h.adConfig.display.responsive.followLayout&&(h.rootContainer.style.overflow='hidden'),('understitialMini'===h.adConfig.display.effect||'understitialMiniToSticky'===h.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===h.adConfig.display.effect||'takeoverUnderstitialMiniAndHidden'===
h.adConfig.display.effect)&&1<=h.adVisibilityDetails.visibilityY&&(0>=h.adConfig.creative.marginTop||0<h.adConfig.creative.marginTop&&h.adVisibilityDetails.top>=h.adConfig.creative.marginTop)&&(0>=h.adConfig.creative.marginBottom||0<h.adConfig.creative.marginBottom&&0>=h.adVisibilityDetails.bottom-a.viewportHeight+h.adConfig.creative.marginBottom)?(h.displayAsUnderstitialEnabled=!1,a.supportClipPath?(h.productContainer.style.clipPath='',h.productContainer.style.webkitClipPath='',h.productContainer.style.mozClipPath=
'',h.productContainer.style.msClipPath='',h.productContainer.style.oClipPath=''):(h.productContainer.style.clip='',h.backgroundContainer.style.transform=''),h.backgroundContainer.style.position='absolute',a.isSticky||(h.backgroundContainer.style.width=a.scaledWidth+'px',h.backgroundContainer.style.left='scale'!==h.adConfig.display.responsive.mode||h.adConfig.display.responsive.followLayout?'scale'===h.adConfig.display.responsive.mode?parseInt(((a.availableWidth-a.scaledWidth)/2).toString(),10).toString()+
'px':'0px':parseInt(((a.viewportWidth-a.scaledWidth)/2).toString(),10).toString()+'px'),h.context.messageBus.event.emit({kind:'understitial',enabled:!1})):(h.displayAsUnderstitialEnabled=!0,a.supportClipPath?(h.productContainer.style.clipPath='inset(0)',h.productContainer.style.webkitClipPath='inset(0)',h.productContainer.style.mozClipPath='inset(0)',h.productContainer.style.msClipPath='inset(0)',h.productContainer.style.oClipPath='inset(0)'):(h.productContainer.style.clip='rect(auto, auto, auto, auto)',
h.backgroundContainer.style.transform='translateZ(0px)'),h.backgroundContainer.style.position='fixed',a.isSticky||(h.backgroundContainer.style.width=a.scaledWidth+'px',h.backgroundContainer.style.left=parseInt(((a.viewportWidth-a.scaledWidth)/2).toString(),10).toString()+'px'),h.context.messageBus.event.emit({kind:'understitial',enabled:!0}))):a.isSticky||(h.backgroundContainer.style.position='absolute',h.backgroundContainer.style.width=a.scaledWidth+'px',h.backgroundContainer.style.left='scale'!==
h.adConfig.display.responsive.mode||h.adConfig.display.responsive.followLayout?'scale'===h.adConfig.display.responsive.mode&&h.adConfig.display.responsive.followLayout?parseInt(((a.availableWidth-a.scaledWidth)/2).toString(),10).toString()+'px':parseInt(((a.availableWidth-a.usedWidth)/2).toString(),10).toString()+'px':parseInt(((a.viewportWidth-a.scaledWidth)/2).toString(),10).toString()+'px');a.isSticky?(h.contentContainer.style.top='',h.contentContainer.style.left='',h.contentContainer.style.width=
'',h.contentContainer.style.height='',h.productContainer.style.position='relative',h.productContainer.style.top='',h.productContainer.style.left='',h.productContainer.style.width='',h.productContainer.style.height='',h.productContainer.style.clip='',h.productContainer.style.clipPath='',h.backgroundContainer.style.position='relative',h.backgroundContainer.style.transform='',h.backgroundContainer.style.top='',h.backgroundContainer.style.bottom='',h.backgroundContainer.style.left='',h.backgroundContainer.style.width=
'',h.backgroundContainer.style.height='',h.productContainer.style.top='0px',h.productContainer.style.left='0px',h.rootContainer.style.position='fixed',h.rootContainer.style.left=parseInt(((a.viewportWidth-a.scaledWidth)/2).toString(),10).toString()+'px',h.rootContainer.style.right='',h.rootContainer.style.top='',h.rootContainer.style.bottom=h.adConfig.display.stickyMargin+'px'):'scale'===h.adConfig.display.responsive.mode&&(h.rootContainer.style.width='auto',h.rootContainer.style.height='auto',h.contentContainer.style.width=
'auto',h.contentContainer.style.height=a.scaledHeight+'px',a.isDebugMode&&(h.contentContainer.style.backgroundColor='green'),h.productContainer.style.position='absolute',h.productContainer.style.top='0px',h.productContainer.style.left='0px',h.productContainer.style.width='100%',h.productContainer.style.height='auto',b=h.productContainer.getBoundingClientRect().left,h.adConfig.display.responsive.followLayout||(h.productContainer.style.position='absolute',h.productContainer.style.width=a.viewportWidth+
'px',h.productContainer.style.left='-'+b+'px',h.advertisementMessageAboveWrapper.style.width=a.viewportWidth+'px',h.advertisementMessageAboveWrapper.style.left='-'+b+'px',h.advertisementMessageBelowWrapper.style.width=a.viewportWidth+'px',h.advertisementMessageBelowWrapper.style.left='-'+b+'px'),a.isUnderstitial?(0<h.adConfig.creative.marginTop?(h.backgroundContainer.style.top=h.adConfig.creative.marginTop+Math.floor((a.viewportHeight-h.adConfig.creative.marginTop-h.adConfig.creative.marginBottom-
a.scaledHeight)/2)+'px',h.backgroundContainer.style.bottom=''):0<h.adConfig.creative.marginBottom?(h.backgroundContainer.style.top='',h.backgroundContainer.style.bottom=h.adConfig.creative.marginBottom+Math.floor((a.viewportHeight-h.adConfig.creative.marginTop-h.adConfig.creative.marginBottom-a.scaledHeight)/2)+'px'):(h.backgroundContainer.style.top=Math.floor((a.viewportHeight-h.adConfig.creative.marginTop-h.adConfig.creative.marginBottom-a.scaledHeight)/2)+'px',h.backgroundContainer.style.bottom=
''),'understitialMini'===h.adConfig.display.effect||'understitialMiniToSticky'===h.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===h.adConfig.display.effect||'takeoverUnderstitialMiniAndHidden'===h.adConfig.display.effect?(h.contentContainer.style.height=a.scaledHeight+'px',h.productContainer.style.height=a.scaledHeight+'px',h.displayAsUnderstitialEnabled&&0<h.adConfig.creative.marginTop?h.adVisibilityDetails.top>=0+h.adConfig.creative.marginTop?(h.backgroundContainer.style.top='',
h.backgroundContainer.style.bottom='0px'):(h.backgroundContainer.style.top=h.adConfig.creative.marginTop+'px',h.backgroundContainer.style.bottom=''):h.displayAsUnderstitialEnabled&&0<h.adConfig.creative.marginBottom?0<=h.adVisibilityDetails.top?(h.backgroundContainer.style.top='',h.backgroundContainer.style.bottom=h.adConfig.creative.marginBottom+'px'):(h.backgroundContainer.style.top='0px',h.backgroundContainer.style.bottom=''):0<=h.adVisibilityDetails.top?(h.backgroundContainer.style.top='',h.backgroundContainer.style.bottom=
'0px'):(h.backgroundContainer.style.top='0px',h.backgroundContainer.style.bottom='')):'understitialSizeSmall'===h.adConfig.display.effect?(h.contentContainer.style.height=.28*a.viewportHeight+'px',h.productContainer.style.height=.28*a.viewportHeight+'px'):'understitialSizeMedium'===h.adConfig.display.effect?(h.contentContainer.style.height=.6*a.viewportHeight+'px',h.productContainer.style.height=.6*a.viewportHeight+'px'):'understitialSizeLarge'===h.adConfig.display.effect?(h.contentContainer.style.height=
.9*a.viewportHeight+'px',h.productContainer.style.height=.9*a.viewportHeight+'px'):'understitialSizeCustom'===h.adConfig.display.effect?'pixel'===h.adConfig.display.unit?(h.contentContainer.style.height=h.adConfig.display.height+'px',h.productContainer.style.height=h.adConfig.display.height+'px'):'percent'===h.adConfig.display.unit?(h.contentContainer.style.height=a.viewportHeight*(parseInt(h.adConfig.display.height.toString(),10)/100)+'px',h.productContainer.style.height=a.viewportHeight*(parseInt(h.adConfig.display.height.toString(),
10)/100)+'px'):(h.contentContainer.style.height=a.viewportHeight+'px',h.productContainer.style.height=a.viewportHeight+'px'):(h.contentContainer.style.height=a.viewportHeight+'px',h.productContainer.style.height=a.viewportHeight+'px')):h.productContainer.style.height=a.scaledHeight+'px','third-party-ad'===h.initConfig.product.key&&(h.productContainer.style.position='relative',h.productContainer.style.height='auto',h.contentContainer.style.height='auto'))};this.showAdvertisementMessage=function(){h.logger.debug('showAdvertisementMessage');
'string'===typeof h.adConfig.advertisementMessage.contentAbove&&0<h.adConfig.advertisementMessage.contentAbove.trim().length&&(h.advertisementMessageAboveContainer.style.visibility='visible',h.advertisementMessageAboveContainer.style.display='block');'string'===typeof h.adConfig.advertisementMessage.contentBelow&&0<h.adConfig.advertisementMessage.contentBelow.trim().length&&(h.advertisementMessageBelowContainer.style.visibility='visible',h.advertisementMessageBelowContainer.style.display='block')};
this.hideAdvertisementMessage=function(){h.logger.debug('hideAdvertisementMessage');'string'===typeof h.adConfig.advertisementMessage.contentAbove&&0<h.adConfig.advertisementMessage.contentAbove.trim().length&&(h.advertisementMessageAboveContainer.style.visibility='hidden',h.advertisementMessageAboveContainer.style.display='none');'string'===typeof h.adConfig.advertisementMessage.contentBelow&&0<h.adConfig.advertisementMessage.contentBelow.trim().length&&(h.advertisementMessageBelowContainer.style.visibility=
'hidden',h.advertisementMessageBelowContainer.style.display='none')};this.replaceDictionaryMacros=function(a){var b=a,c={unknown:{AdvertisementMessage:'Advertisement',SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'},en:{AdvertisementMessage:'Advertisement',SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'},de:{AdvertisementMessage:'Werbung',SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'},es:{AdvertisementMessage:'Publicidad',
SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'},pl:{AdvertisementMessage:'Reklama',SkipCounterMessage:'You can skip video in @SkipCounter@',SkipToMessage:'Skip Ad'}};Object.keys(c).forEach(function(a){if('object'===typeof c[a]&&a===(h.context.Environment.language||'unknown')){var d=c[a];Object.keys(d).forEach(function(a){'string'===typeof d[a]&&(b=b.replace('@'+a+'@',d[a]))})}});return b};this.context=a;this.logger=a.newLogger('AdPainter');this.rootContainer=b;b.style.fontSize=
'0';a=a.Environment;a.isMRAID&&'webtester.mraid.org'!==a.hostWindow.location.hostname&&(b.style.marginTop='50vh',b.style.transform='translateY(-50%)');this.initConfig=c;this.adConfig=d;this.adVisibilityDetails=e;this.advertisementMessageAboveContainer=q.e(a,'div');this.advertisementMessageAboveWrapper=q.e(a,'div');this.insertAdvertisementMessageAbove();d=q.e(a,'div');d.id='yoc_content_container_'+this.context.productTitlePostfix+'_'+c.meta.adSessionId;d.style.position='relative';d.style.lineHeight=
'0';this.contentContainer=d;b.append(d);b=q.e(a,'div');this.context.backgroundContainer=b;b.id='yoc_background_container_'+this.context.productTitlePostfix+'_'+c.meta.adSessionId;b.style.position='absolute';b.style.top='0px';b.style.left='0px';b.style.width='100%';b.style.height='auto';b.style.display='inline-block';b.style.cursor='pointer';b.style.backgroundColor=this.adConfig.display.bgColor;this.backgroundContainer=b;b=q.e(a,'div');this.context.productContainer=b;b.id='yoc_product_container_'+
this.context.productTitlePostfix+'_'+c.meta.adSessionId;b.style.position='relative';b.style.display='block';b.style.cursor='pointer';b.style.backgroundColor=this.adConfig.display.bgColor;this.productContainer=b;d.append(b);this.advertisementMessageBelowContainer=q.e(a,'div');this.advertisementMessageBelowWrapper=q.e(a,'div');this.insertAdvertisementMessageBelow()};B.prototype.insertAd=function(a,b,c){a=this.rootContainer;var d=this.contentContainer,e=this.backgroundContainer,h=this.productContainer;
this.logger.log('Inserting Ad');a.style.zIndex=this.adConfig.display.zIndex.toString();a.style.position='relative';void 0===this.initConfig.product.key?h.append(b):'yoc-inline-video-ad'===this.initConfig.product.key?(h.append(b),this.updateAdPosition()):'yoc-understitial-ad'===this.initConfig.product.key?(h.append(e),e.append(b),this.updateAdPosition()):('third-party-ad'===this.initConfig.product.key&&(d.style.margin='0px auto',h.style.width='100%',h.style.height='auto'),h.append(b));this.context.Environment.hostDocument.body.append(c)};
B.prototype.close=function(){q.f(this.rootContainer)};B.prototype.revertCursorToDefault=function(){this.productContainer.style.removeProperty('cursor')};B.prototype.insertAdvertisementMessageAbove=function(){var a=this.context.Environment;this.advertisementMessageAboveContainer.id='yoc_advertisement_message_above_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.advertisementMessageAboveContainer.style.cssText='position: relative; top: 0px; left: 0px; width: 100%; height: auto; margin: 0px auto; text-align: center; color: '+
this.adConfig.advertisementMessage.colorText+'; background-color: '+this.adConfig.advertisementMessage.colorBackground+'; box-sizing: content-box; visibility: hidden; display: none; line-height: 1.2';this.advertisementMessageAboveWrapper.id='yoc_advertisement_message_above_wrapper_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.advertisementMessageAboveWrapper.style.cssText='position: absolute; top: 0px; left: 0px; width: 100%; height: auto;';a.isMRAID||(this.advertisementMessageAboveWrapper.innerHTML=
this.replaceDictionaryMacros(this.adConfig.advertisementMessage.contentAbove));this.advertisementMessageAboveContainer.append(this.advertisementMessageAboveWrapper);this.rootContainer.append(this.advertisementMessageAboveContainer)};B.prototype.insertAdvertisementMessageBelow=function(){this.advertisementMessageBelowContainer.id='yoc_advertisement_message_below_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.advertisementMessageBelowContainer.style.cssText='position: relative; top: 0px; left: 0px; width: 100%; height: auto; margin: 0px auto; color: '+
this.adConfig.advertisementMessage.colorText+'; background-color: '+this.adConfig.advertisementMessage.colorBackground+'; box-sizing: content-box; visibility: hidden; display: none;';this.advertisementMessageBelowWrapper.id='yoc_advertisement_message_below_wrapper_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.advertisementMessageBelowWrapper.style.cssText='position: absolute; top: 0px; left: 0px; width: 100%; height: auto;';this.context.Environment.isMRAID||(this.advertisementMessageBelowWrapper.innerHTML=
this.replaceDictionaryMacros(this.adConfig.advertisementMessage.contentBelow));this.advertisementMessageBelowContainer.append(this.advertisementMessageBelowWrapper);this.rootContainer.append(this.advertisementMessageBelowContainer)};var p=function(a){var b=this;this.list=[];this.finishedForced=this.finished=!1;this.onAsset=function(a){var c=b.context.Environment;switch(a.kind){case 'added':b.onAssetAdded(a.message);break;case 'updated':b.onAssetUpdate(a.message);break;case 'finished':if(c.isVideo||
c.isPreloadImage)b.onAssetFinished();else b.finishedForced?b.logger.log("SKIP finished because it's already finished"):(b.logger.log('Finished'),b.onAssetFinished());break;case 'finished-forced':c.isVideo||c.isPreloadImage||(b.finishedForced?b.logger.log("SKIP finished forced because it's already finished"):(b.logger.log('Finished forced'),b.finishedForced=!0,b.onAssetFinished()))}};this.onAssetAdded=function(a){var c=b.list;b.context.messageBus.event.emit({kind:'assetLoading',url:a.asset.url});c.push(a.asset)};
this.onAssetUpdate=function(a){var c=b.context.messageBus.event,d=a.asset.state;a=a.asset.url;'failed-preload'===d?c.emit({kind:'assetFailed',url:a}):'loaded'===d&&(c.emit({kind:'assetLoaded',url:a}),b.readyCheck())};this.onAssetFinished=function(){var a=b.logger;b.context.messageBus.event.emit({kind:'assetAllLoaded'});a.log('finished')};this.onEventAssetLoading=function(a){b.logger.log('start loading',{url:a.url})};this.onEventAssetLoaded=function(a){b.logger.debug('loading finished successful',
{url:a.url})};this.onEventAssetFailed=function(a){b.logger.error('loading failed',{url:a.url})};this.onEventAssetAllLoaded=function(a){b.logger.log('all loaded')};this.context=a;this.logger=a.newLogger('Assets');a.messageBus.asset.on(this.onAsset)};p.prototype.readyCheck=function(){var a=this.context.Environment;!this.finished&&this.isAllAssetsLoaded()?this.context.messageBus.asset.emit({kind:'finished'}):a.isVideo||a.isPreloadImage||this.context.messageBus.asset.emit({kind:'finished-forced'})};p.prototype.isAllAssetsLoaded=
function(){return this.finished=this.list.every(function(a){return'loaded'===a.state})};var k=function(a){var b=this;this.startTime=+new Date;this.onLog=function(a){var c=b.context.Environment,d=q.e(c,'div'),e=q.e(c,'span');e.className='timestamp';e.textContent=((Date.now()-b.startTime)/1E3).toFixed(3);d.className='row '+a.kind;d.append(e);d.append(c.hostDocument.createTextNode(a.message));var f=c.hostDocument.createDocumentFragment();if(a.details){var J=a.details;Object.keys(a.details).forEach(function(a){var b=
q.e(c,'div');b.textContent=a+' = '+J[a];b.className='property';f.append(b)})}d.append(f);b.container.prepend(d)};this.context=a;a=a.Environment;var c=q.e(a,'div');this.container=c;var d=q.e(a,'div');d.append(c);d.id='yoc-debug';q.g(a,'#yoc-debug {\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 200px;\n    max-height: 50vh;\n    overflow: auto;\n    background-color: rgba(255, 255, 255, 0.985);\n    position: fixed;\n    z-index: 1000000000;\n    border-top: 1px solid #cfd0cf;\n    box-sizing: border-box;\n    font-family: Arial, sans-serif;\n    box-shadow: 0 0 1px 0 rgba(207, 208, 207, 0.2);\n}\n\n#yoc-debug .row {\n    margin-bottom: 0.3em;\n}\n\n#yoc-debug .log {\n    color: black;\n}\n\n#yoc-debug .debug {\n    color: grey;\n}\n\n#yoc-debug .warn {\n    color: orange;\n}\n\n#yoc-debug .error {\n    color: red;\n}\n\n#yoc-debug .timestamp {\n    color: #558;\n    font-size: 75%;\n    width: 4em;\n    display: inline-block;\n    text-align: right;\n    padding-right: 0.3em;\n    font-variant-numeric: tabular-nums;\n}\n\n#yoc-debug .property {\n    color: #78a;\n    font-size: 75%;\n    margin-left: 4.3em;\n    white-space: nowrap;\n}\n');
a.hostDocument.body.append(d);this.context.messageBus.logger.on(this.onLog)};b(22);b(23);var a=b(0),d=function(a,b,c,d,e,h,f,g,k,l){l=void 0===l?{externalId:''}:l;this.configuration={externalId:''};this.title=a;this.context=b;this.metrics=c;this.adUnitId=d;this.orderId=e;this.lineItemId=h;this.creativeId=f;this.dealId=g;this.adSessionId=k;this.configuration=l;this.logger=this.context.newLogger('Metrics - '+a)};d.prototype.init=function(){return!1};d.prototype.track=function(a,b,c,d){return!1};d.prototype.verifyEventDetails=
function(a,b,c,d){a={category:a,action:b,label:void 0===c?'':c,value:void 0===d?'':d};''===a.category&&(a.category=this.metrics.initConfigProduct.title+'_'+this.metrics.initConfigProduct.release);if('undefined'===typeof a.action||null===a.action||'string'===typeof a.action&&0===a.action.length)a.action='';if('undefined'===typeof a.label||null===a.label||'string'===typeof a.label&&0===a.label.length)a.label='';'undefined'===typeof a.value||null===a.value||'string'===typeof a.value&&0===a.value.length||
0===parseInt(a.value,10)?a.value='1':a.value=parseInt(a.value,10).toString();return a};var m=function(){return d.apply(this,arguments)||this};$jscomp.inherits(m,d);m.prototype.init=function(){return!0};m.prototype.track=function(a,b,c,d){c=void 0===c?'':c;d=void 0===d?'':d;var e=this.verifyEventDetails(a,b,c,d);e='https://metrics.yoc.com/v1.2/'+this.metrics.normalizeInteger(this.orderId)+'/'+this.metrics.normalizeInteger(this.lineItemId)+'/'+this.metrics.normalizeInteger(this.creativeId)+'/'+this.metrics.normalizeInteger(this.adUnitId)+
'/'+this.metrics.normalizeString(e.category,!0)+'/'+this.metrics.normalizeString(e.action,!0)+'/'+this.metrics.normalizeString(e.label,!0)+'/'+this.metrics.normalizeString(e.value,!0)+'?cb='+this.metrics.normalizeInteger(this.adSessionId)+'_'+this.metrics.normalizeInteger(this.metrics.generateTimestamp())+'&d='+this.metrics.normalizeString(this.dealId,!0);this.metrics.loadTrackingImage(e);this.logger.log('Track',{orderId:this.orderId,lineItemId:this.lineItemId,creativeId:this.creativeId,adUnitId:this.adUnitId,
category:a,action:b,label:c,value:d,trackingImageURL:e});return!0};var u=function(){return d.apply(this,arguments)||this};$jscomp.inherits(u,d);u.prototype.init=function(){return!0};u.prototype.track=function(a,b,c,d){c=void 0===c?'':c;d=void 0===d?'':d;var e=this.verifyEventDetails(a,b,c,d);e='https://metrics.yoc.com/v1.0/'+this.metrics.normalizeInteger(this.orderId)+'/'+this.metrics.normalizeInteger(this.lineItemId)+'/'+this.metrics.normalizeInteger(this.creativeId)+'/'+this.metrics.normalizeInteger(this.adUnitId)+
'/'+this.metrics.normalizeString(e.category,!0)+'/'+this.metrics.normalizeString(e.action,!0)+'/'+this.metrics.normalizeString(e.label,!0)+'/'+this.metrics.normalizeString(e.value,!0)+'?cb='+this.metrics.normalizeInteger(this.adSessionId)+'_'+this.metrics.normalizeInteger(this.metrics.generateTimestamp());this.metrics.loadTrackingImage(e);this.logger.log('Track',{orderId:this.orderId,lineItemId:this.lineItemId,creativeId:this.creativeId,adUnitId:this.adUnitId,category:a,action:b,label:c,value:d,trackingImageURL:e});
return!0};var F=function(){return d.apply(this,arguments)||this};$jscomp.inherits(F,d);F.prototype.init=function(){return!0};F.prototype.track=function(a,b,c,d){c=void 0===c?'':c;d=void 0===d?'':d;var e=this.verifyEventDetails(a,b,c,d);e='https://www.google-analytics.com/collect?v=1&tid='+this.configuration.externalId+'&aip=1&cid='+this.metrics.normalizeInteger(this.adSessionId)+'&t=event&ec='+this.metrics.normalizeString(e.category,!0)+'&ea='+this.metrics.normalizeString(e.action,!0)+'&el='+this.metrics.normalizeString(e.label,
!0)+'&ev='+this.metrics.normalizeInteger(e.value);this.metrics.loadTrackingImage(e);this.logger.log('Track',{category:a,action:b,label:c,value:d,trackingImageURL:e});return!0};var t=function(){return d.apply(this,arguments)||this};$jscomp.inherits(t,d);t.prototype.init=function(){window.YOCEvents=[];return!0};t.prototype.track=function(a,b,c,d){window.YOCEvents.push(b);return!0};g=b(17);var x=b.n(g),z='performance'in window&&'now'in performance&&'timeOrigin'in performance,E=function(a,b,d,e){var f=
this;this.registeredTrackerList=[];this.registeredProviderList=[];this.eventsToTrackOnlyOnce=[];this.onTracking=function(a){var b=f.context.Environment;if('register'===a.kind)if(void 0!==a.tracker)f.logger.log('Registered tracker "'+a.event+'"',{event:a.tracker.event,type:a.tracker.type,content:a.tracker.content,isInvalidated:a.tracker.isInvalidated}),f.registeredTrackerList.push(a.tracker),(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.addVideoTracking(a.tracker.event,a.tracker.content);
else if(void 0!==a.type&&void 0!==a.content)switch(a.type){case 'url':(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.addVideoTracking(a.event,a.content);var d=c(a.event,a.content,a.meta);f.logger.log('Registered new URL tracker "'+a.event+'"',{event:d.event,type:d.type,content:d.content,meta:d.meta,isInvalidated:d.isInvalidated});f.registeredTrackerList.push(d);break;case 'script':(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.addVideoTracking(a.event,a.content);d=l(a.event,a.content,
a.meta);f.logger.log('Registered new script tracker "'+a.event+'"',{event:d.event,type:d.type,content:d.content,meta:d.meta,isInvalidated:d.isInvalidated});f.registeredTrackerList.push(d);break;default:f.logger.error('Can\'t register "'+a.event+'" - unknown Tracker type '+a.type)}else f.logger.error('Can\'t register "'+a.event+'"');else if('send'===a.kind){f.logger.log('Try to send "'+a.event+'"',{details:a.details,meta:a.meta});var e=!1;f.eventsToTrackOnlyOnce.forEach(function(b){b.event===a.event&&
(!0===b.sent?(e=!0,f.logger.log('SKIP sending "'+a.event+"\" because 'ONLY-ONCE check' FAILED",{details:a.details,meta:a.meta})):(f.logger.log('CONTINUE sending "'+a.event+"\" because 'ONLY-ONCE check' passed",{details:a.details,meta:a.meta}),b.sent=!0))});if(e)f.context.messageBus.event.emit({kind:'tracker',event:'error-event-only-once',details:{source:a.event}});else{var h=!1,J=!1;f.registeredTrackerList.forEach(function(c){if(c.event===a.event&&!1===c.isInvalidated){if('undefined'!==typeof a.meta||
'undefined'!==typeof c.meta)if(h=!0,x()(a.meta,c.meta))f.logger.log('Meta: Found matched Tracker "'+a.event+'"',a.meta);else return;h&&(J=!0);var d=f.replaceMacros(c.content,a.details);'script'===c.type&&void 0!==c.content&&''!==c.content&&(f.loadTrackingScript(d),(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.invalidateVideoTracking(c.event,c.content),c.isInvalidated=!0,c.lastUpdate=Date.now(),f.logger.log('Sent script Tracker "'+a.event+'"',{content:d,meta:a.meta,details:a.details}));'url'===
c.type&&void 0!==c.content&&''!==c.content&&(f.loadTrackingImage(d),(b.isLogMode||b.isDebugMode)&&f.context.troubleshooting.invalidateVideoTracking(c.event,c.content),c.isInvalidated=!0,c.lastUpdate=Date.now(),f.logger.log('Sent URL Tracker "'+a.event+'"',{content:d,meta:a.meta,details:a.details}))}});if(h&&!J||'undefined'!==typeof a.meta&&!h&&!J)f.logger.log('Skip sending meta event "'+a.event+'"',a.meta);else switch(a.event){case 'served':case 'init':case 'sticky':case 'inline-to-sticky':case 'ready':case 'impression':case 'tpa-portrait-found':case 'tpa-landscape-found':case 'tpa-sticky-found':case 'tpa-hidden-found':case 'tpa-portrait-timeout':case 'tpa-landscape-timeout':case 'tpa-sticky-timeout':case 'tpa-hidden-timeout':case 'takeover':f.trackOnRegisteredProviders('',
a.event,'object'===typeof a.details&&'undefined'!==typeof a.details.msSinceStart?String(a.details.msSinceStart):'');break;case 'tracking-miner':f.trackOnRegisteredProviders('',a.event+'-'+('object'===typeof a.details&&'undefined'!==typeof a.details.countOfTrackersFound?String(a.details.countOfTrackersFound):''));break;case 'viewability':d='object'===typeof a.details&&'undefined'!==typeof a.details.msSinceStart?String(a.details.msSinceStart):'';f.trackOnRegisteredProviders('','general-viewable_ad_impression',
d);f.trackOnRegisteredProviders('',a.event,d);break;case 'click':case 'click-repeated':f.trackOnRegisteredProviders('',a.event,'object'===typeof a.details&&'undefined'!==typeof a.details.source?String(a.details.source):'');break;case 'error-event-only-once':f.trackOnRegisteredProviders('',a.event,'object'===typeof a.details&&'undefined'!==typeof a.details.source?String(a.details.source):'');break;case 'video-progress':f.trackOnRegisteredProviders('',a.event,'object'===typeof a.meta&&'undefined'!==
typeof a.meta.offset?String(a.meta.offset):'');break;case 'video-icon-static':case 'video-icon-iframe':case 'video-icon-html':f.trackOnRegisteredProviders('',a.event,f.initConfigMeta.creativeId);break;case 'video-error':f.trackOnRegisteredProviders('',a.event,(a.details&&a.details.errorCode&&String(a.details.errorCode))+(a.details&&a.details.message?'-'+String(a.details.message):'')||'');break;case 'video-vast-version':case 'mraid-version':f.trackOnRegisteredProviders('',a.event,a.details&&a.details.version&&
String(a.details.version)||'');break;case 'video-vast-duration':case 'video-real-duration':f.trackOnRegisteredProviders('',a.event,a.details&&a.details.duration&&String(a.details.duration)||'');break;case 'video-vast-dimensions':case 'video-real-dimensions':f.trackOnRegisteredProviders('',a.event,a.details&&a.details.dimensions&&String(a.details.dimensions)||'');break;case 'video-has-audio':f.trackOnRegisteredProviders('',a.event,a.details&&a.details.hasAudio?'true':'false');break;case 'video-vast-mediafile-type':f.trackOnRegisteredProviders('',
a.event,a.details&&String(a.details.mime)||'');break;case 'video-canplay-mime':f.trackOnRegisteredProviders('',a.event,a.details&&String(a.details.canplay)||'');break;case 'video-on-play-stats':f.trackOnRegisteredProviders('',a.event,a.details&&String(a.details.stats)||'');break;case 'video-warning-message':case 'video-subtitles-error':f.trackOnRegisteredProviders('',a.event,a.details&&String(a.details.message)||'');break;case 'video-source-type':f.trackOnRegisteredProviders('',a.event,a.details&&
String(a.details.type)||'');break;default:f.trackOnRegisteredProviders('',a.event)}}}};this.loadTrackingScript=function(a){var b=f.context.Environment,c=b.hostDocument.createElement('div');c.innerHTML=a;a=c.querySelectorAll('script');for(var d=0;d<a.length;d++){for(var e=a[d],h=b.hostDocument.createElement('script'),J=0;J<e.attributes.length;J++){var g=e.attributes[J];h.setAttribute(g.name,g.value)}h.appendChild(b.hostDocument.createTextNode(a[d].innerHTML));e.parentElement.insertBefore(h,e);e.remove()}q.f(c);
f.metricsContainer.append(c);return c};this.loadTrackingImage=function(a){a=new q.b(f.context,a,!1);q.f(a.node);f.metricsContainer.append(a.node);return a};this.loadTrackingIframe=function(a){a=new q.a(f.context,a,!1);q.f(a.node);f.metricsContainer.append(a.node);return a};this.generateCachebuster=function(){return f.normalizeInteger(''+f.currentTime()+String(1E8*Math.random()))};this.generateTimestamp=function(){return f.normalizeInteger(''+f.currentTime())};this.normalizeString=function(a,b){b=
void 0===b?!1:b;var c='';'string'!==typeof a&&(a=String(a));for(var d=0;d<a.length;d++)c=-1<'_-abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'.indexOf(a.charAt(d))?c+a.charAt(d):c+'_';b&&0===c.length&&(c='undefined');return c};this.normalizeInteger=function(a){var b='';'string'!==typeof a&&(a=String(a));for(var c=0;c<a.length;c++)-1<'0123456789'.indexOf(a.charAt(c))&&(b+=a.charAt(c));0===b.length&&(b='0');return b};this.currentTime=function(){return z?performance.timeOrigin+performance.now():
Date.now()};this.context=a;this.logger=this.context.newLogger('Metrics');this.initConfigMeta=d;this.initConfigProduct=e;this.eventsToTrackOnlyOnce.push({event:'init',sent:!1},{event:'ready',sent:!1},{event:'impression',sent:!1},{event:'viewability',sent:!1},{event:'video-start',sent:!1},{event:'video-firstquartile',sent:!1},{event:'video-midpoint',sent:!1},{event:'video-thirdquartile',sent:!1},{event:'video-complete',sent:!1},{event:'video-viewable_impression',sent:!1});this.metricsContainer=this.context.Environment.hostDocument.createElement('div');
this.metricsContainer.id='yoc_metrics_container_'+this.context.productTitlePostfix+'_'+this.initConfigMeta.adSessionId;q.f(this.metricsContainer);b.append(this.metricsContainer);this.context.messageBus.tracking.on(this.onTracking)};E.prototype.registerProvider=function(a,b,c){c=void 0===c?{externalId:''}:c;switch(b){case 'yoc-metrics':c=new u(a,this.context,this,this.initConfigMeta.adUnitId,this.initConfigMeta.orderId,this.initConfigMeta.lineItemId,this.initConfigMeta.creativeId,this.initConfigMeta.dealId,
this.initConfigMeta.adSessionId,c);c.init();this.registeredProviderList.push(c);this.logger.log('Registered Metrics Provider "'+a+'" ('+b+')');break;case 'yoc-metrics-visx':c=new m(a,this.context,this,this.initConfigMeta.adUnitId,this.initConfigMeta.orderId,this.initConfigMeta.lineItemId,this.initConfigMeta.creativeId,this.initConfigMeta.dealId,this.initConfigMeta.adSessionId,c);c.init();this.registeredProviderList.push(c);this.logger.log('Registered Metrics Provider "'+a+'" ('+b+')');break;case 'google-analytics':c=
new F(a,this.context,this,this.initConfigMeta.adUnitId,this.initConfigMeta.orderId,this.initConfigMeta.lineItemId,this.initConfigMeta.creativeId,this.initConfigMeta.dealId,this.initConfigMeta.adSessionId,c);c.init();this.registeredProviderList.push(c);this.logger.log('Registered Metrics Provider "'+a+'" ('+b+')');break;case 'test':c=new t(a,this.context,this,this.initConfigMeta.adUnitId,this.initConfigMeta.orderId,this.initConfigMeta.lineItemId,this.initConfigMeta.creativeId,this.initConfigMeta.dealId,
this.initConfigMeta.adSessionId,c);c.init();this.registeredProviderList.push(c);this.logger.log('Registered Metrics Provider "'+a+'" ('+b+')');break;default:return this.logger.error('Can\'t register unknown Metrics Provider "'+a+'" ('+b+')'),!1}return!0};E.prototype.trackOnRegisteredProviders=function(a,b,c,d){var e=this;c=void 0===c?'':c;d=void 0===d?'':d;var f=!0;this.registeredProviderList.forEach(function(h){h.track(a,b,c,d)||(e.logger.error('Track event failed ('+h.title+')',{category:a,action:b,
label:c,value:d}),f=!1)});return f};E.prototype.replaceMacros=function(a,b){var c=a,d=this.generateTimestamp();c=c.replace(new RegExp(decodeURIComponent('%25%25CACHEBUSTER%25%25'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%25%25cachebuster%25%25'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%25%25CACHEBUSTING%25%25'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%25%25cachebusting%25%25'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%5C%5BTIMESTAMP%5C%5D'),'g'),d);c=c.replace(new RegExp(decodeURIComponent('%5C%5Btimestamp%5C%5D'),
'g'),d);c=c.replace(/([\?&]correlator=)(?:\[placeholder\])/g,function(a,b){return b+d}).replace(/(\?|&)(correlator=)(&|$)/,function(a,b,c,e){return''+b+c+d+e});c=c.replace(/@PublisherHost@/g,this.context.Environment.publisherHost.value);if(b){var e=function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1')};Object.keys(b).forEach(function(a){c=c.replace(new RegExp(e('['+a.toLowerCase()+']'),'g'),b[a]);c=c.replace(new RegExp(e('['+a.toUpperCase()+']'),'g'),b[a]);c=c.replace(new RegExp(e('%%'+a.toLowerCase()+
'%%'),'g'),b[a]);c=c.replace(new RegExp(e('%%'+a.toUpperCase()+'%%'),'g'),b[a])})}return c};var I=b(5),w=function(a,b){this.messageBus=a;this.prefix=void 0===b?'':b};w.prototype.extend=function(a){return new w(this.messageBus,a)};w.prototype.emitLogMessage=function(a,b,c){var d=this.prefix;this.messageBus.logger.emit({kind:a,message:''!==d?d+': '+b:b,details:c})};w.prototype.debug=function(a,b){this.emitLogMessage('debug',a,b)};w.prototype.log=function(a,b){this.emitLogMessage('log',a,b)};w.prototype.warn=
function(a,b){this.emitLogMessage('warn',a,b)};w.prototype.error=function(a,b){this.emitLogMessage('error',a,b)};var D=function(a){return function(b){return new w(a,b)}},O=b(11),f=b(3),y=b(14),H=function(){this.deliveryContainer=null;this.usedHeight=this.usedWidth=this.updatedCreativeHeight=this.updatedCreativeWidth=this.scrollLeft=this.scrollTop=this.availableWidth=this.viewportHeight=this.viewportWidth=0;this.usedScaleFactor=1;this.scaledHeight=this.scaledWidth=0;this.isError=this.supportClipPath=
this.isUnderstitial=this.isSticky=!1;this.logger=this.context=0;this.creativeOption=this.deviceOrientationOriginal=this.deviceOrientation='portrait';this.isBrowserSafari=this.isDeviceDesktop=!1;this.isPortrait=!0;this.isLandscape=!1;this.isDealPricingTypeUnknown=!0;this.isVCPM=this.isDealPricingTypeVCPM=this.isDealPricingTypeCPM=!1;this.isPreloadImage=!0;this.isAutoResize=this.isVideo=this.isMRAID=!1;this.bundle='';this.ownWindow=window;this.ownDocument=document;var a=Object(y.a)(),b=a.wnd;this.hostWindow=
b;this.hostDocument=a.doc;var c={insideAmp:Object(O.c)(this.hostWindow),escapableToTopWindow:this.hostWindow===window.top,insideSameOriginFrame:this.hostWindow!==window,facebookInAppBrowser:/FBAN\/FBIOS|FBAN\/FB4A/.test(navigator.userAgent)};this.delivery=c;var d=null;a=null;if(c.insideAmp)d=Object(O.a)(b),a=Object(O.b)(b);else try{var e=window.top.location;d=e.host;a=e.href}catch(h){}e={trusted:null!==d,value:null!==d?d:b.location.host};b={trusted:null!==a,value:null!==a?a:b.location.href};this.publisherHost=
e;this.publisherHref=b;this.language=null;a=navigator.languages&&navigator.languages[0]||navigator.language;'string'===typeof a&&(this.language=a.toLowerCase().slice(0,2));this.isLogMode=/YOCAdLog|yoc_log/.test(b.value);this.isDebugMode=/YOCAdDebug|yoc_debug/.test(b.value);this.isDemoMode=/YOCAdDemo|yoc_demo/.test(b.value)};H.prototype.init=function(a,b,c,d){this.context=a;this.logger=a.newLogger('Environment');this.adConfig=c;this.initConfig=b;this.bundle=d;if(a=c.troubleshooting)this.isLogMode=
!!a.log||this.isLogMode,this.isDemoMode=!!a.demo||this.isDemoMode,this.isDebugMode=!!a.debug||this.isDebugMode;'creative-video'===this.bundle&&(this.isVideo=!0);this.isDealPricingTypeUnknown=!0;this.isDealPricingTypeVCPM=this.isDealPricingTypeCPM=!1;'CPM'===this.initConfig.meta.dealPricingType?(this.isDealPricingTypeUnknown=!1,this.isDealPricingTypeCPM=!0):'vCPM'===this.initConfig.meta.dealPricingType&&(this.isDealPricingTypeUnknown=!1,this.isDealPricingTypeVCPM=!0);this.isVCPM=this.adConfig.tracking.vCPMEnabled||
this.isDealPricingTypeVCPM||'viewability'===this.adConfig.tracking.countImpressionOn||'viewability'===this.adConfig.tracking.countVPAIDImpressionOn;this.isPreloadImage=this.adConfig.preload.image;try{this.determineBrowserDetails()}catch(h){this.isError=!0,this.logger.error(h)}this.supportClipPath=!1;try{var e=this.hostDocument.createElement('div');'undefined'!==typeof e.style&&'undefined'!==typeof e.style.clipPath&&''===e.style.clipPath&&(this.supportClipPath=!0);this.supportClipPath?this.logger.log('CSS clip-path - supported'):
this.logger.log('CSS clip-path - NOT supported')}catch(h){this.isError=!0,this.logger.error(h)}if('understitial'===this.adConfig.display.effect||'understitialMini'===this.adConfig.display.effect||'understitialMiniToSticky'===this.adConfig.display.effect||'understitialSizeSmall'===this.adConfig.display.effect||'understitialSizeMedium'===this.adConfig.display.effect||'understitialSizeLarge'===this.adConfig.display.effect||'understitialSizeCustom'===this.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===
this.adConfig.display.effect||'takeoverUnderstitialMiniAndHidden'===this.adConfig.display.effect)this.isUnderstitial=!0;'scale'===this.adConfig.display.responsive.mode&&('boolean'===typeof this.adConfig.display.responsive.autoResize?this.isAutoResize=this.adConfig.display.responsive.autoResize:'boolean'!==typeof this.adConfig.display.responsive.autoResize&&(this.isAutoResize=!0));try{this.determineDeliveryContainer(),this.addContainers(),this.context.rootContainer=this.rootContainer,this.determineAvailableWidth(),
this.determineViewportDimension(),this.determineScrollPosition(),this.determineOrientation(this.hostWindow),this.calculateAdDimension()}catch(h){this.isError=!0,this.logger.error(h)}};H.prototype.determineDeliveryContainer=function(){if(this.delivery.insideSameOriginFrame){for(var a=this.ownWindow,b=null;a!==window.top;)try{for(var c=a.parent,d=a.parent.document.getElementsByTagName('iframe'),e=0;e<d.length;e++)d[e].contentWindow===a&&(b=d[e]);a=c}catch(h){break}if(this.deliveryContainer=b)b.style.setProperty('width',
'0','important'),b.style.setProperty('height','0','important'),b.style.setProperty('display','none','important');else throw Error('Error during determining the iframe for the delivery');}else if(a=this.initConfig.placement.containerId,this.deliveryContainer=b=this.hostDocument.getElementById(a),!b)throw Error('Can\'t find container "'+a+'"');};H.prototype.addContainers=function(){var a=this.deliveryContainer,b=this.hostDocument,c=this.initConfig.meta.adSessionId;if(a&&a.parentElement){var d=b.createElement('div');
d.id='yoc_environment_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;d.style.setProperty('width','100%','important');d.style.setProperty('height','0','important');a.parentElement.insertBefore(d,a);this.environmentContainer=d;b=b.createElement('div');b.id='yoc_root_container_'+c;a.parentElement.insertBefore(b,a);this.rootContainer=b}};H.prototype.determineBrowserDetails=function(){try{var a=this.hostWindow.navigator.userAgent,b='string'===typeof a&&0<a.length&&-1!==
a.toLowerCase().indexOf('windows')&&-1===a.toLowerCase().indexOf('phone'),c='string'===typeof a&&0<a.length&&-1!==a.toLowerCase().indexOf('macintosh'),d='string'===typeof a&&0<a.length&&-1!==a.toLowerCase().indexOf('linux')&&-1===a.toLowerCase().indexOf('android'),e='string'===typeof a&&0<a.length&&-1!==a.toLowerCase().indexOf('playstation'),f='string'===typeof a&&0<a.length&&-1!==a.toLowerCase().indexOf('xbox');this.isDeviceDesktop=b||c||d||e||f;this.isBrowserSafari=/^((?!chrome|android).)*safari/i.test(a)}catch(Ca){}};
H.prototype.determineAvailableWidth=function(){this.availableWidth=this.environmentContainer.offsetWidth};H.prototype.determineViewportDimension=function(){var a=this.hostWindow,b=a.innerWidth;a=a.innerHeight;var c=this.hostDocument.documentElement,d=c.clientWidth;c=c.clientHeight;if(this.isMRAID){var e=Object(f.e)();if(e){this.viewportWidth=e.width;this.viewportHeight=e.height;return}}this.viewportWidth=d?Math.min(b,d):b;this.viewportHeight=c?Math.min(a,c):a};H.prototype.determineScrollPosition=
function(){this.scrollTop=this.hostWindow.pageYOffset||this.hostWindow.scrollY||this.hostDocument.body.scrollTop;this.scrollLeft=this.hostWindow.pageXOffset||this.hostWindow.scrollX||this.hostDocument.body.scrollLeft};H.prototype.calculateAdDimension=function(){if('hidden'===this.initConfig.layout)this.usedHeight=this.usedWidth=0;else{var a=parseInt(this.viewportWidth.toString(),10),b=parseInt(this.viewportHeight.toString(),10);!this.isSticky&&0<this.adConfig.creative.marginTop&&(b-=this.adConfig.creative.marginTop);
!this.isSticky&&0<this.adConfig.creative.marginBottom&&(b-=this.adConfig.creative.marginBottom);this.usedWidth=this.initConfig.placement.width;this.usedHeight=this.initConfig.placement.height;if(0<this.adConfig.display.width||0<this.adConfig.display.height)this.usedWidth=this.adConfig.display.width,this.usedHeight=this.adConfig.display.height;if(0<this.updatedCreativeWidth||0<this.updatedCreativeHeight)this.usedWidth=this.updatedCreativeWidth,this.usedHeight=this.updatedCreativeHeight;this.usedScaleFactor=
1;if('scale'===this.adConfig.display.responsive.mode||'noScale'===this.adConfig.display.responsive.mode||this.isSticky){if(this.isSticky){var c=parseInt(this.usedHeight.toString(),10),d=parseInt(this.usedWidth.toString(),10);this.usedScaleFactor=Math.min(a/c,this.adConfig.display.stickyMaxHeightPercentage/100*b/c,(a-2*this.adConfig.display.stickyMargin)/d)}else if('scale'===this.adConfig.display.responsive.mode&&this.adConfig.display.responsive.followLayout)if(this.isPortrait){if(this.usedScaleFactor=
parseInt(this.availableWidth.toString(10),10)/parseInt(this.usedWidth.toString(10),10),Math.floor(this.usedWidth*this.usedScaleFactor)>this.availableWidth||Math.floor(this.usedHeight*this.usedScaleFactor)>b)this.usedScaleFactor=parseInt(b.toString(10),10)/parseInt(this.usedHeight.toString(10),10)}else{if(this.usedScaleFactor=parseInt(b.toString(10),10)/parseInt(this.usedHeight.toString(10),10),Math.floor(this.usedWidth*this.usedScaleFactor)>this.availableWidth||Math.floor(this.usedHeight*this.usedScaleFactor)>
b)this.usedScaleFactor=parseInt(this.availableWidth.toString(10),10)/parseInt(this.usedWidth.toString(10),10)}else if(this.isPortrait){if(this.usedScaleFactor=parseInt(this.viewportWidth.toString(10),10)/parseInt(this.usedWidth.toString(10),10),Math.floor(this.usedWidth*this.usedScaleFactor)>this.viewportWidth||Math.floor(this.usedHeight*this.usedScaleFactor)>b)this.usedScaleFactor=parseInt(b.toString(10),10)/parseInt(this.usedHeight.toString(10),10)}else if(this.usedScaleFactor=parseInt(b.toString(10),
10)/parseInt(this.usedHeight.toString(10),10),Math.floor(this.usedWidth*this.usedScaleFactor)>this.viewportWidth||Math.floor(this.usedHeight*this.usedScaleFactor)>b)this.usedScaleFactor=parseInt(this.viewportWidth.toString(10),10)/parseInt(this.usedWidth.toString(10),10);this.scaledWidth=Math.floor(this.usedWidth*this.usedScaleFactor);this.scaledHeight=Math.floor(this.usedHeight*this.usedScaleFactor);a=this.adConfig.display.responsive;'scale'===a.mode&&0<a.maximumWidth&&0<a.maximumHeight&&(this.scaledWidth>
a.maximumWidth&&(b=a.maximumWidth/this.scaledWidth,this.scaledWidth=a.maximumWidth,this.scaledHeight*=b,this.usedScaleFactor*=b),this.scaledHeight>a.maximumHeight&&(b=a.maximumHeight/this.scaledHeight,this.scaledHeight=a.maximumHeight,this.scaledWidth*=b,this.usedScaleFactor*=b));'noScale'===this.adConfig.display.responsive.mode&&(this.usedWidth=this.scaledWidth,this.usedHeight=this.scaledHeight,this.usedScaleFactor=1)}else this.scaledWidth=this.usedWidth,this.scaledHeight=this.usedHeight}this.logger.debug('calculateAdDimensions',
{used:this.usedWidth+'x'+this.usedHeight,scaled:this.scaledWidth+'x'+this.scaledHeight,updatedCreative:this.updatedCreativeWidth+'x'+this.updatedCreativeHeight})};H.prototype.onOrientationChange=function(a){this.determineOrientation(this.hostWindow);this.determineAvailableWidth();this.determineViewportDimension();this.determineScrollPosition();this.calculateAdDimension()};H.prototype.onResize=function(a){this.determineOrientation(this.hostWindow);this.determineAvailableWidth();this.determineViewportDimension();
this.determineScrollPosition();this.calculateAdDimension()};H.prototype.onSticky=function(a){this.isSticky=!0;a&&(this.creativeOption=a);this.determineAvailableWidth();this.determineViewportDimension();this.determineScrollPosition();this.calculateAdDimension()};H.prototype.determineOrientation=function(a){var b=a.screen,c;try{if(this.isMRAID){var d=Object(f.d)();d&&(c=d.height>=d.width?0:90)}'number'!==typeof c&&('undefined'!==typeof a.orientation?c=a.orientation:'undefined'!==typeof b&&'undefined'!==
typeof b.orientation&&'undefined'!==typeof b.orientation.type&&'portrait-primary'===b.orientation.type?c=0:'undefined'!==typeof b&&'undefined'!==typeof b.orientation&&'undefined'!==typeof b.orientation.type&&'portrait-secondary'===b.orientation.type?c=180:'undefined'!==typeof b&&'undefined'!==typeof b.orientation&&'undefined'!==typeof b.orientation.type&&'landscape-primary'===b.orientation.type?c=90:'undefined'!==typeof b&&'undefined'!==typeof b.orientation&&'undefined'!==typeof b.orientation.type&&
'landscape-secondary'===b.orientation.type?c=270:'undefined'!==typeof b&&'undefined'!==typeof b.orientation&&'undefined'!==typeof b.orientation.angle&&(c=b.orientation.angle),null===c&&this.viewportWidth<this.viewportHeight&&(c=0),null===c&&this.viewportWidth>this.viewportHeight&&(c=90),null===c&&(c=0),this.isDeviceDesktop&&this.viewportWidth<this.viewportHeight&&(c=0),this.isDeviceDesktop&&this.viewportWidth>this.viewportHeight&&(c=90),c=c?Number(c):void 0)}catch(Ba){c=0}this.isPortrait='undefined'===
typeof c||null===c||-1===c||0===c||180===c||-180===c?!0:!1;this.isLandscape=-90===c||90===c||270===c||-270===c?!0:!1;this.deviceOrientation='portrait';this.isLandscape&&(this.deviceOrientation='landscape');this.deviceOrientationOriginal=this.deviceOrientation;this.isSticky&&'sticky'===this.creativeOption||(this.creativeOption=this.deviceOrientation);if(this.initConfig.meta.visx&&!this.isPortrait&&(!this.adConfig.troubleshooting||this.adConfig.troubleshooting&&this.adConfig.troubleshooting.useForcePortraitMode||
this.adConfig.troubleshooting&&!1!==this.adConfig.troubleshooting.useForcePortraitMode)||!this.isPortrait&&'undefined'!==typeof this.adConfig.creative.landscape&&'disabled'===this.adConfig.creative.landscape.mode)this.logger.log('Force portrait mode'),this.isPortrait=!0,this.isLandscape=!1,this.deviceOrientation='portrait',this.isSticky&&'sticky'===this.creativeOption||(this.creativeOption=this.deviceOrientation);return!0};var da=function(a){this.pageVisibilityEventListenerName=this.pageVisibilityObjectName=
'';this.eventListeners=[];this.Environment=a;'undefined'!==typeof a.hostDocument.hidden?(this.pageVisibilityObjectName='hidden',this.pageVisibilityEventListenerName='visibilitychange'):'undefined'!==typeof a.hostDocument.msHidden?(this.pageVisibilityObjectName='msHidden',this.pageVisibilityEventListenerName='msvisibilitychange'):'undefined'!==typeof a.hostDocument.webkitHidden&&(this.pageVisibilityObjectName='webkitHidden',this.pageVisibilityEventListenerName='webkitvisibilitychange')};da.prototype.add=
function(a,b,c,d){c=void 0===c?100:c;d=void 0===d?!0:d;this.Environment.hostWindow.addEventListener(a,0<c?v(b,c):b,{passive:d});this.eventListeners.push({type:a,listener:b})};da.prototype.remove=function(a,b){var c=this;a&&b?this.Environment.hostWindow.removeEventListener(a,b):this.eventListeners.forEach(function(a){c.Environment.hostWindow.removeEventListener(a.type,a.listener)})};var P=function(a){this.productTitlePostfix=a;this.messageBus={tracking:new I.a,logger:new I.a,event:new I.a,asset:new I.a,
clickOverlay:new I.a};this.Environment=a=new H;this.Listener=new da(a);this.trackingMiner={portrait:{visibleCreative:!1,hiddenCreative:!1},landscape:{visibleCreative:!1,hiddenCreative:!1},sticky:{visibleCreative:!1,hiddenCreative:!1},hidden:{visibleCreative:!1,hiddenCreative:!1}}};P.prototype.newLogger=function(a){return D(this.messageBus)(a)};P.prototype.setupClickHandler=function(a,b){a.addEventListener('click',b,!1)};var L=b(8),T=function(a,b,c,d){var e=this;this.elements=[];this.onEvent=function(a){switch(a.kind){case 'add-element':e.add(a);
break;case 'remove-element':e.remove(a.element);break;case 'refresh':e.refresh()}};this.context=a;this.initConfig=b;this.adConfig=c;this.logger=a.newLogger('ClickOverlay');this.productContainer=d;this.context.messageBus.clickOverlay.on(this.onEvent)};T.prototype.add=function(a){this.logger.debug('add');this.elements.push(a);this.refresh()};T.prototype.remove=function(a){this.logger.debug('remove');this.elements=this.elements.filter(function(b){(b=b.element!==a)||a.remove();return b});this.refresh()};
T.prototype.getElements=function(a){return this.elements.filter(function(b){return b.preferredPosition===a}).sort(function(a,b){return(b.priority||0)-(a.priority||0)})};T.prototype.refresh=function(){var a=this,b=this.context.Environment,c=1;400>b.scaledWidth&&(c=b.scaledWidth/400);var d=0;b.isSticky||(d='scale'!==this.adConfig.display.responsive.mode||this.adConfig.display.responsive.followLayout?'scale'===this.adConfig.display.responsive.mode&&this.adConfig.display.responsive.followLayout?(b.availableWidth-
b.scaledWidth)/2:(b.availableWidth-b.usedWidth)/2:(b.viewportWidth-b.scaledWidth)/2);this.leftTops.forEach(function(e){var f=e.element.style;f.position='absolute';f.left=(e.margin?Object(L.a)(e.margin.left)?0:e.margin.left*b.usedScaleFactor+20*c:20*c)+d+'px';f.top=(e.margin?Object(L.a)(e.margin.top)?0:e.margin.top*b.usedScaleFactor+20*c:20*c)+'px';f.zIndex='2';f.transformOrigin='left top';f.transform='scale('+c+')';('undefined'!==typeof e.parent?e.parent:a.productContainer).append(e.element)});this.leftBottoms.forEach(function(e){var f=
e.element.style;f.position='absolute';f.left=(e.margin?Object(L.a)(e.margin.left)?0:e.margin.left*b.usedScaleFactor+20*c:20*c)+d+'px';f.bottom=(e.margin?Object(L.a)(e.margin.bottom)?0:e.margin.bottom*b.usedScaleFactor+20*c:20*c)+'px';f.zIndex='2';f.transformOrigin='left bottom';f.transform='scale('+c+')';('undefined'!==typeof e.parent?e.parent:a.productContainer).append(e.element)});this.rightTops.forEach(function(e){var f=e.element.style;f.position='absolute';f.right=(e.margin?Object(L.a)(e.margin.right)?
0:e.margin.right*b.usedScaleFactor+20*c:20*c)+d+'px';f.top=(e.margin?Object(L.a)(e.margin.top)?0:e.margin.top*b.usedScaleFactor+20*c:20*c)+'px';f.zIndex='2';f.transformOrigin='right top';f.transform='scale('+c+')';('undefined'!==typeof e.parent?e.parent:a.productContainer).append(e.element)});this.rightBottoms.forEach(function(e){var f=e.element.style;f.position='absolute';f.right=(e.margin?Object(L.a)(e.margin.right)?0:e.margin.right*b.usedScaleFactor+20*c:20*c)+d+'px';f.bottom=(e.margin?Object(L.a)(e.margin.bottom)?
0:e.margin.bottom*b.usedScaleFactor+20*c:20*c)+'px';f.zIndex='2';f.transformOrigin='right bottom';f.transform='scale('+c+')';('undefined'!==typeof e.parent?e.parent:a.productContainer).append(e.element)})};$jscomp.global.Object.defineProperties(T.prototype,{leftTops:{configurable:!0,enumerable:!0,get:function(){return this.getElements('top-left')}},leftBottoms:{configurable:!0,enumerable:!0,get:function(){return this.getElements('bottom-left')}},rightTops:{configurable:!0,enumerable:!0,get:function(){return this.getElements('top-right')}},
rightBottoms:{configurable:!0,enumerable:!0,get:function(){return this.getElements('bottom-right')}}});var W=b(10),X=b(15),S=function(a,b,c){this.context=a;this.logger=this.context.newLogger('Troubleshooting');this.initConfig=b;this.adConfig=c;a=a.Environment;Object(X.a)(a.hostWindow);this.space=a.hostWindow.__YOC.session[this.initConfig.meta.adSessionId].troubleshootingLog=[];this.logList=a.hostWindow.__YOC.session[this.initConfig.meta.adSessionId].troubleshootingLog.ll=[]};S.prototype.check=function(a,
b,c){this.space[a]||(this.space[a]=[]);this.space[a][b]||(this.space[a][b]=[]);'undefined'===typeof this.space[a][b][c]&&(this.space[a][b][c]=[])};S.prototype.add=function(a,b,c,d){this.check(a,b,c);this.space[a][b][c].push({i:!1,v:d})};S.prototype.addVideoTracking=function(a,b){this.add('v','vt',a,b)};S.prototype.invalidate=function(a,b,c,d){var e=this;this.check(a,b,c);Object.keys(this.space[a][b][c]).forEach(function(f){e.space[a][b][c][f].v===d&&(e.space[a][b][c][f].i=!0,e.log())})};S.prototype.invalidateVideoTracking=
function(a,b){this.invalidate('v','vt',a,b)};S.prototype.log=function(a){var b=this;a=void 0===a?!1:a;var c=this.context.Environment;this.logList=c.hostWindow.__YOC.session[this.initConfig.meta.adSessionId].troubleshootingLog=[];c.hostWindow.__YOC.session[this.initConfig.meta.adSessionId].troubleshootingLog.lls='';Object.keys(this.space).forEach(function(a){'ll'!==a&&'lls'!==a&&Object.keys(b.space[a]).forEach(function(d){Object.keys(b.space[a][d]).forEach(function(e){var f=0;Object.keys(b.space[a][d][e]).forEach(function(c){if('v'!==
a||'vt'!==d||'string'!==typeof b.space[a][d][e][c].v||0!==b.space[a][d][e][c].v.length)b.logList[a+'.'+d+'.'+e+'.'+c]=b.space[a][d][e][c],!0===b.space[a][d][e][c].i&&f++});0<f&&(c.hostWindow.__YOC.session[b.initConfig.meta.adSessionId].troubleshootingLog.lls+=(0<c.hostWindow.__YOC.session[b.initConfig.meta.adSessionId].troubleshootingLog.lls.length?', ':'')+a+'.'+d+'.'+e+':'+f)})})});a&&console.table(this.logList)};var la=b(13),G=function(a){var b=this,c=a.bundle,d=a.initConfig,e=a.adConfigDefault,
g=a.adConfigSpecific,k=a.adAssetList;a=a.mraidInfo;this.adPainter=this.adConfig=this.initConfig=this.logger=this.context=null;this.adAssetList=[];this.isImage=!1;this.adNodeHidden=this.adNode=this.assets=this.rootContainer=this.containerId=null;this.trackerSync=[];this.trackerImpression=[];this.trackerViewability=[];this.trackerClick=[];this.visibilityHandlerList=[];this.visibilityHandlerDependsOnImpressionList=[];this.visibilityHandlerViewabilityGroupList=[];this.isVPAID=!1;this.trackerRedirect=
[];this.clickOverlay=null;this.trackerRedirectHasBeenSetUp=!1;this.adConfigSpecific='';this.snapInWasUsed=!1;this.snapInEventListenerOnTouchStart=function(a){};this.snapInEventListenerOnTouchMove=function(a){};this.snapInEventListenerOnTouchEnd=function(a){};this.snapInEventListenerOnScroll=function(a){};this.takeoverTarget=null;this.takeoverIsShown=!1;this.demoContainer=null;this.wasClicked=!1;this.onLog=function(a){if(!1!==b.context.Environment.isLogMode||'debug'!==a.kind&&'log'!==a.kind)b.onLogger(a)};
this.onEvent=function(a){var c=b.context.newLogger('Ad.onEvent()');switch(a.kind){case 'assetLoading':b.assets.onEventAssetLoading(a);break;case 'assetLoaded':b.assets.onEventAssetLoaded(a);break;case 'assetFailed':b.assets.onEventAssetFailed(a);break;case 'assetAllLoaded':b.assets.onEventAssetAllLoaded(a);b.run();break;case 'tracker':var d=!1;'undefined'!==typeof a.details&&'boolean'===typeof a.details.wasRedirected&&a.details.wasRedirected||b.trackerRedirect.forEach(function(b){b.event===a.event&&
(d=!0,c.log('SKIP processing event "'+a.event+'" because of enabled event redirect',{event:b.event,trackOn:b.trackOn}))});if(!d)switch(a.event){case 'viewability':n({kind:'viewability-triggered'});b.context.messageBus.tracking.emit({kind:'send',event:a.event,meta:a.meta,details:a.details});break;default:b.context.messageBus.tracking.emit({kind:'send',event:a.event,meta:a.meta,details:a.details})}b.trackerRedirect.forEach(function(d){d.trackOn===a.event&&(c.log('Process additional event "'+d.event+
'" on event "'+a.event+'" because of enabled event redirect',{event:d.event,trackOn:d.trackOn}),b.context.messageBus.event.emit({kind:'tracker',event:d.event,details:{wasRedirected:!0}}))});break;case 'close':b.visibilityHandlerList.forEach(function(a){a.disable()});b.visibilityHandlerDependsOnImpressionList.forEach(function(a){a.disable()});b.adPainter.close();b.context.Environment.isMRAID&&Object(f.j)();b.dispose();break;case 'revert-cursor':b.adPainter.revertCursorToDefault();break;case 'show-advertisment-message':b.adPainter.showAdvertisementMessage();
b.adPainter.updateAdPosition(b.adVisibilityDetails);break;case 'setup-tracker-redirect':b.setupTrackerRedirection(a.type);break;case 'shown':b.context.messageBus.event.emit({kind:'tracker',event:'shown'});break;case 'assets-ready-check':b.assets.readyCheck()}};this.processSnapIn=function(a){a=void 0===a?b.adVisibilityDetails:a;var c=b.context.Environment;b.adVisibilityDetails=a;'enabled'===b.adConfig.snapIn.mode&&0<b.adConfig.snapIn.threshold&&100*b.adVisibilityDetails.visibilityPercentage>b.adConfig.snapIn.threshold&&
!b.snapInWasUsed&&(b.snapInWasUsed=!0,b.logger.log('Snap in - visible for '+100*b.adVisibilityDetails.visibilityPercentage+'% (Position: '+b.adVisibilityDetails.top+'x'+b.adVisibilityDetails.left+' - Dimension: '+b.adVisibilityDetails.width+'x'+b.adVisibilityDetails.height+')'),c.determineScrollPosition(),c.hostWindow.scrollTo({top:c.scrollTop+(b.adVisibilityDetails.height-b.adVisibilityDetails.visibilityPercentage*b.adVisibilityDetails.height),left:c.scrollLeft,behavior:'smooth'}),0<b.adConfig.snapIn.lockTime&&
b.processSnapInLock())};this.processSnapInLock=function(){'enabled'===b.adConfig.snapIn.mode&&(b.logger.log('Snap in - LOCK'),b.snapInEventListenerOnTouchStart=function(a){a.preventDefault()},b.adPainter.rootContainer.addEventListener('touchstart',b.snapInEventListenerOnTouchStart),b.snapInEventListenerOnTouchMove=function(a){a.preventDefault()},b.adPainter.rootContainer.addEventListener('touchmove',b.snapInEventListenerOnTouchMove),b.snapInEventListenerOnTouchEnd=function(a){a.preventDefault()},
b.adPainter.rootContainer.addEventListener('touchend',b.snapInEventListenerOnTouchEnd),b.context.Environment.hostWindow.setTimeout(function(){b.processSnapInUnlock()},b.adConfig.snapIn.lockTime))};this.processSnapInUnlock=function(){'enabled'===b.adConfig.snapIn.mode&&(b.logger.log('Snap in - UNLOCK'),b.adPainter.rootContainer.removeEventListener('touchstart',b.snapInEventListenerOnTouchStart),b.adPainter.rootContainer.removeEventListener('touchmove',b.snapInEventListenerOnTouchMove),b.adPainter.rootContainer.removeEventListener('touchend',
b.snapInEventListenerOnTouchEnd))};var J=new P(d.product.title.replace(/ /g,'')),l=J.Environment;this.context=J;a&&(l.isMRAID=!0,l.MRAIDPlacement=a.placement,l.MRAIDVersion=a.version,this.context.messageBus.event.emit({kind:'tracker',event:'mraid-version',details:{version:a.version}}));this.logger=this.context.newLogger('AdCore');this.bundle=c;this.initConfig=d;this.adConfig=e;this.adConfigSpecific=g;this.adAssetList=k;this.adVisibilityDetails={visibilityPercentage:0,left:0,top:0,right:0,bottom:0,
width:0,height:0,visibilityX:0,visibilityY:0}};G.prototype.init=function(){var b=this;this.context.messageBus.logger.on(this.onLog);var d=this.context,e=d.Environment;d=d.Listener;this.adConfig=this.mergeAdConfig(this.adConfig,this.adConfigSpecific,this.initConfig.options.adUnit,this.initConfig.options.deal);e.init(this.context,this.initConfig,this.adConfig,this.bundle);if(e.isLogMode||e.isDebugMode)this.context.troubleshooting=new S(this.context,this.initConfig,this.adConfig);e.isDebugMode&&new k(this.context);
this.rootContainer=e.rootContainer;this.containerId=this.rootContainer.id;this.context.messageBus.event.on(this.onEvent);this.context.messageBus.event.emit({kind:'setup-tracker-redirect',type:'normal'});this.context.metrics=new E(this.context,this.rootContainer,this.initConfig.meta,this.initConfig.product);this.adConfig.metrics.provider.forEach(function(a){b.context.metrics.registerProvider(a.title,a.type,a.configuration)});this.initConfig.tracking.sync&&(this.trackerSync.push.apply(this.trackerSync,
$jscomp.arrayFromIterable(this.initConfig.tracking.sync.map(function(a){return c('served',a)}))),this.trackerSync.forEach(function(a){b.context.messageBus.tracking.emit({kind:'register',event:'served',tracker:a})}));try{q.g(e,'@charset "UTF-8";\n\n/*!\n * animate.css -https://daneden.github.io/animate.css/\n * Version - 3.7.2\n * Licensed under the MIT license - http://opensource.org/licenses/MIT\n *\n * Copyright (c) 2019 Daniel Eden\n */\n\n@-webkit-keyframes slideInDownAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, -100%, 0);\n        transform: translate3d(0, -100%, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n@keyframes slideInDownAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, -100%, 0);\n        transform: translate3d(0, -100%, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n.slideInDownAD_SESSION_ID {\n    -webkit-animation-name: slideInDownAD_SESSION_ID;\n    animation-name: slideInDownAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideInLeftAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(-100%, 0, 0);\n        transform: translate3d(-100%, 0, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n@keyframes slideInLeftAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(-100%, 0, 0);\n        transform: translate3d(-100%, 0, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n.slideInLeftAD_SESSION_ID {\n    -webkit-animation-name: slideInLeftAD_SESSION_ID;\n    animation-name: slideInLeftAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideInRightAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(100%, 0, 0);\n        transform: translate3d(100%, 0, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n@keyframes slideInRightAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(100%, 0, 0);\n        transform: translate3d(100%, 0, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n.slideInRightAD_SESSION_ID {\n    -webkit-animation-name: slideInRightAD_SESSION_ID;\n    animation-name: slideInRightAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideInUpAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 100%, 0);\n        transform: translate3d(0, 100%, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n@keyframes slideInUpAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 100%, 0);\n        transform: translate3d(0, 100%, 0);\n        visibility: visible;\n    }\n\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n}\n\n.slideInUpAD_SESSION_ID {\n    -webkit-animation-name: slideInUpAD_SESSION_ID;\n    animation-name: slideInUpAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideOutDownAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(0, 100%, 0);\n        transform: translate3d(0, 100%, 0);\n    }\n}\n\n@keyframes slideOutDownAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(0, 100%, 0);\n        transform: translate3d(0, 100%, 0);\n    }\n}\n\n.slideOutDownAD_SESSION_ID {\n    -webkit-animation-name: slideOutDownAD_SESSION_ID;\n    animation-name: slideOutDownAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideOutLeftAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(-100%, 0, 0);\n        transform: translate3d(-100%, 0, 0);\n    }\n}\n\n@keyframes slideOutLeftAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(-100%, 0, 0);\n        transform: translate3d(-100%, 0, 0);\n    }\n}\n\n.slideOutLeftAD_SESSION_ID {\n    -webkit-animation-name: slideOutLeftAD_SESSION_ID;\n    animation-name: slideOutLeftAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideOutRightAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(100%, 0, 0);\n        transform: translate3d(100%, 0, 0);\n    }\n}\n\n@keyframes slideOutRightAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(100%, 0, 0);\n        transform: translate3d(100%, 0, 0);\n    }\n}\n\n.slideOutRightAD_SESSION_ID {\n    -webkit-animation-name: slideOutRightAD_SESSION_ID;\n    animation-name: slideOutRightAD_SESSION_ID;\n}\n\n@-webkit-keyframes slideOutUpAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(0, -100%, 0);\n        transform: translate3d(0, -100%, 0);\n    }\n}\n\n@keyframes slideOutUpAD_SESSION_ID {\n    from {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0);\n    }\n\n    to {\n        visibility: hidden;\n        -webkit-transform: translate3d(0, -100%, 0);\n        transform: translate3d(0, -100%, 0);\n    }\n}\n\n.slideOutUpAD_SESSION_ID {\n    -webkit-animation-name: slideOutUpAD_SESSION_ID;\n    animation-name: slideOutUpAD_SESSION_ID;\n}\n\n.animatedAD_SESSION_ID {\n    -webkit-animation-duration: 1s;\n    animation-duration: 1s;\n    -webkit-animation-fill-mode: both;\n    animation-fill-mode: both;\n}\n\n.animatedAD_SESSION_ID.infinite {\n    -webkit-animation-iteration-count: infinite;\n    animation-iteration-count: infinite;\n}\n\n.animatedAD_SESSION_ID.delay-1s {\n    -webkit-animation-delay: 1s;\n    animation-delay: 1s;\n}\n\n.animatedAD_SESSION_ID.delay-2s {\n    -webkit-animation-delay: 2s;\n    animation-delay: 2s;\n}\n\n.animatedAD_SESSION_ID.delay-3s {\n    -webkit-animation-delay: 3s;\n    animation-delay: 3s;\n}\n\n.animatedAD_SESSION_ID.delay-4s {\n    -webkit-animation-delay: 4s;\n    animation-delay: 4s;\n}\n\n.animatedAD_SESSION_ID.delay-5s {\n    -webkit-animation-delay: 5s;\n    animation-delay: 5s;\n}\n\n.animatedAD_SESSION_ID.fast {\n    -webkit-animation-duration: 800ms;\n    animation-duration: 800ms;\n}\n\n.animatedAD_SESSION_ID.faster {\n    -webkit-animation-duration: 500ms;\n    animation-duration: 500ms;\n}\n\n.animatedAD_SESSION_ID.slow {\n    -webkit-animation-duration: 2s;\n    animation-duration: 2s;\n}\n\n.animatedAD_SESSION_ID.slower {\n    -webkit-animation-duration: 3s;\n    animation-duration: 3s;\n}\n\n@media (print), (prefers-reduced-motion: reduce) {\n    .animatedAD_SESSION_ID {\n        -webkit-animation-duration: 1ms !important;\n        animation-duration: 1ms !important;\n        -webkit-transition-duration: 1ms !important;\n        transition-duration: 1ms !important;\n        -webkit-animation-iteration-count: 1 !important;\n        animation-iteration-count: 1 !important;\n    }\n}\n'.replace(/AD_SESSION_ID/g,
''+this.initConfig.meta.adSessionId))}catch(ea){this.logger.error("Can't inject general ad styles")}try{var f=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',event:'served',details:{msSinceStart:f}})}catch(ea){}try{e.isError&&this.context.messageBus.event.emit({kind:'tracker',event:'error'}),e.delivery.facebookInAppBrowser&&this.context.messageBus.event.emit({kind:'tracker',event:'facebook'})}catch(ea){}e.delivery.insideAmp&&('none'!==this.adConfig.display.effect&&
(this.logger.log("AMP detected - reset display effect from '"+this.adConfig.display.effect+"' to 'none'"),this.adConfig.display.effect='none',this.context.messageBus.event.emit({kind:'tracker',event:'error-display-effect'})),'disabled'!==this.adConfig.closeButton.mode&&(this.logger.log("AMP detected - reset close button option from '"+this.adConfig.closeButton.mode+"' to 'disabled'"),this.adConfig.closeButton.mode='disabled',this.context.messageBus.event.emit({kind:'tracker',event:'error-close-button'})));
this.initConfig.meta.om&&this.adConfig.display.hide&&(this.logger.log('Hide was enabled and open market demand is used - hide is now disabled'),this.adConfig.display.hide=!1);this.adPainter=new B(this.context,this.rootContainer,this.initConfig,this.adConfig,this.adVisibilityDetails);var g=this.adPainter.productContainer;this.adAssetList.forEach(function(a){a.init(b,b.context,b.adPainter,b.initConfig,b.adConfig,b.adAssetList);a.isImage&&(b.isImage=!0)});this.logger.log('Welcome to '+this.initConfig.product.title+
' v'+this.initConfig.product.release,{InitConfig:JSON.stringify(this.initConfig,null,2),AdConfig:JSON.stringify(this.adConfig,null,2)});this.logger.log('Delivery type',e.delivery);this.logger.log('Viewport dimension',{width:e.viewportWidth,height:e.viewportHeight});this.logger.log('Use creative dimension: '+e.usedWidth+'px x '+e.usedHeight+'px (scaled to: '+e.scaledWidth+'px x '+e.scaledHeight+'px)');this.logger.log('Scroll position at start - top:'+e.scrollTop+' left:'+e.scrollLeft);this.assets=
new p(this.context);this.clickOverlay=new T(this.context,this.initConfig,this.adConfig,g);this.adNode=e.hostDocument.createDocumentFragment();this.adNodeHidden=e.hostDocument.createDocumentFragment();this.visibilityHandlerList=this.constructVisibilityHandler(this.visibilityHandlerList);this.adAssetList.forEach(function(a){var c=a.constructAdNodes(b.adNode,b.adNodeHidden),d=c.adNodeHidden;b.adNode=c.adNode;b.adNodeHidden=d;b.visibilityHandlerList=a.constructVisibilityHandler(b.visibilityHandlerList)});
this.trackerImpression.push(c('impression',this.initConfig.tracking.impression));this.trackerImpression.forEach(function(a){b.context.messageBus.tracking.emit({kind:'register',event:'impression',tracker:a})});this.trackerViewability.push(c('viewability',this.initConfig.tracking.viewability));this.trackerViewability.forEach(function(a){b.context.messageBus.tracking.emit({kind:'register',event:'viewability',tracker:a})});this.trackerClick.push(c('click',this.initConfig.tracking.click));this.trackerClick.forEach(function(a){b.context.messageBus.tracking.emit({kind:'register',
event:'click',tracker:a})});if('understitialMini'===this.adConfig.display.effect||'understitialMiniToSticky'===this.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===this.adConfig.display.effect||'takeoverUnderstitialMiniAndHidden'===this.adConfig.display.effect)f=new a.c('Mini effect tracking (AdCore)',this.context,g,0,0,'scroll',[],!1,function(){},function(){},!1,function(){},function(){},function(a,c){b.adVisibilityDetails=a;b.updateStyles({updateAdPosition:!0,reset:!1});b.adPainter.updateAdPosition(b.adVisibilityDetails)}),
f.init(),this.visibilityHandlerList.push(f);'enabled'===this.adConfig.snapIn.mode&&0<this.adConfig.snapIn.threshold&&(f=new a.c('Snap in tracking (AdCore)',this.context,g,0,0,'scroll',[],!1,function(){},function(){},!1,function(){},function(){},function(a,c){b.adVisibilityDetails=a;b.processSnapIn(b.adVisibilityDetails)}),f.init(),this.visibilityHandlerList.push(f));if('yoc-inline-video-ad'===this.initConfig.product.key||'yoc-understitial-ad'===this.initConfig.product.key){e.isDemoMode&&(this.demoContainer=
e.hostDocument.createElement('div'),this.demoContainer.id='yoc_demo_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId,this.demoContainer.style.cssText='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 2147483647; background-color: rgba(127, 0, 0, 0.3);',this.demoContainer.style.backgroundColor='rgba(255, 255, 0, 0.3)',g.append(this.demoContainer));g.setAttribute(a.a.AD_SESSION_ID,this.initConfig.meta.adSessionId);g.setAttribute(a.a.CONTAINER_TYPE,
'ad');g.setAttribute(a.a.VIEWABILITY,a.b.ENABLED);g.setAttribute(a.a.VIEWABILITY_STATUS,a.b.WAITING);g.setAttribute(a.a.VIEWABILITY_GOAL,'viewability '+this.adConfig.tracking.viewabilityPercent+'/'+this.adConfig.tracking.viewabilityTime/1E3);var h=null;h=new a.c('Viewability Tracking (AdCore)',this.context,g,this.adConfig.tracking.viewabilityPercent,this.adConfig.tracking.viewabilityTime,this.adConfig.tracking.visibilityHandlerType,this.visibilityHandlerViewabilityGroupList,!0,function(){try{var c=
Date.now()-b.initConfig.timestamp;b.context.messageBus.event.emit({kind:'tracker',event:'viewability',details:{msSinceStart:c}});e.isVCPM&&(e.isPortrait?(b.context.trackingMiner.portrait.visibleCreative&&b.context.trackingMiner.portrait.visibleCreative.release(),b.context.trackingMiner.portrait.hiddenCreative&&b.context.trackingMiner.portrait.hiddenCreative.release()):(b.context.trackingMiner.landscape.visibleCreative&&b.context.trackingMiner.landscape.visibleCreative.release(),b.context.trackingMiner.landscape.hiddenCreative&&
b.context.trackingMiner.landscape.hiddenCreative.release()));g.setAttribute(a.a.VIEWABILITY_STATUS,a.b.FINISHED);g.setAttribute(a.a.VIEWABILITY_SUCCESS,'viewability '+b.adConfig.tracking.viewabilityPercent+'/'+b.adConfig.tracking.viewabilityTime/1E3);g.setAttribute(a.a.VIEWABILITY_TIME,''+h.visibilityHandler.viewedTime);e.isDemoMode&&b.demoContainer&&(b.demoContainer.style.backgroundColor='rgba(0, 255, 0, 0.3)')}catch(ma){}},function(){},!1,function(){h.visibilityHandler.disabled||(g.setAttribute(a.a.VIEWABILITY_STATUS,
a.b.STARTED),g.setAttribute(a.a.VIEWABILITY_TIME,h.visibilityHandler.viewedTime+' +'),e.isDemoMode&&b.demoContainer&&(b.demoContainer.style.backgroundColor='rgba(255, 165, 0, 0.3)'))},function(){h.visibilityHandler.disabled||(g.setAttribute(a.a.VIEWABILITY_STATUS,a.b.PAUSED),g.setAttribute(a.a.VIEWABILITY_TIME,''+h.visibilityHandler.viewedTime),e.isDemoMode&&b.demoContainer&&(b.demoContainer.style.backgroundColor='rgba(255, 255, 0, 0.3)'))});h.init();this.visibilityHandlerDependsOnImpressionList.push(h);
this.adConfig.tracking.viewabilityTrackingOverAll&&this.visibilityHandlerViewabilityGroupList.push(h);e.isVideo||this.isImage||!this.adConfig.tracking.enableClickTrackingWorkaround?this.isImage&&this.adConfig.tracking.enableClickTrackingWorkaround&&(this.logger.log('SKIP setup of click tracking on product container (AdCore) because (isVideo:'+(e.isVideo?'YES':'NO')+' / isImage:'+(this.isImage?'YES':'NO')+')'),g.setAttribute(a.a.CLICK,a.b.SKIPPED),g.setAttribute(a.a.CLICK_STATUS,a.b.SKIPPED)):(this.logger.log('Setup click tracking on product container (AdCore)'),
g.setAttribute(a.a.CLICK,a.b.ENABLED),g.setAttribute(a.a.CLICK_STATUS,a.b.WAITING),g.setAttribute(a.a.CLICK_GOAL,'click'),g.onclick=function(c){b.wasClicked?(b.logger.log('SKIP repeated CLICK on product container (AdCore)'),g.setAttribute(a.a.CLICK_SUCCESS,'click-repeated'),e.isDemoMode&&b.demoContainer&&(b.demoContainer.style.backgroundColor='rgba(128, 128, 128, 0.3)'),b.context.messageBus.event.emit({kind:'tracker',event:'click-repeated',details:{source:'adcore'}})):(b.logger.log('Handle CLICK on product container (AdCore)'),
b.wasClicked=!0,g.setAttribute(a.a.CLICK_STATUS,a.b.FINISHED),g.setAttribute(a.a.CLICK_SUCCESS,'click'),e.isDemoMode&&b.demoContainer&&(b.demoContainer.style.backgroundColor='rgba(0, 0, 0, 0.3)'),b.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'adcore'}}))})}else g.setAttribute(a.a.VIEWABILITY,a.b.SKIPPED),g.setAttribute(a.a.VIEWABILITY_STATUS,a.b.SKIPPED),g.setAttribute(a.a.CLICK,a.b.SKIPPED),g.setAttribute(a.a.CLICK_STATUS,a.b.SKIPPED);if('inlineToSticky'===this.adConfig.display.effect||
'understitialMiniToSticky'===this.adConfig.display.effect||'takeoverUnderstitialMiniAndSticky'===this.adConfig.display.effect)f=new a.c('InlineToStickyVisibilityHandler',this.context,g,this.adConfig.display.toStickyThreshold,0,this.adConfig.tracking.visibilityHandlerType,[],!0,function(){},function(){b.logger.log('InlineToStickyVisibilityHandler - Convert ad from inline to sticky');b.adPainter.hideAdvertisementMessage();if('disabled'!==b.adConfig.creative.sticky.mode)e.onSticky('sticky');else e.onSticky();
b.adAssetList.forEach(function(a){a.onSticky()});b.updateStyles({updateAdPosition:!0,reset:!1});b.context.messageBus.event.emit({kind:'sticky'});try{var a=Date.now()-b.initConfig.timestamp;b.context.messageBus.event.emit({kind:'tracker',event:'inline-to-sticky',details:{msSinceStart:a}});n({kind:'inline-to-sticky-triggered'})}catch(ma){}},!1),f.init(),this.visibilityHandlerList.push(f);'takeoverInlineAndHidden'!==this.adConfig.display.effect&&'takeoverUnderstitialMiniAndHidden'!==this.adConfig.display.effect||
'disabled'===this.adConfig.creative.hidden.mode||(this.takeoverTarget='hidden');'takeoverInlineAndSticky'!==this.adConfig.display.effect&&'takeoverUnderstitialMiniAndSticky'!==this.adConfig.display.effect||'disabled'===this.adConfig.creative.sticky.mode||(this.takeoverTarget='sticky');this.takeoverTarget&&(f=new a.c('TakeoverVisibilityHandler',this.context,g,this.adConfig.display.toStickyThreshold,0,this.adConfig.tracking.visibilityHandlerType,[],!1,function(){'sticky'===b.takeoverTarget&&b.takeoverIsShown?
b.logger.log('TakeoverVisibilityHandler - Ad is visible - SKIP takeover logic'):(b.logger.log('TakeoverVisibilityHandler - Ad is visible - perform takeover logic'),b.adAssetList.forEach(function(a){a.onTakeoverDisable(b.takeoverTarget)}))},function(){if('sticky'===b.takeoverTarget&&b.takeoverIsShown)b.logger.log('TakeoverVisibilityHandler - Ad is not visible (enough) anymore - SKIP takeover logic');else{b.logger.log('TakeoverVisibilityHandler - Ad is not visible (enough) anymore - perform takeover logic');
b.adAssetList.forEach(function(a){a.onTakeoverEnable(b.takeoverTarget)});try{var a=Date.now()-b.initConfig.timestamp;b.context.messageBus.event.emit({kind:'tracker',event:'takeover',details:{msSinceStart:a}})}catch(ma){}}b.takeoverIsShown=!0},!1),f.init(),this.visibilityHandlerList.push(f));e.isAutoResize&&(d.add('orientationchange',v(this.onOrientationChange.bind(this),100),0,!0),d.add('resize',v(this.onResize.bind(this),100),0,!0));try{var l=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',
event:'init',details:{msSinceStart:l}})}catch(ea){}var m=!1;this.adAssetList.forEach(function(a){a.waitForAssetReadyCheck||(m=!0)});m&&Promise.resolve().then(function(){b.context.messageBus.event.emit({kind:'assets-ready-check'})});return!0};G.prototype.replaceMacros=function(a,b){var c=this,d=a,e={percent:'%%',at:'@@'};Object.keys(e).forEach(function(a){d=d.replace(new RegExp(e[a]+'CLICK_URL_UNESC'+e[a],'g'),c.initConfig.tracking.click);d=d.replace(new RegExp(e[a]+'CLICK_URL_ESC'+e[a],'g'),encodeURIComponent(c.initConfig.tracking.click));
d=d.replace(new RegExp(e[a]+'CLICK_URL_ESC_ESC'+e[a],'g'),encodeURIComponent(encodeURIComponent(c.initConfig.tracking.click)));d=d.replace(new RegExp(e[a]+'SITE'+e[a],'g'),c.initConfig.meta.publisherDomain)});d=d.replace(new RegExp(decodeURIComponent('%25ecid!'),'g'),this.initConfig.meta.creativeId);d=d.replace(new RegExp(decodeURIComponent('%25esid!'),'g'),this.initConfig.meta.siteId);d=d.replace(new RegExp(decodeURIComponent('%25epid!'),'g'),this.initConfig.meta.adUnitId);d=d.replace(new RegExp(decodeURIComponent('%25ebuy!'),
'g'),this.initConfig.meta.orderId);d=d.replace(new RegExp(decodeURIComponent('%25eaid!'),'g'),this.initConfig.meta.lineItemId);d=d.replace(new RegExp(decodeURIComponent('%25eadv!'),'g'),this.initConfig.meta.advertiserId);d=this.context.metrics.replaceMacros(d);if(b){var f=function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1')};Object.keys(b).forEach(function(a){d=d.replace(new RegExp(f('['+a.toLowerCase()+']'),'g'),b[a]);d=d.replace(new RegExp(f('['+a.toUpperCase()+']'),'g'),b[a]);d=d.replace(new RegExp(f('%%'+
a.toLowerCase()+'%%'),'g'),b[a]);d=d.replace(new RegExp(f('%%'+a.toUpperCase()+'%%'),'g'),b[a])})}return d};G.prototype.constructVisibilityHandler=function(b){var c=this,d=new a.c('Shown',this.context,this.adPainter.productContainer,0,0,this.adConfig.tracking.visibilityHandlerType,[],!0,function(){c.context.messageBus.event.emit({kind:'shown'})},function(){});d.init();b.push(d);return b};G.prototype.getCreativeOptionDetails=function(a,b){var c=this.adConfig.creative.portrait,d=a.portrait,e=this.context.trackingMiner.portrait;
'landscape'===b&&(c=this.adConfig.creative.landscape,d=a.landscape,e=this.context.trackingMiner.landscape);'sticky'===b&&(c=this.adConfig.creative.sticky,d=a.sticky,e=this.context.trackingMiner.sticky);'hidden'===b&&(c=this.adConfig.creative.hidden,d=a.hidden,e=this.context.trackingMiner.hidden);return{configCreative:c,creativeDetails:d,trackingMiner:e}};G.prototype.mergeAdConfig=function(a,b,c,d){var e=this.context.Environment,f=JSON.parse(JSON.stringify(a));try{var g=this.context.newLogger('mergeAdConfig');
Object(W.a)(this.initConfig,g,f,b,e.isVideo);Object(W.a)(this.initConfig,g,f,c,e.isVideo);Object(W.a)(this.initConfig,g,f,d,e.isVideo)}catch(sa){this.logger.error('Error during merging ad configuration',{adConfig:JSON.stringify(a,null,2),adConfigSpecific:b,adUnitOptions:c,dealOptions:d,error:sa.message})}return f};G.prototype.run=function(){var a=this;this.paintAd();this.context.messageBus.event.emit({kind:'impression'});if(!this.context.Environment.isError)if(this.visibilityHandlerList.forEach(function(a){a.enable()}),
this.isVPAID)this.context.messageBus.event.onceEvent('vpaid-impression',function(){a.trackImpression()});else this.trackImpression()};G.prototype.trackImpression=function(){try{var a=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',event:'impression',details:{msSinceStart:a}});n({kind:'impression'})}catch(Aa){}this.visibilityHandlerDependsOnImpressionList.forEach(function(a){a.enable()})};G.prototype.paintAd=function(){var a=this,b=this.context.Environment;if(!b.isError){this.adPainter.insertAd(this.initConfig.placement.height,
this.adNode,this.adNodeHidden);this.postProcessAfterInsertAd();if('sticky'===this.adConfig.display.effect){this.logger.log('Display ad sticky');this.adPainter.hideAdvertisementMessage();if('disabled'!==this.adConfig.creative.sticky.mode)b.onSticky('sticky');else b.onSticky();this.adAssetList.forEach(function(a){a.onSticky()});this.updateStyles({updateAdPosition:!0,reset:!1});this.context.messageBus.event.emit({kind:'sticky'});try{var c=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',
event:'sticky',details:{msSinceStart:c}})}catch(h){}n({kind:'sticky-triggered'})}else this.isVPAID||this.adPainter.showAdvertisementMessage();this.adPainter.updateAdPosition(this.adVisibilityDetails);this.onResize();try{var d=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',event:'ready',details:{msSinceStart:d}})}catch(h){}if(this.adConfig.takeover.activateImmediately&&this.takeoverTarget){this.logger.log('Takeover - Activate immediately because of custom setting');
this.adAssetList.forEach(function(b){b.onTakeoverEnable(a.takeoverTarget)});try{var e=Date.now()-this.initConfig.timestamp;this.context.messageBus.event.emit({kind:'tracker',event:'takeover',details:{msSinceStart:e}})}catch(h){}}}};G.prototype.onLogger=function(a){var b={error:'font-weight: 600; color: #cc2208',warn:'font-weight: 500; color: #abb014',log:'font-weight: 500; color: #555',debug:'font-weight: 500; color: #888'},c=[],d=''+decodeURIComponent('%25c')+a.kind[0].toUpperCase()+decodeURIComponent('%25c')+
' ',e={error:'color: white; font-weight: 700; background-color: #f22; border-radius: 2px; padding: 0 4px 0',warn:'color: white; font-weight: 700; background-color: #f2ea5c; border-radius: 2px; padding: 0 4px 0',log:'color: white; font-weight: 700; background-color: #d0d4e0; border-radius: 2px; padding: 0 4px 0',debug:'color: white; font-weight: 700; background-color: #e8ecf7; border-radius: 2px; padding: 0 4px 0'};if(a.details){var f=a.details,g=0;'string'!==typeof a.details&&Object.keys(a.details).forEach(function(a){'object'===
typeof f[a]?Object.keys(f[a]).forEach(function(b){g++;c.push(a+'.'+b+'='+f[a][b])}):(g++,c.push(a+'='+f[a]))});0===g&&c.push(a.details)}if(0===c.length)switch(b=[''+d+decodeURIComponent('%25c')+a.message,e[a.kind],'',b[a.kind]],a.kind){case 'error':console.error.apply(console,$jscomp.arrayFromIterable(b));break;case 'warn':console.warn.apply(console,$jscomp.arrayFromIterable(b));break;case 'log':console.log.apply(console,$jscomp.arrayFromIterable(b));break;case 'debug':console.debug.apply(console,
$jscomp.arrayFromIterable(b))}else{console.groupCollapsed(''+d+decodeURIComponent('%25c')+a.message,e[a.kind],'',b[a.kind]);b=c.join('\n');switch(a.kind){case 'error':console.error(b);break;case 'warn':console.warn(b);break;case 'log':console.log(b);break;case 'debug':console.debug(b)}console.groupEnd()}};G.prototype.onOrientationChange=function(a){this.updateStyles({updateAdPosition:!0,reset:!0});this.context.Environment.onOrientationChange(a);this.adAssetList.forEach(function(b){b.onOrientationChange(a)});
this.updateStyles({updateAdPosition:!0,reset:!1})};G.prototype.onResize=function(a){this.updateStyles({updateAdPosition:!0,reset:!0});this.context.Environment.onResize(a);this.adAssetList.forEach(function(b){b.onResize(a)});this.updateStyles({updateAdPosition:!0,reset:!1});this.context.messageBus.clickOverlay.emit({kind:'refresh'})};G.prototype.postProcessAfterInsertAd=function(){this.adAssetList.forEach(function(a){a.postProcessAfterInsertAd(void 0)})};G.prototype.dispose=function(){this.adAssetList.forEach(function(a){a.dispose()})};
G.prototype.getCreative=function(){var a=null;this.adAssetList.forEach(function(b){b instanceof la.a&&(a=b)});return a};G.prototype.updateStyles=function(a){a=void 0===a?{updateAdPosition:!1,reset:!1}:a;var b=a.updateAdPosition,c=a.reset;this.adAssetList.forEach(function(a){a.updateStyles({updateAdPosition:b,reset:c})});b&&this.adPainter.updateAdPosition(this.adVisibilityDetails)};G.prototype.setupTrackerRedirection=function(a){if(this.trackerRedirectHasBeenSetUp)this.logger.error('setupTrackerRedirection called second time',
{type:a});else{var b=this.context.Environment,c=b.isVCPM;b=b.isDealPricingTypeUnknown;this.trackerRedirectHasBeenSetUp=!0;this.logger.debug('setupTrackerRedirection',{type:a});c&&b&&(this.trackerRedirect.push({event:'impression',trackOn:'viewability'}),this.logger.log('Enabled tracker redirect because of ad configuration "tracking.vCPMEnabled"',{event:'impression',trackOn:'viewability'}));var d=this.adConfig.tracking.countImpressionOn,e=this.adConfig.tracking.countVideoCreativeviewOn;'vpaid'===a&&
(d=this.adConfig.tracking.countVPAIDImpressionOn,e=this.adConfig.tracking.countVPAIDVideoCreativeviewOn);c&&!b?this.context.Environment.isVideo?(this.logger.log("Enable impression tracker redirect to 'video-start' because vCPM is used (video)",{event:'impression',trackOn:'video-start'}),this.trackerRedirect.push({event:'impression',trackOn:'video-start'})):this.logger.log('SKIP impression tracker redirect because vCPM is used (no video)',{event:'impression',trackOn:d}):c||'impression'===d||(this.logger.log("Enable impression tracker redirect to '"+
d+'\' because of ad configuration "tracking.countImpressionOn"',{event:'impression',trackOn:d}),this.trackerRedirect.push({event:'impression',trackOn:d}));'video-creativeview'!==this.adConfig.tracking.countVideoCreativeviewOn&&(this.trackerRedirect.push({event:'video-creativeview',trackOn:e}),this.logger.log('Enabled tracker redirect because of ad configuration "tracking.countVideoCreativeviewOn"',{event:'video-creativeview',trackOn:e}))}}},function(g,e,b){},function(g,e){(function(b){b.forEach(function(b){b.hasOwnProperty('append')||
Object.defineProperty(b,'append',{configurable:!0,enumerable:!0,writable:!0,value:function(){var b=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();b.forEach(function(b){e.appendChild(b instanceof Node?b:document.createTextNode(String(b)))});this.appendChild(e)}})})})([Element.prototype,Document.prototype,DocumentFragment.prototype])},function(g,e){(function(b){b.forEach(function(b){b.hasOwnProperty('prepend')||Object.defineProperty(b,'prepend',{configurable:!0,enumerable:!0,
writable:!0,value:function(){var b=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();b.forEach(function(b){e.appendChild(b instanceof Node?b:document.createTextNode(String(b)))});this.insertBefore(e,this.firstChild)}})})})([Element.prototype,Document.prototype,DocumentFragment.prototype])},function(g,e){},function(g,e){},,function(g,e,b){function n(a){return'string'===typeof a&&0<a.length}function c(a){return Array.isArray(a)&&0<a.length}function l(a){return null!=a&&n(a._value)}
function v(a){var b=Va.exec(a);if(null==b)throw Error('Failed to parse time '+a);return 60*(60*parseInt(b[1],10)+parseInt(b[2],10))+parseFloat(b[3])}function q(a,b,c){if(null!=a&&Array.isArray(a.tracking)){a=$jscomp.makeIterator(a.tracking);for(var d=a.next();!d.done;d=a.next())if(d=d.value,n(d._value)){var e=new ma;e.uri=d._value;if(n(d.offset))try{e.offset=Ea(d.offset)}catch(Wa){c&&c.errorHandler(Wa)}b.add(d.event,e)}}}function B(){}function p(a){throw a;}function k(a,b){for(var c=[],d=0;d<a.length;d++){var e=
a[d];a:{var r=b;for(var f=0;f<c.length;f++)if(r(c[f])===r(e)){r=f;break a}r=-1}-1===r&&c.push(e)}return c}function a(){return'10000000-1000-4000-8000-100000000000'.replace(/[018]/g,function(a){return(a^16*Math.random()>>a/4).toString(16)})}function d(a){return function(b){return b.ads.toArray().filter(function(b){return b.$type===a})[0]}}function m(a,b){b=b.creatives.toArray().filter(function(a){return void 0!==a.linear});if(0<b.length)return 1<b.length&&a.warn('Multiple linear elements, using first'),
b[0].linear}function u(a,b,c){return a.filter(function(a){return a.type&&c.canPlayType(a.type)===b})}function F(a){var b=[],c=[];a.mediaFiles.slice().sort(function(a,b){return(b.height||0)+(b.width||0)-((a.height||0)+(a.width||0))}).forEach(function(a){a.apiFramework?'VPAID'===a.apiFramework&&ha.test(a.type)&&b.push(a):c.push(a)});return[b,c]}function t(a,b,c,d){var e=document.createElement('video'),r=$jscomp.makeIterator(F(b));b=r.next().value;r=r.next().value;var f=b.concat(r);a.debug('MediaFile list',
{list:JSON.stringify(f,null,2)});a={};for(var C=0;C<d.length;a={$jscomp$loop$prop$priority$45:a.$jscomp$loop$prop$priority$45},C++){a.$jscomp$loop$prop$priority$45=d[C];var g=f.find(function(a){return function(b){return String(b[a.$jscomp$loop$prop$priority$45.kind])===a.$jscomp$loop$prop$priority$45.value}}(a));if(g&&g.type&&(ha.test(g.type)||-1!==['probably','maybe'].indexOf(e.canPlayType(g.type))))return g}if(c&&0<b.length)return b[0];c=u(r,'probably',e);if(0<c.length)return c[0];e=u(r,'maybe',
e);if(0<e.length)return e[0]}function x(a,b,c){var d=[],e=[],r=[],f=[];b.forEach(function(b){d=d.concat(b.impressions);if(b=m(a,b))b.trackingEvents&&(e=e.concat(b.trackingEvents)),b.videoClicks&&(r=r.concat(b.videoClicks)),f=f.concat(b.icons)});d=d.concat(c.impressions);b=m(a,c);b.trackingEvents&&(e=e.concat(b.trackingEvents));b.videoClicks&&(r=r.concat(b.videoClicks));f=f.concat(b.icons);b=k(d,function(a){return a.uri});f=k(f,function(a){return a.program});return[b,e,r,f]}function z(a){var b=[],
c=[];a.forEach(function(a){a.get('progress').forEach(function(a){a.offset instanceof na?a.offset.value&&c.push(a.offset.value):a.offset instanceof ia&&a.offset.value&&b.push(a.offset.value)})});return{breakpointTrackingPercentage:b,breakpointTrackingTime:c}}function E(a){return a.map(function(a){return String(a.version).replace(/\./g,'-')}).join('|')}function I(a,b){a=a.map(function(a){return a.verifications}).reduce(function(a,b){return[].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(b))},
[]);a.push.apply(a,$jscomp.arrayFromIterable(b.verifications));return a}function w(a,b){var c=a.Environment;if(b instanceof oa&&b.creativeType&&b.uri){a.messageBus.event.emit({kind:'tracker',event:'video-icon-static'});a=b.creativeType.toLowerCase();if(-1!==['image/gif','image/jpeg','image/jpg','image/png'].indexOf(a))return c=y.e(c,'img'),c.src=b.uri,c;if(ha.test(a))return a=y.e(c,'script'),c=y.e(c,'div'),a.src=b.uri,c.append(a),c}else{if(b instanceof ta&&b.uri)return a.messageBus.event.emit({kind:'tracker',
event:'video-icon-iframe'}),c=y.e(c,'iframe'),c.src=b.uri,c;if(b instanceof ua&&b.uri)return a.messageBus.event.emit({kind:'tracker',event:'video-icon-html'}),c=document.createElement('div'),c.innerHTML=b.uri,c}}function D(a,b){if(b.resource instanceof oa){var c=w(a,b.resource);if(c){if(b.clicks&&b.clicks.clickThrough&&b.clicks.clickThrough.uri){var d=b.clicks.clickThrough.uri,e=b.clicks.clickTrackings.length;b.clicks.clickTrackings.forEach(function(c){c.uri&&a.messageBus.tracking.emit({kind:'register',
type:'url',content:c.uri,event:'video-icon-click',meta:{program:String(b.program)}})});b.viewTrackings.forEach(function(c){c&&a.messageBus.tracking.emit({kind:'register',type:'url',content:c,event:'video-icon-view',meta:{program:String(b.program)}})});c.style.cursor='pointer';c.addEventListener('click',function(c){c.stopPropagation();Object(Fa.a)(a,d);e&&a.messageBus.event.emit({kind:'tracker',event:'video-icon-click',meta:{program:String(b.program)}})},!1)}var r=c}}return r}b.r(e);var O=b(18),f=
b(13),y=b(1),H=function(){this.ads=new P;this.$type='AdBuffet'},da=function(){this.ads=new P;this.$type='AdPod'},P=function(){this.contents=[];this.$type='SortedList'};P.prototype.add=function(a){this.contents.push(a);this.contents.sort(function(a,b){return(a.sequence||0)-(b.sequence||0)})};P.prototype.remove=function(a){for(var b=this.contents.indexOf(a);0<=b;)this.contents.splice(b,1),b=this.contents.indexOf(a,b)};P.prototype.toArray=function(){return this.contents.slice()};P.prototype.get=function(a){return this.contents[a]};
$jscomp.global.Object.defineProperties(P.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.contents.length}}});var L=function(){this.conditionalAd=!1;this.impressions=[];this.errors=[];this.verifications=[];this.extensions=[];this.creatives=new P},T=function(){var a=L.call(this)||this;a.categories=[];a.surveys=[];a.$type='InLine';return a};$jscomp.inherits(T,L);var W=function(){var a=L.call(this)||this;a.followAdditionalWrappers=!0;a.allowMultipleAds=!1;a.fallbackOnNoAd=
!1;a.$type='Wrapper';return a};$jscomp.inherits(W,L);var X=function(){this.clickTrackings=[]},S=function(){var a=X.apply(this,arguments)||this;a.$type='IconClicks';return a};$jscomp.inherits(S,X);var la=function(){this.clickTrackings=[];this.customClicks=[];this.$type='VideoClicks';return this};$jscomp.inherits(la,X);var G=function(){this.$type='AdSystem'},J=function(){this.$type='Category'},Aa=function(){this.$type='Click'},Sa=function(){this.extensions=[];this.$type='Creative'},Ta=function(){this.viewTrackings=
[];this.$type='Icon'},Ba=function(){this.$type='Impression'},h=function(){this.$type='InteractiveCreativeFile'},Ca=function(){this.$type='MediaFile'},sa=function(){this.$type='Pricing'},ea=function(){this.$type='Survey'},ma=function(){this.$type='TrackingEvent'},Y=function(){this.map=Object.create(null);this.$type='TrackingEvents'};Y.prototype.get=function(a){return this.map[a]||[]};Y.prototype.has=function(a){return 0<this.get(a).length};Y.prototype.add=function(a,b){this.map[a]=this.map[a]||[];
this.map[a].push(b)};$jscomp.global.Object.defineProperties(Y.prototype,{types:{configurable:!0,enumerable:!0,get:function(){return Object.keys(this.map)}}});var Ua=function(){this.idValue=this.idRegistry='unknown';this.$type='UniversalAdId'},Da=function(){var a=H.call(this)||this;a.errors=[];a.$type='VAST';return a};$jscomp.inherits(Da,H);var $a=function(){this.javaScriptResources=[];this.flashResources=[];this.$type='Verification'},ab=function(){this.viewables=[];this.notViewables=[];this.viewUndetermineds=
[];this.$type='ViewableImpression'},bb=function(){this.companions=[];this.$type='CompanionAds'},cb=function(){this.clickTrackings=[];this.$type='Companion'},db=function(){this.mediaFiles=[];this.interactiveCreativeFiles=[];this.icons=[];this.$type='Linear'},eb=function(){this.nonLinears=[];this.$type='NonLinearAds'},fb=function(){this.maintainAspectRatio=this.scalable=!1;this.clickTrackings=[];this.$type='NonLinear'},pa=function(){},Ga=function(){var a=pa.apply(this,arguments)||this;a.$type='CreativeExtension';
return a};$jscomp.inherits(Ga,pa);var Ha=function(){var a=pa.apply(this,arguments)||this;a.$type='Extension';return a};$jscomp.inherits(Ha,pa);var ja=function(){},ua=function(){var a=ja.apply(this,arguments)||this;a.$type='HTMLResource';return a};$jscomp.inherits(ua,ja);var ta=function(){var a=ja.apply(this,arguments)||this;a.$type='IFrameResource';return a};$jscomp.inherits(ta,ja);var oa=function(){this.$type='StaticResource';return this};$jscomp.inherits(oa,ja);var qa=function(){},Ia=function(){var a=
qa.apply(this,arguments)||this;a.$type='FlashResource';return a};$jscomp.inherits(Ia,qa);var Ja=function(){var a=qa.apply(this,arguments)||this;a.$type='JavaScriptResource';return a};$jscomp.inherits(Ja,qa);var ra=function(){},na=function(){var a=ra.apply(this,arguments)||this;a.$type='AbsoluteTimeOffset';return a};$jscomp.inherits(na,ra);var ia=function(){var a=ra.apply(this,arguments)||this;a.$type='RelativeTimeOffset';return a};$jscomp.inherits(ia,ra);var R=b(2),gb=/^(?:\w+:)?\/\//,Ea=function(a,
b){if('%'===a.charAt(a.length-1))return b=new ia,b.value=parseFloat(a.substr(0,a.length-1)),b;var c=new na;try{c.value=v(a)}catch(Q){b&&b.errorHandler(Q)}return c},Va=/^\s*(\d+):(\d+):(\d+(?:\.\d+)?)\s*$/,ka={},hb=(ka.b=function(a){return'true'===a||'1'===a},ka.i=function(a){return parseInt(a,10)},ka.f=parseFloat,ka.t=v,ka),va=function(a){return function(b){return b.nodeType===a}},ib=va(1),jb=va(3),kb=va(4),lb=function(a){return jb(a)||kb(a)},mb=function(a){return Array.prototype.filter.call(a.childNodes,
lb).map(function(a){return a.nodeValue}).join('').trim()},Ka=function(){var a=/^[A-Z]+/,b=function(a){return 1===a.length?a.toLowerCase():a.substr(0,a.length-1).toLowerCase()+a.charAt(a.length-1)};return function(c){return c.replace(a,b)}}(),N=function(a){var b=a.freeforms,c=a.types;this._collections=a.collections;this._freeforms=b;this._types=c};N.prototype.unmarshal=function(a){return this._createNode(a)};N.prototype._createNode=function(a){var b=Object.create(null);b._value=this._convertPropertyValue(mb(a),
a.nodeName,'_value');this._copyAttributes(b,a);this._createCollections(b,a);this._createChildren(b,a);return b};N.prototype._createFreeformNode=function(a){var b=Object.create(null);this._copyAttributes(b,a);b._value=a;return b};N.prototype._copyAttributes=function(a,b){for(var c=b.nodeName,d=0;d<b.attributes.length;++d){var e=b.attributes[d],f=e.nodeName;a[f]=this._convertPropertyValue(e.nodeValue,c,f)}};N.prototype._createCollections=function(a,b){null!=this._collections[b.nodeName]&&this._collections[b.nodeName].forEach(function(b){a[Ka(b)]=
[]})};N.prototype._createChildren=function(a,b){var c=this,d=b.nodeName;Array.prototype.filter.call(b.childNodes,ib).forEach(function(b){var e=b.nodeName,f=Ka(e);c._isFreeformParent(d)?c._isFreeformChild(d,e)&&c._addFreeformChild(b,f,a):c._addNodeChild(b,f,a,d,e)})};N.prototype._addNodeChild=function(a,b,c,d,e){a=this._createNode(a);if(null==c[b])c[b]=a;else if(this._isCollection(d,e))c[b].push(a);else throw Error('Multiple values for '+d+'.'+e);};N.prototype._addFreeformChild=function(a,b,c){c[b]=
c[b]||[];c[b].push(this._createFreeformNode(a))};N.prototype._convertPropertyValue=function(a,b,c){b=null!=this._types[b]?this._types[b][c]:null;return null!=b?hb[b](a):a};N.prototype._isCollection=function(a,b){var c=this._collections;return null!=c[a]&&!!~c[a].indexOf(b)};N.prototype._isFreeformParent=function(a){return null!=this._freeforms[a]};N.prototype._isFreeformChild=function(a,b){var c=this._freeforms;return null!=c[a]&&!!~c[a].indexOf(b)};var nb={AdVerifications:['Verification'],Companion:['CompanionClickTracking'],
CompanionAds:['Companion'],CreativeExtensions:['CreativeExtension'],Creatives:['Creative'],Extensions:['Extension'],Icon:['IconViewTracking'],IconClicks:['IconClickTracking'],Icons:['Icon'],InLine:['Category','Error','Impression','Survey'],MediaFiles:['MediaFile','InteractiveCreativeFile'],NonLinear:['NonLinearClickTracking'],NonLinearAds:['NonLinear'],TrackingEvents:['Tracking'],VAST:['Error','Ad'],Verification:['JavaScriptResource','FlashResource'],ViewableImpression:['Viewable','NotViewable','ViewUndetermined'],
VideoClicks:['ClickTracking','CustomClick'],Wrapper:['Impression','Error']},ob={CreativeExtensions:['CreativeExtension'],Extensions:['Extension']},pb={Ad:{sequence:'i'},AdParameters:{xmlEncoded:'b'},Companion:{width:'i',height:'i',expandedWidth:'i',expandedHeight:'i'},Creative:{sequence:'i'},Duration:{_value:'t'},Icon:{width:'i',height:'i',offset:'t',duration:'t'},MediaFile:{bitrate:'i',minBitrate:'i',maxBitrate:'i',width:'i',height:'i',scalable:'b',maintainAspectRatio:'b'},NonLinear:{width:'i',height:'i',
assetWidth:'i',assetHeight:'i',expandedWidth:'i',expandedHeight:'i',scalable:'b',maintainAspectRatio:'b',minSuggestedDuration:'t'},Pricing:{_value:'f'},Wrapper:{followAdditionalWrappers:'b',allowMultipleAds:'b',fallbackOnNoAd:'b'}},qb=function(a){var b=new G;b.version=a.version;b.name=a._value;return b},rb=function(a){var b=new Ga;b.type=a.type;b.xmlElement=a._value;return b},sb=function(a){var b=new Ca;b.id=a.id;b.delivery=a.delivery;b.type=a.type;b.bitrate=a.bitrate;b.minBitrate=a.minBitrate;b.maxBitrate=
a.maxBitrate;b.width=a.width;b.height=a.height;b.scalable=a.scalable;b.maintainAspectRatio=a.maintainAspectRatio;b.codec=a.codec;b.apiFramework=a.apiFramework;b.uri=a._value;return b},tb=function(a){var b=new h;b.type=a.type;b.apiFramework=a.apiFramework;b.uri=a._value;return b},wa=function(a){if(null!=a.staticResource){a=a.staticResource;var b=new oa;b.creativeType=a.creativeType;b.uri=a._value;a=b}else null!=a.iFrameResource?(a=a.iFrameResource,b=new ta,b.uri=a._value,a=b):null!=a.htmlResource?
(a=a.htmlResource,b=new ua,b.uri=a._value,a=b):a=void 0;return a},U=function(a){var b=new Aa;b.id=a.id;b.uri=a._value;return b},ub=function(a){var b=new S;null!=a.iconClickThrough&&l(a.iconClickThrough)&&(b.clickThrough=U(a.iconClickThrough));null!=a.iconClickTracking&&b.clickTrackings.push.apply(b.clickTrackings,$jscomp.arrayFromIterable(a.iconClickTracking.filter(l).map(U)));return b},La=function(a,b){return void 0===a?a:0>b.indexOf(String(a))?parseInt(String(a),0):a},vb=function(a){var b=new Ta;
b.program=a.program;b.width=a.width;b.height=a.height;b.xPosition=La(a.xPosition,['left','right']);b.yPosition=La(a.yPosition,['top','bottom']);b.duration=a.duration;b.offset=a.offset;b.apiFramework=a.apiFramework;b.pxratio=a.pxratio;b.resource=wa(a);null!=a.iconClicks&&(l(a.iconClicks.iconClickThrough)||c(a.iconClicks.iconClickTracking))&&(b.clicks=ub(a.iconClicks));null!=a.iconViewTracking&&b.viewTrackings.push.apply(b.viewTrackings,$jscomp.arrayFromIterable(a.iconViewTracking.filter(l).map(function(a){return a._value})));
return b},wb=function(a){var b=new fb;b.id=a.id;b.width=a.width;b.height=a.height;b.expandedWidth=a.expandedWidth;b.expandedHeight=a.expandedHeight;b.scalable=a.scalable;b.maintainAspectRatio=a.maintainAspectRatio;b.minSuggestedDuration=a.minSuggestedDuration;b.apiFramework=a.apiFramework;b.resource=wa(a);null!=a.adParameters&&(b.adParameters=a.adParameters._value);null!=a.nonLinearClickThrough&&l(a.nonLinearClickThrough)&&(b.clickThrough=U(a.nonLinearClickThrough));null!=a.nonLinearClickTracking&&
b.clickTrackings.push.apply(b.clickTrackings,$jscomp.arrayFromIterable(a.nonLinearClickTracking.filter(l).map(U)));return b},xb=function(a){var b=new cb;b.id=a.id;b.width=a.width;b.height=a.height;b.assetWidth=a.assetWidth;b.assetHeight=a.assetHeight;b.expandedWidth=a.expandedWidth;b.expandedHeight=a.expandedHeight;b.apiFramework=a.apiFramework;b.adSlotID=a.adSlotID;b.pxratio=a.pxratio;b.resource=wa(a);null!=a.adParameters&&l(a.adParameters)&&(b.adParameters=a.adParameters._value);null!=a.altText&&
l(a.altText._value)&&(b.altText=a.altText._value);null!=a.companionClickThrough&&l(a.companionClickThrough)&&(b.clickThrough=U(a.companionClickThrough));null!=a.companionClickTracking&&b.clickTrackings.push.apply(b.clickTrackings,$jscomp.arrayFromIterable(a.companionClickTracking.filter(l).map(U)));null!=a.trackingEvents&&c(a.trackingEvents.tracking)&&(b.trackingEvents=new Y,q(a.trackingEvents,b.trackingEvents));return b},yb=function(a){var b=new Ha;b.type=a.type;b.xmlElement=a._value;return b},zb=
function(a){var b=new Ba;b.id=a.id;b.uri=a._value;return b},Ab=function(a){var b=new sa;b.model=a.model;b.currency=a.currency;b.value=a._value;return b},Bb=function(a){var b=new ab;b.id=a.id;null!=a.viewable&&b.viewables.push.apply(b.viewables,$jscomp.arrayFromIterable(a.viewable.map(function(a){return a._value})));null!=a.notViewable&&b.notViewables.push.apply(b.notViewables,$jscomp.arrayFromIterable(a.notViewable.map(function(a){return a._value})));null!=a.viewUndetermined&&b.viewUndetermineds.push.apply(b.viewUndetermineds,
$jscomp.arrayFromIterable(a.viewUndetermined.map(function(a){return a._value})));return b},Cb=function(a){var b=new Ja;b.apiFramework=a.apiFramework;b.uri=a._value;return b},Db=function(a){var b=new Ia;b.apiFramework=a.apiFramework;b.uri=a._value;return b},Ma=function(a,b,d,e){d.id=a.id;d.conditionalAd=a.conditionalAd;d.sequence=a.sequence;null!=b.adSystem&&(d.adSystem=qb(b.adSystem));null!=b.impression&&d.impressions.push.apply(d.impressions,$jscomp.arrayFromIterable(b.impression.filter(l).map(zb)));
null!=b.pricing&&(d.pricing=Ab(b.pricing));null!=b.error&&d.errors.push.apply(d.errors,$jscomp.arrayFromIterable(b.error.filter(l).map(function(a){return a._value})));null!=b.viewableImpression&&(d.viewableImpression=Bb(b.viewableImpression));null!=b.adVerifications&&b.adVerifications.verification.forEach(function(a){try{var b=new $a;b.vendor=a.vendor;null!=a.javaScriptResource&&b.javaScriptResources.push.apply(b.javaScriptResources,$jscomp.arrayFromIterable(a.javaScriptResource.map(Cb)));null!=a.flashResource&&
b.flashResources.push.apply(b.flashResources,$jscomp.arrayFromIterable(a.flashResource.map(Db)));null!=a.verificationParameters&&(b.verificationParameters=a.verificationParameters._value);null!=a.viewableImpression&&(b.viewableImpression=a.viewableImpression._value);null!=a.verificationParameters&&(b.parameters=a.verificationParameters._value);d.verifications.push(b)}catch(Xa){e.errorHandler(Xa)}});null!=b.extensions&&d.extensions.push.apply(d.extensions,$jscomp.arrayFromIterable(b.extensions.extension.map(yb)));
null!=b.creatives&&b.creatives.creative.forEach(function(a){try{var b=new Sa;b.id=a.id;b.sequence=a.sequence;b.adID=a.AdID||a.adID||a.adId;b.apiFramework=a.apiFramework;if(null!=a.universalAdId){var f=a.universalAdId,g=new Ua;void 0!==f.idRegistry&&(g.idRegistry=f.idRegistry);void 0!==f.idValue&&(g.idValue=f.idValue);g.creativeIdentifier=f._value;b.universalAdId=g}null!=a.creativeExtensions&&a.creativeExtensions.creativeExtension&&b.extensions.push.apply(b.extensions,$jscomp.arrayFromIterable(a.creativeExtensions.creativeExtension.map(rb)));
if(null!=a.linear){var r=a.linear,C=new db;n(r.skipoffset)&&(C.skipoffset=Ea(r.skipoffset,e));null!=r.duration&&(C.duration=r.duration._value);null!=r.mediaFiles&&(null!=r.mediaFiles.mezzanine&&(C.mezzanine=r.mediaFiles.mezzanine._value),null!=r.mediaFiles.mediaFile&&C.mediaFiles.push.apply(C.mediaFiles,$jscomp.arrayFromIterable(r.mediaFiles.mediaFile.map(sb))),null!=r.mediaFiles.interactiveCreativeFile&&C.interactiveCreativeFiles.push.apply(C.interactiveCreativeFiles,$jscomp.arrayFromIterable(r.mediaFiles.interactiveCreativeFile.map(tb))));
null!=r.adParameters&&(C.adParameters=r.adParameters._value);if(null!=r.videoClicks){C.videoClicks=new la;var h=r.videoClicks,M=C.videoClicks;null!=h.clickThrough&&l(h.clickThrough)&&(M.clickThrough=U(h.clickThrough));null!=h.clickTracking&&M.clickTrackings.push.apply(M.clickTrackings,$jscomp.arrayFromIterable(h.clickTracking.filter(l).map(U)));null!=h.customClick&&M.customClicks.push.apply(M.customClicks,$jscomp.arrayFromIterable(h.customClick.filter(l).map(U)))}null!=r.trackingEvents&&c(r.trackingEvents.tracking)&&
(C.trackingEvents=new Y,q(r.trackingEvents,C.trackingEvents,e));null!=r.icons&&r.icons.icon&&C.icons.push.apply(C.icons,$jscomp.arrayFromIterable(r.icons.icon.map(vb)));b.linear=C}else if(null!=a.nonLinearAds){var k=a.nonLinearAds,fa=new eb;null!=k.nonLinear&&fa.nonLinears.push.apply(fa.nonLinears,$jscomp.arrayFromIterable(k.nonLinear.map(wb)));null!=k.trackingEvents&&c(k.trackingEvents.tracking)&&(fa.trackingEvents=new Y,q(k.trackingEvents,fa.trackingEvents));b.nonLinearAds=fa}if(null!=a.companionAds){var Q=
a.companionAds,m=new bb;m.required=Q.required;null!=Q.companion&&m.companions.push.apply(m.companions,$jscomp.arrayFromIterable(Q.companion.map(xb)));b.companionAds=m}null==b.linear&&null==b.nonLinearAds&&null==b.companionAds&&e.errorHandler(Error('Creative has no ads'));d.creatives.add(b)}catch(Eb){e.errorHandler(Eb)}});return d},Fb=function(a){var b=new J;b.authority=a.authority;b.code=a._value;return b},Gb=function(a){var b=new ea;b.type=a.type;b.uri=a._value;return b},Hb=function(a,b){var c=new T,
d=a.inLine;Ma(a,d,c,b);c.adTitle=null!=d.adTitle?d.adTitle._value:null;null!=d.category&&c.categories.push.apply(c.categories,$jscomp.arrayFromIterable(d.category.filter(function(a){return null!=a.authority}).map(Fb)));c.description=null!=d.description?d.description._value:null;c.advertiser=null!=d.advertiser?d.advertiser._value:null;null!=d.survey&&c.surveys.push.apply(c.surveys,$jscomp.arrayFromIterable(d.survey.filter(function(a){return 0<a._value.length}).map(Gb)));return c},Na=function(a,b){if(a.inLine)return Hb(a,
b);if(a.wrapper){var c=new W,d=a.wrapper;Ma(a,d,c,b);null!=d.followAdditionalWrappers&&(c.followAdditionalWrappers=d.followAdditionalWrappers);null!=d.allowMultipleAds&&(c.allowMultipleAds=d.allowMultipleAds);c.fallbackOnNoAd=d.fallbackOnNoAd;c.vastAdTagURI=null!=d.vastAdTagURI?d.vastAdTagURI._value:null;return c}throw Error('Unrecognized ad type');},Ib=function(a){for(var b=[],c=[],d=0;d<a.length;++d){var e=a[d];'undefined'!==typeof e.sequence?b.push(e):c.push(e)}return[b,c]},Jb=function(a,b){var c=
new Da;c.version=a.version;c.errors.push.apply(c.errors,$jscomp.arrayFromIterable(a.error.map(function(a){return a._value}).filter(function(a){return''!==a})));var d=$jscomp.makeIterator(Ib(a.ad)),e=d.next().value;d=d.next().value;if(0<e.length)if(b.noSingleAdPods&&1===a.ad.length&&1===e.length)d.push(e[0]);else for(c.adPod=new da,a=0;a<e.length;a++)c.adPod.ads.add(Na(e[a],b));for(e=0;e<d.length;e++)c.ads.add(Na(d[e],b));return c},Kb={strict:!1,noSingleAdPods:!1},Oa=R.k,Z=function(a,b,c){a=Oa.call(this,
a,b)||this;a.$type='VASTLoaderError';a.uri=c;return a};$jscomp.inherits(Z,Oa);var Lb={maxDepth:10,timeout:1E4,noSingleAdPods:!1},aa=function(a,b,c,d){this.logger=a;this.uri=b;this.options=Object.assign({},Lb,c);d?(this.parent=d,this.depth=this.parent.depth+1):this.depth=1};aa.prototype.load=function(a,b){var c=this;return Promise.resolve().then(function(){a:{var a=c.uri;if(!gb.test(a)){var b='a'+Math.random().toString(32),d=new DOMParser,e=null;try{e=d.parseFromString(a+('<?'+b+'?>'),'application/xml')}catch(Za){}if(e instanceof
Document){var f=e.lastChild;if(f instanceof ProcessingInstruction&&f.target===b&&''===f.data){e.removeChild(f);b=e.documentElement.getElementsByTagName('parsererror').length;if(0!==b){f=null;try{f=d.parseFromString(a+'<?','application/xml')}catch(Za){}if(!(f instanceof Document)||f.documentElement.getElementsByTagName('parsererror').length===b){a=void 0;break a}}a=e;break a}}}a=void 0}if(a)return c.isRootParent&&c.logger.debug('VASTLoader: supplied creative was XML',{xml:c.uri}),c.uri;c.isRootParent&&
c.logger.debug('VASTLoader: supplied creative was URI',{uri:c.uri});return c.fetch()}).then(function(d){var e={noSingleAdPods:!1};null==e.domParser&&(e.domParser=new DOMParser);e=void 0===e?{}:e;e=Object.assign({},Kb,e);e.errorHandler=e.strict?p:B;if('string'===typeof d)var f=(e.domParser||new DOMParser).parseFromString(d,'text/xml').documentElement;d instanceof Document&&null!=d.documentElement&&(f=d.documentElement);d=f;a.isLogMode&&console.log(d);d=(new N({collections:nb,freeforms:ob,types:pb})).unmarshal(d);
a:{try{var g=Jb(d,e);break a}catch(Ya){e.errorHandler(Ya)}g=void 0}if(!g)throw new Z(R.a,null,c.uri);g.uri=c.uri;if(0<g.ads.length){if(e=g.ads.get(0),e instanceof W)return c.logger.debug('VASTLoader: VAST Wrapper was found',{depth:c.depth,uri:e.vastAdTagURI}),e.errors.forEach(b),c.loadWrapped(a,e.vastAdTagURI,g,b)}else if(1<c.depth)throw new Z(R.e,null,c.uri);g.errors.forEach(b);return[g]})};aa.prototype.loadWrapped=function(a,b,c,d){var e=this;return Promise.resolve().then(function(){var c=e.options.maxDepth;
if(0<c&&e.depth+1>=c)throw new Z(R.d,null,e.uri);return(new aa(e.logger,b,e.options,e)).load(a,d)}).then(function(a){return[c].concat($jscomp.arrayFromIterable(a))})};aa.prototype.fetch=function(){var a=this,b=this.createTimeout();return Promise.race([b.promise,window.fetch(this.uri).catch(function(b){throw new Z(R.b,b.message+' ('+a.uri+')',a.uri);}).then(function(c){b.cancel();if(!(200<=c.status&&300>c.status))throw new Z(R.c,{http:{code:c.status,text:c.statusText}},a.uri);return c.text()}).then(function(b){a.logger.debug('VASTLoader: loaded VAST tag',
{uri:a.uri});return b})])};aa.prototype.createTimeout=function(){var a=this,b;return{cancel:function(){window.clearTimeout(b)},promise:new Promise(function(c,d){b=window.setTimeout(function(){d(new R.k(R.c))},a.options.timeout)})}};$jscomp.global.Object.defineProperties(aa.prototype,{isRootParent:{configurable:!0,enumerable:!0,get:function(){return void 0===this.parent}}});var Pa=b(7),Qa=b(5).a,V=function(b,c,d,e){var f=Qa.call(this)||this;f.adSessionId=a();f.registeredSessionObservers=[];f.eventListeners=
{};f.cachedEvents={};f.sessionStartedTimestamp=0;f.playerState='paused';f.registerSessionObserver=function(a,b){f.registeredSessionObservers.push({observer:a,verificationParameters:f.verificationParameters})};f.addEventListener=function(a,b){f.logger.debug('subscribing to: '+a);!1===f.eventListeners.hasOwnProperty(a)&&(f.eventListeners[a]=[]);f.eventListeners[a].push(b);'sessionStart'===a&&f.sessionStart();f.sessionStarted&&f.dispatchCachedEvents(a)};f.handleEvents=function(a){var b=a.kind,c=f.createOMIDEvent(a),
d=f.playerState;'playing'===d&&'resume'===b||f.dispatchEvent(c);if('start'===b||'resumed-from-waiting'===b||'resume'===b)'paused'===d&&(f.playerState='playing'),'paused-and-buffering'===d&&(c=f.createOMIDEvent({kind:'bufferFinish'}),f.dispatchEvent(c),c=f.createOMIDEvent({kind:'resume'}),f.dispatchEvent(c),f.playerState='playing');'pause'===b&&'playing'===d&&(f.playerState='paused');if('waiting'===b){'playing'===d&&(c=f.createOMIDEvent({kind:'pause'}),f.dispatchEvent(c));if('playing'===d||'paused'===
d)d=f.createOMIDEvent({kind:'bufferStart'}),f.dispatchEvent(d);f.playerState='paused-and-buffering'}if('mute'===b||'unmute'===b)a=f.createOMIDEvent(a),a.type='volumeChange',f.dispatchEvent(a)};f.onTrackerEvent=function(a){if('video-error'===a.event){var b=f.createOMIDEvent({kind:'sessionError'});a.details&&a.details.errorCode&&(b.data.message='VAST error code: '+a.details.errorCode);f.dispatchEvent(b)}};f.context=b;f.logger=b.newLogger('OMIDProcessor');f.verificationParameters=e.verificationParameters||
'';f.video=d;b=b.Environment.hostDocument.createElement('iframe');y.f(b);f.context.rootContainer.append(b);b=b.contentWindow;b.omid3p={registerSessionObserver:f.registerSessionObserver,addEventListener:f.addEventListener};c=b.document.createElement('script');c.async=!0;c.src=e.javaScriptResources[0].uri;b.document.body.append(c);f.on(f.handleEvents);f.messageBusEventListener=f.context.messageBus.event.onEvent('tracker',f.onTrackerEvent);return f};$jscomp.inherits(V,Qa);V.prototype.dispatchCachedEvents=
function(a){var b=this;this.cachedEvents.hasOwnProperty(a)&&0<this.cachedEvents[a].length&&(this.cachedEvents[a].forEach(function(c){b.eventListeners[a].forEach(function(a){a(c)})}),this.cachedEvents[a]=[])};V.prototype.createOMIDEvent=function(a){var b={adSessionId:this.adSessionId,type:a.kind,timestamp:Date.now()};switch(a.kind){case 'impression':b.data={mediaType:'video'};break;case 'start':b.data={duration:this.video.duration,videoPlayerVolume:this.video.volume};break;case 'mute':b.data={videoPlayerVolume:0};
break;case 'unmute':b.data={videoPlayerVolume:1};break;case 'sessionError':b.data={errorType:'video',message:''}}return b};V.prototype.sessionStart=function(){var a={context:{apiVersion:'1.0',environment:'web',accessMode:'full',videoElement:this.video,adSessionType:'html',omidJsInfo:{partnerName:'vis.x',partnerVersion:'1.0.0'}},verificationParameters:this.verificationParameters};if(this.eventListeners.hasOwnProperty('sessionStart')&&0<this.eventListeners.sessionStart.length&&!1===this.sessionStarted){var b=
Object.assign({},this.createOMIDEvent({kind:'sessionStart'}),{data:a});this.sessionStartedTimestamp=b.timestamp;this.eventListeners.sessionStart.forEach(function(a){a(b)})}};V.prototype.dispatchEvent=function(a){var b=a.type;this.eventListeners.hasOwnProperty(b)&&0<this.eventListeners[b].length?this.eventListeners[b].forEach(function(b){b(a)}):(!1===this.cachedEvents.hasOwnProperty(b)&&(this.cachedEvents[b]=[]),this.cachedEvents[b].push(a))};V.prototype.dispose=function(){this.messageBusEventListener.dispose();
var a=this.createOMIDEvent({kind:'sessionFinish'});this.dispatchEvent(a)};$jscomp.global.Object.defineProperties(V.prototype,{sessionStarted:{configurable:!0,enumerable:!0,get:function(){return!!this.sessionStartedTimestamp}}});var ha=/javascript/,ba=function(a,b,c,e,f,g){var r=this;this.isVPAID=!1;this.omidProcessors=[];this.vastLoaded=function(a){return new Promise(function(b,c){c=a.slice(0,a.length-1).map(d('Wrapper'));var e=a[a.length-1];e=d('InLine')(e);var f=r.context.Environment;r.context.messageBus.event.emit({kind:'tracker',
event:'video-vast-version',details:{version:E(a)}});f.isLogMode&&console.log('wrappers: ',c);f.isLogMode&&console.log('InLine: ',e);var g=m(r.logger,e);f.isLogMode&&console.log('linear: ',g);r.context.messageBus.event.emit({kind:'tracker',event:'video-vast-duration',details:{duration:String(g.duration)}});if(g.videoClicks&&g.videoClicks.clickThrough&&g.videoClicks.clickThrough.uri)var h=g.videoClicks.clickThrough.uri;else r.logger.warn('No ClickThrough supplied in the VAST, disabling cursor'),r.context.messageBus.event.emit({kind:'revert-cursor'});
var k=t(r.logger,g,!0,r.vastMediafilePriorities);r.logger.log('selected mediafile',{mediaFile:k});k&&r.reportCanPlayMime(k);if(g.duration&&g.skipoffset&&g.skipoffset.value){var C=g.skipoffset.value;g.skipoffset instanceof ia&&(C=C/100*g.duration)}f.isLogMode&&console.log('videoClicks: ',g.videoClicks);g.videoClicks&&g.videoClicks.clickTrackings.forEach(function(a){if(a.uri){var b={kind:'register',event:'click',type:'url',content:a.uri};a.id&&(b.meta={'vast-click-tracking-id':a.id});r.context.messageBus.tracking.emit(b)}});
var M=$jscomp.makeIterator(x(r.logger,c,e)),l=M.next().value,n=M.next().value,p=M.next().value;M=M.next().value;f.isLogMode&&console.log('impressions: ',l);l.forEach(function(a){a.uri&&r.context.messageBus.tracking.emit({kind:'register',event:'impression',type:'url',content:a.uri})});f.isLogMode&&console.log('videoClicks: ',p);p.forEach(function(a){a.clickTrackings.forEach(function(a){a.uri&&r.context.messageBus.tracking.emit({kind:'register',event:'click',type:'url',content:a.uri})})});f.isLogMode&&
console.log('icons: ',M);n.forEach(function(a){[['video-start','start'],['video-firstquartile','firstQuartile'],['video-midpoint','midpoint'],['video-thirdquartile','thirdQuartile'],['video-complete','complete'],['video-progress','progress'],['video-mute','mute'],['video-unmute','unmute'],['video-pause','pause'],['video-resume','resume'],['video-creativeview','creativeView'],['video-closelinear','closeLinear'],['video-closelinear','close'],['video-skip','skip']].forEach(function(b){b=$jscomp.makeIterator(b);
var c=b.next().value,d=b.next().value;a.get(d).forEach(function(a){if(a.uri){var b={kind:'register',event:c,type:'url',content:a.uri};'progress'===d&&a.offset&&(a.offset instanceof na&&a.offset.value?b.meta={offset:a.offset.value,type:'absolute'}:a.offset instanceof ia&&a.offset.value&&(b.meta={offset:a.offset.value,type:'relative'}));r.context.messageBus.tracking.emit(b)}})})});if(k){r.context.messageBus.event.emit({kind:'tracker',event:'video-vast-dimensions',details:{dimensions:k.width+'x'+k.height}});
r.context.messageBus.event.emit({kind:'tracker',event:'video-vast-mediafile-type',details:{mime:String(k.type)}});f=z(n);r.logger.debug('TrackingEvents',{trackingEvents:JSON.stringify(f,null,2)});if(ha.test(k.type)&&'VPAID'===k.apiFramework){r.isVPAID=!0;var Q=new y.d({context:r.context,adConfig:r.adConfig,vpaidExecutableUrl:k.uri,adParameters:g.adParameters,width:k.width||0,height:k.height||0},f)}else Q=new y.c({context:r.context,adConfig:r.adConfig,initConfig:r.initConfig,sourceUrl:k.uri},f);g=
[];'enabled'===r.adConfig.video.omid.mode&&(g=I(c,e));r.omidProcessors=g.map(function(a){return new V(r.context,r.logger,Q.video,a)});r.context.messageBus.event.onceEvent('impression',function(a){r.omidProcessors.forEach(function(a){a.emit({kind:'impression'})})});Q.on(r.handleVideoEvents);r.omidProcessors.forEach(function(a){Q.pipe(a)});Q.appendTo(r.container);b({videoPlayer:Q,skipOffset:C,clickThrough:h,icons:M})}})};this.handleVideoEvents=function(a){Object(Pa.c)(r.context,a,r.onSkip)};this.onSkip=
function(){r.logger.log('skip was pressed');r.context.messageBus.event.emit({kind:'close',interactive:!0})};this.state='preloading';this.url=f;a.messageBus.asset.emit({kind:'added',message:{kind:'new-asset',asset:this}});this.adConfig=c;this.initConfig=e;this.context=a;this.logger=a.newLogger('VASTProcessor');this.container=g;this.vastLoader=new aa(this.logger,f)};ba.prototype.load=function(){var a=this;return this.vastLoader.load(this.context.Environment,function(){var b=[];return function(c){c&&
-1===b.indexOf(c)&&(b.push(c),a.context.messageBus.tracking.emit({kind:'register',event:'video-error',type:'url',content:c}))}}()).then(function(b){return a.vastLoaded(b)}).catch(function(b){var c=a.state;a.state='failed-preload';a.context.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:a,previousState:c}});if(b instanceof Z)throw b;throw new R.k(R.i,b.message);})};ba.prototype.finish=function(){var a=this.state;this.state='loaded';this.context.messageBus.asset.emit({kind:'updated',
message:{kind:'updated-state',asset:this,previousState:a}})};ba.prototype.dispose=function(){this.logger.debug('dispose');this.omidProcessors.forEach(function(a){a.dispose()});this.video&&this.video.off(this.handleVideoEvents)};ba.prototype.reportCanPlayMime=function(a){var b=y.e(this.context.Environment,'video');a.type&&!ha.test(a.type)&&this.context.messageBus.event.emit({kind:'tracker',event:'video-canplay-mime',details:{canplay:b.canPlayType(a.type)}})};$jscomp.global.Object.defineProperties(ba.prototype,
{vastMediafilePriorities:{configurable:!0,enumerable:!0,get:function(){var a=this;return Object.keys(this.adConfig).map(function(b){var c=b.match(/^vast-mediafile-priority-(\d+)$/);if(c&&(b=a.adConfig[b],'string'===typeof b)){var d=$jscomp.makeIterator(b.split(':'));b=d.next().value;d=d.next().value;return{priority:Number(c[1]),kind:b,value:d}}}).filter(function(a){return!!a}).sort(function(a,b){return a.priority-b.priority})}}});var K=b(0),xa=b(12),ca=function(a,b,c){this.createdTimestamp=Date.now();
this.hadFirstResume=!1;this.onClick=function(a){a.stopPropagation()};var d=a.Environment;this.logger=a.newLogger('SkipAd');this.adConfig=b;if('disabled-override-vast'!==b.video.skip.mode){var e=y.e(d,'div');this.root=e;var f=y.e(d,'div');this.counterDiv=f;this.skipDiv=a=y.e(d,'div');e.append(f);e.append(a);var g=b.video.skip;f.style.fontSize=g.button.counterFontSize;a.style.display='none';a.addEventListener('click',c);a.style.fontSize=g.button.skipTextFontSize;c=y.e(d,'span');c.textContent=g.button.skipText;
c.style.verticalAlign='baseline';a.append(c);e.style.color=g.button.textColor;e.style.backgroundColor=g.button.bgColor;e.style.fontFamily='sans-serif';e.style.width=b.video.skip.button.width+'px';e.style.padding='5px';e.style.userSelect='none';e.style.cursor='default';e.style.textAlign='center';e.style.lineHeight='1.1';e.style.boxSizing='content-box';e.addEventListener('click',this.onClick,!1);b=y.e(d,'img');b.src=g.button.icon.url;b.height=g.button.icon.height;b.width=g.button.icon.width;b.style.marginLeft=
'10px';b.style.position='relative';b.style.top='3px';b.style.display='inline-block';b.style.verticalAlign='baseline';b.style.setProperty('width',g.button.icon.width+'px','important');b.style.setProperty('height',g.button.icon.height+'px','important');a.append(b);this.setMessage(!1)}};ca.prototype.appendTo=function(a){a.append(this.root)};ca.prototype.setMessage=function(a){a&&delete this.timerId;var b=Date.now();b=(this.createdTimestamp+1E3*this.adConfig.video.skip.skipSeconds-b)/1E3;0<=b?(this.counterDiv.textContent=
this.adConfig.video.skip.button.counterMessage+Math.ceil(b),a&&(this.timerId=window.setTimeout(this.setMessage.bind(this,!0),1E3*(b-Math.floor(b))))):this.toggle()};ca.prototype.toggle=function(){this.logger.debug('toggle to skip button');this.counterDiv.style.display='none';this.skipDiv.style.display='';this.root.style.cursor='pointer';this.root.removeEventListener('click',this.onClick,!1)};ca.prototype.pauseTimer=function(){this.timerId&&(this.logger.debug('pauseTimer'),window.clearTimeout(this.timerId),
delete this.timerId,this.pausedTimestamp=Date.now())};ca.prototype.resumeTimer=function(){if(this.pausedTimestamp||!this.hadFirstResume){this.logger.debug('resumeTimer');var a=Date.now();this.createdTimestamp=this.hadFirstResume?this.createdTimestamp+(a-this.pausedTimestamp):a;delete this.pausedTimestamp;this.setMessage(!0);this.hadFirstResume=!0}};var ya=function(a,b,c){var d=this;this.volumeState='unmute';this.state='preloading';var e=a.Environment;this.logger=a.newLogger('MuteUnmuteButton');b=
b.video.muteUnmuteButton;this.url='';a.messageBus.asset.emit({kind:'added',message:{kind:'new-asset',asset:this}});var f=0,g=function(){f++;if(2===f){var b=d.state;d.state='loaded';a.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:d,previousState:b}})}},r=function(){var b=d.state;d.state='failed-preload';a.messageBus.asset.emit({kind:'updated',message:{kind:'updated-state',asset:d,previousState:b}})};if('static-image'===b.mode){var h=y.e(e,'div'),k=y.e(e,'img');e=y.e(e,'img');
k.width=b.width;k.height=b.height;k.addEventListener('load',function(){g()},!1);k.addEventListener('error',function(){r()},!1);k.src=b.muteImageUrl;k.style.pointerEvents='none';e.width=b.width;e.height=b.height;e.addEventListener('load',function(){g()},!1);e.addEventListener('error',function(){r()},!1);e.src=b.unmuteImageUrl;e.style.pointerEvents='none';e.style.transform='translate3d(0,0,0)';h.style.width=b.width+'px';h.style.height=b.height+'px';h.style.cursor='pointer';h.style.userSelect='none';
this.root=h;this.muteImage=k;this.unmuteImage=e;h.addEventListener('click',c,!1);this.refresh()}};ya.prototype.refresh=function(){var a=this.volumeState,b=this.logger,c=this.root,d=this.muteImage,e=this.unmuteImage;c&&(b.debug('refresh',{volumeState:a}),'mute'===a?(c.append(d),e.remove()):(c.append(e),d.remove()))};ya.prototype.toggle=function(a){a||(a='mute'===this.volumeState?'unmute':'mute');this.volumeState=a;this.refresh()};var Mb=b(4),Fa=b(9),Nb=b(8),A=function(){var a=this;this.adPainter=this.adConfig=
this.initConfig=this.logger=this.context=this.adCore=null;this.adAssetList=[];this.waitForAssetReadyCheck=!0;this.isReady=!1;this.isVideo=!0;this.isImage=!1;this.adContainer=null;this.videoContainer=document.createElement('div');this.videoSourceTag=this.videoTag=null;this.videoPausedDueToPageVisibilityChange=this.videoIsCurrentlyPlaying=this.videoStarted=!1;this.wrapper=document.createElement('div');this.isVideoComplete=this.shouldPlayOnLoad=!1;this.hasAudio=!0;this.videoLoaded=!1;this.icons=[];this.iconNodes=
[];this.haveReceivedVideoSlotDimensions=!1;this.processCreativeIntervalId=-1;this.wasClicked=!1;this.onVideoComplete=function(){a.isVideoComplete=!0;a.processCreativeStop();a.removeIcons();var b=a.adConfig.video.reminderBanner,c=a.context.Environment;a.skipAdButton&&a.skipAdButton.root&&(a.context.messageBus.clickOverlay.emit({kind:'remove-element',element:a.skipAdButton.root}),delete a.skipAdButton);a.muteUnmuteButton&&a.muteUnmuteButton.root&&a.context.messageBus.clickOverlay.emit({kind:'remove-element',
element:a.muteUnmuteButton.root});switch(b.mode){case 'disabled':a.closeAd();break;case 'display-paused-frame':a.videoPlayer instanceof y.c?(a.videoPlayer.seek(b.timeOffset),a.processCreativeWorker(),a.removeCloseAdButton(),a.tryToAddCloseAdButton(),a.removeBranding()):a.closeAd();break;case 'freeze-last-frame':a.videoPlayer instanceof y.c?(a.processCreativeWorker(),a.removeCloseAdButton(),a.tryToAddCloseAdButton(),a.removeBranding()):a.closeAd();break;case 'static-image':a.reminderBannerImage?(a.brandingImage&&
a.context.messageBus.clickOverlay.emit({kind:'remove-element',element:a.brandingImage}),a.videoPlayer.dispose(),a.wrapper.append(a.reminderBannerImage.node),a.processCreativeWorker(a.reminderBannerImage.node),a.removeCloseAdButton(),a.tryToAddCloseAdButton(),a.removeBranding()):a.closeAd()}(c.isLogMode||c.isDebugMode)&&a.context.troubleshooting.log()};this.closeAd=function(b,c){c=void 0===c?!1:c;var d=a.context.Environment,e=!1;b&&(e=!0,b.stopPropagation(),c?a.context.messageBus.event.emit({kind:'tracker',
event:'video-skip'}):a.context.messageBus.event.emit({kind:'tracker',event:'video-closelinear'}),a.context.messageBus.event.emit({kind:'tracker',event:'close'}));a.context.messageBus.event.emit({kind:'close',interactive:e});(d.isLogMode||d.isDebugMode)&&a.context.troubleshooting.log()};this.toggleSound=function(b){var c=a.videoPlayer;b&&b.stopPropagation();c&&(c.muted?c.unmute():c.mute())};this.onVideoEvents=function(b){var c=a.muteUnmuteButton;c&&('mute'===b.kind?c.toggle('unmute'):'unmute'===b.kind&&
c.toggle('mute'));'play'!==b.kind&&'resume'!==b.kind||a.processCreativeStart();'pause'!==b.kind&&'complete'!==b.kind||a.processCreativeStop();'timeUpdate'!==b.kind&&'actualVideoSizes'!==b.kind&&'audioAvailability'!==b.kind||a.processCreativeWorker()};this.onVideoPlayerActualDimensions=function(b){var c=b.width,d=b.height,e=b.duration;b=b.source;var f=a.context.Environment;a.logger.debug('videoPlayerActualDimensions',{width:c,height:d,duration:Object(Mb.a)(f,e),source:b});if('video-slot'===b){if(a.haveReceivedVideoSlotDimensions){a.logger.warn('videoPlayerActionDimensions: already have received video-slot dimensions');
a.context.messageBus.event.emit({kind:'tracker',event:'video-warning-message',details:{message:'already have received video-slot dimensions'}});return}a.haveReceivedVideoSlotDimensions=!0}a.videoDimensions={width:c,height:d};'video-slot'===b&&(a.context.messageBus.event.emit({kind:'tracker',event:'video-real-dimensions',details:{dimensions:c+'x'+d}}),a.context.messageBus.event.emit({kind:'tracker',event:'video-real-duration',details:{duration:e}}));'disabled'===a.adConfig.video.background.mode&&(f.updatedCreativeHeight=
d,f.updatedCreativeWidth=c);a.adCore.onResize()};this.onVideoPlayerAudioAvailability=function(b){b=b.hasAudio;a.logger.debug('onVideoPlayerAudioAvailability',{hasAudio:b});a.hasAudio=b;a.context.messageBus.event.emit({kind:'tracker',event:'video-has-audio',details:{hasAudio:b}})};this.loadVideo=function(){a.logger.debug('loadVideo');return a.videoPlayer.load()};this.handleError=function(b){a.logger.debug('handleError',{error:b});if(b instanceof R.k){var c={kind:'tracker',event:'video-error',details:{errorCode:b.code}};
'string'===typeof b.cause&&(c.details.message=b.cause);a.context.messageBus.event.emit(c)}else a.context.messageBus.event.emit({kind:'tracker',event:'video-error',details:{errorCode:R.i,message:String(b)}});a.closeAd()}};A.prototype.init=function(a,b,c,d,e,f){this.adCore=a;this.context=b;this.adPainter=c;this.initConfig=d;this.adConfig=e;this.adAssetList=f;this.logger=this.context.newLogger('AdVideo');return!0};A.prototype.constructVisibilityHandler=function(a){this.videoAutoStartStopHandler=this.createVisibilityTracker();
a.push(this.videoAutoStartStopHandler);return a};A.prototype.constructAdNodes=function(a,b){var c=this,d=this.videoContainer;d.id='yoc_video_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;d.style.position='relative';d.style.width='100%';d.style.height='auto';var e=this.initConfig.placement,f=e.width,g=e.height;e=this.wrapper;e.id='yoc_video_wrapper_container_'+this.context.productTitlePostfix+'_'+this.initConfig.meta.adSessionId;this.setDimensions({width:f,height:g,
scaleFactor:1});e.style.overflow='hidden';e.style.width='0';e.style.height='0';e.style.position='relative';this.wrapper=e;d.append(e);a.append(d);xa.a.preload(this.adConfig,e);f=this.adConfig.video;var h=f.branding;d=f.reminderBanner;f=f.muteUnmuteButton;if('static-image'===h.mode){g=new y.b(this.context,h.url,!0);var k=g.node;k.width=h.width;k.height=h.height;k.style.margin='10px';k.style.width=h.width+'px';k.style.height=h.height+'px';h=y.e(this.context.Environment,'div');h.style.pointerEvents=
'none';h.style.userSelect='none';h.append(g.node);this.brandingImage=h}'static-image'===d.mode&&(this.reminderBannerImage=new y.b(this.context,d.url,!0),d=this.reminderBannerImage.node.style,d.objectFit='cover',d.position='absolute',d.width='100%',d.height='100%',d.top='0');'static-image'===f.mode&&(this.muteUnmuteButton=new ya(this.context,this.adConfig,this.toggleSound));d=this.context.metrics.replaceMacros(decodeURIComponent(this.initConfig.rtbCreative));var r=new Promise(function(a){c.context.messageBus.event.onceEvent('impression',
function(){a()})}),l=this.adConfig.video.skip;switch(this.adConfig.video.sourceType){case 'vast':var m=new ba(this.context,this.logger,this.adConfig,this.initConfig,d,e);this.vastProcessor=m;m.load().then(function(a){var b=a.videoPlayer,d=a.skipOffset,e=a.clickThrough;c.icons=a.icons;c.videoPlayer=b;c.tryAddSubtitles();'disabled-override-vast'!==l.mode&&(c.vastSkipOffset='enabled-override-vast'!==l.mode?d:l.skipSeconds);c.startVideoPlayer(r,e);m.finish()}).catch(function(a){c.closeAd();if(a instanceof
Error){var b={message:a.message};a.stack&&(b.stack=a.stack);a.name&&(b.name=a.name)}c.logger.error('videoPlayer.load() failed',b);c.handleError(a)});break;case 'video-file':d=new y.c({context:this.context,adConfig:this.adConfig,initConfig:this.initConfig,sourceUrl:d});'enabled'!==l.mode&&'enabled-override-vast'!==l.mode||!l.skipSeconds||(this.vastSkipOffset=l.skipSeconds);d.on(function(a){Object(Pa.c)(c.context,a,function(){})});d.appendTo(e);this.videoPlayer=d;this.startVideoPlayer(r,this.initConfig.tracking.click);
this.tryAddSubtitles();break;default:throw Error('unknown sourceType: '+this.adConfig.video.sourceType);}this.context.messageBus.event.emit({kind:'tracker',event:'video-source-type',details:{type:this.adConfig.video.sourceType}});return{adNode:a,adNodeHidden:b}};A.prototype.startVideoPlayer=function(a,b){var c=this,d=this.videoPlayer,e=this.context.Environment;d.onceEvent('complete',this.onVideoComplete);d.on(this.onVideoEvents);if(d instanceof y.d){this.adCore.isVPAID=!0;this.videoAutoStartStopHandler.disable();
var f=this.createVisibilityTracker({overrideAutoStartStopOn:0,start:function(){c.logger.debug('zeroVPAIDVisibility start');c.context.messageBus.event.emit({kind:'tracker',event:'video-autoplay-try-start'});d.onceEvent('start',function(){c.createVisibilityTracker({start:function(){f.disable();c.logger.debug('normalVPAIDVisibility start');c.context.messageBus.event.emit({kind:'tracker',event:'video-autoplay-try-start'});c.play()},stop:function(){c.logger.debug('normalVPAIDVisibility stop');c.context.messageBus.event.emit({kind:'tracker',
event:'video-autoplay-try-stop'});c.pause()}}).enable()});c.play()},stop:function(){f.disable();c.logger.debug('zeroVPAIDVisibility stop');c.context.messageBus.event.emit({kind:'tracker',event:'video-autoplay-try-stop'});c.pause()}});f.enable();this.context.messageBus.event.onceEvent('shown',function(){c.logger.debug('handling visible impression');c.loadVideo().then(function(){c.videoLoaded=!0;c.isReady=!0;(c.shouldPlayOnLoad||e.isSticky)&&c.play()}).catch(c.handleError)});d.onceEvent('start',function(){c.setupClickHandler(b);
c.displayOverlayElements();c.skipAdButton&&c.skipAdButton.resumeTimer();c.context.messageBus.event.emit({kind:'show-advertisment-message'})})}d instanceof y.c&&Promise.all([this.loadVideo(),a]).then(function(){c.videoLoaded=!0;c.isReady=!0;c.setupClickHandler(b);(c.shouldPlayOnLoad||e.isSticky)&&c.play();c.displayOverlayElements()}).catch(this.handleError);d.onEvent('actualVideoSizes',this.onVideoPlayerActualDimensions);d.onceEvent('audioAvailability',this.onVideoPlayerAudioAvailability)};A.prototype.updateStyles=
function(a){var b=this.context.Environment;(void 0===a?{updateAdPosition:!1,reset:!1}:a).reset?this.setDimensions({width:0,height:0,scaleFactor:1}):this.setDimensions({width:b.scaledWidth/b.usedScaleFactor,height:b.scaledHeight/b.usedScaleFactor,scaleFactor:b.usedScaleFactor})};A.prototype.setDimensions=function(a){var b=a.width,c=a.height;a=a.scaleFactor;var d=this.context.Environment;this.logger.debug('setDimensions',{width:b,height:c,scaleFactor:a});var e=b*a,f=c*a;if(this.withBackground){f=this.getVideoBackgroundOffset();
e=f.top*a;f=f.left*a;b=(0===b?b:this.videoDimensions?this.videoDimensions.width:0)*a;c=(0===c?c:this.videoDimensions?this.videoDimensions.height:0)*a;var g='position:relative; width:'+b+'px; height:'+c+'px; left:'+f+'px; top:'+e+'px; overflow:hidden; opacity:1;';d.isMRAID&&(g+='left:50%; margin-left: '+-b/2+'px;');this.videoContainer.style.cssText='position:absolute; left:0px; top:0px; width:100%; height:auto;';this.wrapper.style.cssText=g;this.videoDimensions&&this.videoPlayer instanceof y.d&&this.videoPlayer.setDimensions({width:this.videoDimensions.width,
height:this.videoDimensions.height,scaleFactor:a});this.videoPlayer instanceof y.c&&this.videoPlayer.setDimensions({width:b,height:c,scaleFactor:1});'static-image'===this.adConfig.video.reminderBanner.mode&&this.reminderBannerImage&&(this.reminderBannerImage.node.style.cssText='object-fit: cover; position: absolute; top:'+e+'px; left:'+f+'px; width:'+b+'px; height:'+c+'px;')}else g='width:'+e+'px;height:'+f+'px;overflow:hidden;position:relative;text-align:left;opacity:1;',d.isMRAID&&(g+='left:50%; margin-left: '+
-e/2+'px;'),this.wrapper.style.cssText=g,this.videoPlayer instanceof y.c&&this.videoPlayer.setDimensions({width:b,height:c,scaleFactor:a}),this.videoDimensions&&this.videoPlayer instanceof y.d&&this.videoPlayer.setDimensions({width:this.videoDimensions.width,height:this.videoDimensions.height,scaleFactor:a}),'static-image'===this.adConfig.video.reminderBanner.mode&&this.reminderBannerImage&&(this.reminderBannerImage.node.style.cssText='object-fit: cover; position: absolute; top:0px; left:0px; width:'+
e+'px; height:'+f+'px;')};A.prototype.processCreativeStart=function(){var a=this;if(-1===this.processCreativeIntervalId){var b=this.context.Environment,c=50,d=this.adCore.getCreative();d instanceof f.a&&d.creative&&Object.keys(d.creative).forEach(function(e){var f=a.adCore.getCreativeOptionDetails(d.creative,e),g=f.configCreative;f.creativeDetails.container&&e===b.creativeOption&&'blurred-video'===g.mode&&(c=g.updateInterval)});this.logger.debug('processCreativeStart');this.processCreativeIntervalId=
b.hostWindow.setInterval(function(){a.processCreativeWorker()},c);this.processCreativeWorker()}};A.prototype.processCreativeWorker=function(a){var b=this;a=void 0===a?!1:a;var c=this.adCore.getCreative();c instanceof f.a&&c.creative&&Object.keys(c.creative).forEach(function(d){var e=b.adCore.getCreativeOptionDetails(c.creative,d),f=e.configCreative;e=e.creativeDetails;e.container&&d===b.context.Environment.creativeOption&&'blurred-video'===f.mode&&e.canvas&&(a||b.videoPlayer.video&&0<b.videoPlayer.video.duration)&&
(b.logger.debug('processCreativeWorker'),e.canvas.getContext('2d').drawImage(a?a:b.videoPlayer.video,0,0,e.canvas.width,e.canvas.height))})};A.prototype.processCreativeStop=function(){-1!==this.processCreativeIntervalId&&(this.logger.debug('processCreativeStop'),this.context.Environment.hostWindow.clearInterval(this.processCreativeIntervalId),this.processCreativeIntervalId=-1)};A.prototype.onOrientationChange=function(a){};A.prototype.onResize=function(a){};A.prototype.postProcessAfterInsertAd=function(){};
A.prototype.dispose=function(a){a=void 0===a?!0:a;var b=this.context,c=b.Environment;b=b.Listener;this.logger.debug('dispose');this.removeIcons();this.videoAutoStartStopHandler&&this.videoAutoStartStopHandler.disable();this.vastProcessor&&this.vastProcessor.dispose();this.videoPlayer&&(this.videoPlayer.off(this.onVideoEvents),this.videoPlayer.dispose());a&&(b.remove('orientationchange'),b.remove('resize'));(c.isLogMode||c.isDebugMode)&&this.context.troubleshooting.log()};A.prototype.onSticky=function(){this.logger.debug('onSticky');
'disabled'!==this.adConfig.creative.sticky.mode&&(this.videoLoaded&&this.videoPlayer&&(this.logger.log('pause'),this.videoPlayer.pause(),this.videoIsCurrentlyPlaying=!1,this.skipAdButton&&this.skipAdButton.pauseTimer()),this.processCreativeStop(),this.removeIcons(),this.skipAdButton&&this.skipAdButton.root&&(this.context.messageBus.clickOverlay.emit({kind:'remove-element',element:this.skipAdButton.root}),delete this.skipAdButton),this.muteUnmuteButton&&this.muteUnmuteButton.root&&this.context.messageBus.clickOverlay.emit({kind:'remove-element',
element:this.muteUnmuteButton.root}),this.videoPlayer.dispose(),this.removeCloseAdButton(),this.tryToAddCloseAdButton(),this.removeBranding(),this.dispose(!1))};A.prototype.onTakeoverEnable=function(a){this.logger.log('onTakeoverEnable - '+a);this.isReady||this.logger.log('onTakeoverEnable - '+a+' - creative is not yet ready')};A.prototype.onTakeoverDisable=function(a){this.logger.log('onTakeoverDisable - '+a);this.isReady||this.logger.log('onTakeoverDisable - '+a+' - creative is not yet ready')};
A.prototype.play=function(){var a=this.context.Environment;this.shouldPlayOnLoad=!0;this.videoLoaded&&(this.videoStarted=!0,this.videoPlayer?(this.logger.debug('play'),this.videoPlayer.play(),this.videoIsCurrentlyPlaying=!0,this.skipAdButton&&this.skipAdButton.resumeTimer()):this.logger.debug('play: no video player yet'));(a.isLogMode||a.isDebugMode)&&this.context.troubleshooting.log()};A.prototype.pause=function(){var a=this.context.Environment;this.shouldPlayOnLoad=!1;this.processCreativeStop();
this.videoLoaded&&(this.videoStarted&&!this.adConfig.video.autoStop?this.logger.log('pause: pause video is disabled'):this.videoPlayer?(this.logger.log('pause'),this.videoPlayer.pause(),this.videoIsCurrentlyPlaying=!1,this.skipAdButton&&this.skipAdButton.pauseTimer()):this.logger.debug('pause: no video player yet'));(a.isLogMode||a.isDebugMode)&&this.context.troubleshooting.log()};A.prototype.displayOverlayElements=function(){var a=this,b=this.context.Environment;this.logger.debug('displayOverlayElements');
this.displayIcons();var c=this.adConfig.video.branding;'static-image'===c.mode&&this.brandingImage&&(this.withBackground?(this.getVideoBackgroundOffset(),this.context.messageBus.clickOverlay.emit({kind:'add-element',element:this.brandingImage,parent:this.wrapper,preferredPosition:c.position,margin:{top:0,left:0,right:0,bottom:0},priority:100})):this.context.messageBus.clickOverlay.emit({kind:'add-element',element:this.brandingImage,parent:this.wrapper,preferredPosition:c.position,priority:100}));
if(c=this.vastSkipOffset){if(this.skipAdButton=c=new ca(this.context,Object.assign({},this.adConfig,{video:Object.assign({},this.adConfig.video,{skip:Object.assign({},this.adConfig.video.skip,{skipSeconds:c})})}),function(b){a.closeAd(b,!0)}),c.root)if(this.withBackground&&'on-video'===this.adConfig.video.background.closeButtonPosition){var d=this.getVideoBackgroundOffset();this.context.messageBus.clickOverlay.emit({kind:'add-element',element:c.root,preferredPosition:this.adConfig.video.skip.button.position,
margin:{top:d.top,left:d.left,right:b.usedWidth-d.left-this.videoDimensions.width,bottom:b.usedHeight-d.top-this.videoDimensions.height}})}else this.context.messageBus.clickOverlay.emit({kind:'add-element',element:c.root,preferredPosition:this.adConfig.video.skip.button.position})}else this.tryToAddCloseAdButton();c=this.adConfig.video.muteUnmuteButton;if('static-image'===c.mode&&this.hasAudio&&(d=this.muteUnmuteButton,d.root))if(this.withBackground){var e=this.getVideoBackgroundOffset(),f=0,g=0,
h=0,k=0;'enabled'===this.adConfig.video.background.mode&&'on-background'===this.adConfig.video.background.muteUnmuteButtonPosition?k=h=g=f=0:(f=e.top,g=e.left,h=b.usedWidth-e.left-this.videoDimensions.width,k=b.usedHeight-e.top-this.videoDimensions.height);b=function(a){return Object(Nb.a)(a)?-0:a};this.context.messageBus.clickOverlay.emit({kind:'add-element',element:d.root,preferredPosition:c.position,margin:{top:b(f),left:b(g),right:b(h),bottom:b(k)}})}else this.context.messageBus.clickOverlay.emit({kind:'add-element',
element:d.root,preferredPosition:c.position});this.context.messageBus.event.onceEvent('sticky',function(){a.skipAdButton||(a.removeCloseAdButton(),a.tryToAddCloseAdButton());a.context.messageBus.clickOverlay.emit({kind:'refresh'});a.play()})};A.prototype.removeCloseAdButton=function(){this.closeAdButton&&(this.closeAdButton.root&&this.context.messageBus.clickOverlay.emit({kind:'remove-element',element:this.closeAdButton.root}),delete this.closeAdButton)};A.prototype.removeBranding=function(){'static-image'===
this.adConfig.video.branding.mode&&this.brandingImage&&(this.context.messageBus.clickOverlay.emit({kind:'remove-element',element:this.brandingImage}),delete this.brandingImage)};A.prototype.tryToAddCloseAdButton=function(){var a=this.context.Environment,b=this.adConfig.closeButton.mode;if(!a.isSticky&&('enabled'===b||'only-inline'===b)||a.isSticky&&!this.isVideoComplete&&('enabled'===b||'only-sticky'===b)||a.isSticky&&this.isVideoComplete)if(this.closeAdButton=b=new xa.a(this.context,this.adConfig,
this.closeAd),b.root){var c=xa.a.defaultPosition;'disabled'!==this.adConfig.closeButton.mode&&(c=this.adConfig.closeButton.position);if(this.withBackground&&'on-video'===this.adConfig.video.background.closeButtonPosition){var d=this.getVideoBackgroundOffset();this.context.messageBus.clickOverlay.emit({kind:'add-element',element:b.root,preferredPosition:c,margin:{top:d.top,left:d.left,right:a.usedWidth-d.left-this.videoDimensions.width,bottom:a.usedHeight-d.top-this.videoDimensions.height}})}else this.context.messageBus.clickOverlay.emit({kind:'add-element',
element:b.root,preferredPosition:c})}};A.prototype.createVisibilityTracker=function(a){var b=this;a=new K.c('Video Auto-Start-Stop',this.context,this.adPainter.productContainer,a&&null!=a.overrideAutoStartStopOn?a.overrideAutoStartStopOn:this.adConfig.video.autoStartStopOn,0,this.adConfig.tracking.visibilityHandlerType,[],!1,a?a.start:function(){b.context.messageBus.event.emit({kind:'tracker',event:'video-autoplay-try-start'});b.play()},a?a.stop:function(){b.context.messageBus.event.emit({kind:'tracker',
event:'video-autoplay-try-stop'});b.pause()});a.init();return a};A.prototype.setupClickHandler=function(a){var b=this;this.adPainter.productContainer.setAttribute(K.a.CLICK,K.b.ENABLED);this.adPainter.productContainer.setAttribute(K.a.CLICK_STATUS,K.b.WAITING);this.adPainter.productContainer.setAttribute(K.a.CLICK_GOAL,'click');this.adPainter.productContainer.setAttribute(K.a.AD_SESSION_ID,this.initConfig.meta.adSessionId);this.context.setupClickHandler(this.adPainter.productContainer,function(){b.wasClicked?
(b.logger.log('SKIP repeated CLICK on video creative'),b.adPainter.productContainer.setAttribute(K.a.CLICK_SUCCESS,'click-repeated'),b.context.messageBus.event.emit({kind:'tracker',event:'click-repeated',details:{source:'video'}})):(b.logger.log('Handle CLICK on video creative'),b.wasClicked=!0,void 0===a?(b.adPainter.productContainer.setAttribute(K.a.CLICK_STATUS,K.b.FINISHED),b.adPainter.productContainer.setAttribute(K.a.CLICK_SUCCESS,'click-no-target')):(Object(Fa.a)(b.context,a),b.adPainter.productContainer.setAttribute(K.a.CLICK_STATUS,
K.b.FINISHED),b.adPainter.productContainer.setAttribute(K.a.CLICK_SUCCESS,'click')),b.context.messageBus.event.emit({kind:'tracker',event:'click',details:{source:'video'}}))})};A.prototype.displayIcons=function(){var a=this,b=this.icons;this.logger.debug('displayIcons',{icons:JSON.stringify(b,null,2)});b.map(function(b){return{icon:b,node:D(a.context,b)}}).filter(function(a){return void 0!==a.node}).forEach(function(b){var c=b.icon,d=b.node,e;'left'===c.xPosition&&'top'===c.yPosition?e='top-left':
'left'===c.xPosition&&'bottom'===c.yPosition?e='bottom-left':'right'===c.xPosition&&'top'===c.yPosition?e='top-right':'right'===c.xPosition&&'bottom'===c.yPosition&&(e='bottom-right');e&&(a.context.messageBus.clickOverlay.emit({kind:'add-element',preferredPosition:e,element:d,margin:{top:0,left:0,bottom:0,right:0}}),a.context.messageBus.event.emit({kind:'tracker',event:'video-icon-view',meta:{program:String(c.program)}}),a.iconNodes.push(b))})};A.prototype.removeIcons=function(){var a=this;this.logger.debug('removeIcons');
this.iconNodes.forEach(function(b){a.context.messageBus.clickOverlay.emit({kind:'remove-element',element:b.node})})};A.prototype.getVideoBackgroundOffset=function(){if(this.withBackground){var a=0,b=0,c=this.adConfig.creative[this.context.Environment.creativeOption].video;c&&(a=c.top,b=c.left);c=this.adConfig.video.background;a=a||c.video.top||0;b=b||c.video.left||0;return{top:a,left:b}}return{top:0,left:0}};A.prototype.tryAddSubtitles=function(){try{var a=decodeURIComponent(this.adConfig.video.subtitles.source.replace(/\+/g,
' '));a&&this.videoPlayer instanceof y.c&&this.videoPlayer.addSubtitles(a)}catch(C){this.context.messageBus.event.emit({kind:'tracker',event:'video-subtitles-error',details:{message:String(C)}})}};$jscomp.global.Object.defineProperties(A.prototype,{withBackground:{configurable:!0,enumerable:!0,get:function(){return'enabled'===this.adConfig.video.background.mode}}});var Ob=b(3),Pb=b(14),Qb=b(15),Ra=b(16),za=Object(Pb.a)().wnd;Object(Qb.a)(za);Object.keys(za.__YOC.session).forEach(function(a){a=za.__YOC.session[a];
var b=a.initConfig,c=a.adConfigDefault,d=a.adConfigSpecific;a.processed||a.buildTag!==Ra.a||a.buildTime!==Ra.b||'creative-video'!==a.bundle||(a.processed=!0,Object(Ob.a)(c,b.options.adUnit,b.options.deal,function(a){var e=[];e.push(new f.a);e.push(new A);(new O.a({bundle:'creative-video',initConfig:b,adConfigDefault:c,adConfigSpecific:JSON.stringify(d),adAssetList:e,mraidInfo:a})).init()}))})}]);}).call(this || window)
